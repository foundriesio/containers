"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8431],{"./public/app/features/folders/AccessControlFolderPermissions.tsx":(e,s,n)=>{n.r(s),n.d(s,{AccessControlFolderPermissions:()=>x,default:()=>P});var o=n("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),i=n("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),r=n("./public/app/core/components/AccessControl/index.ts"),t=n("./public/app/core/components/Page/Page.tsx"),d=n("./public/app/core/core.ts"),a=n("./public/app/core/selectors/navModel.ts"),c=n("./public/app/types/index.ts"),p=n("./public/app/features/folders/state/actions.ts"),l=n("./public/app/features/folders/state/navModel.ts"),m=n("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u={getFolderByUid:p.Pb},h=(0,i.connect)((function(e,s){const n=s.match.params.uid;return{uid:n,navModel:(0,a.h)(e.navIndex,`folder-permissions-${n}`,(0,l._)(1))}}),u),x=e=>{let{uid:s,getFolderByUid:n,navModel:i}=e;(0,o.useEffect)((()=>{n(s)}),[n,s]);const a=d.Vt.hasPermission(c.bW.OrgUsersRead),p=d.Vt.hasPermission(c.bW.FoldersPermissionsWrite);return(0,m.jsx)(t.Z,{navModel:i,children:(0,m.jsx)(t.Z.Contents,{children:(0,m.jsx)(r.P,{resource:"folders",resourceId:s,canListUsers:a,canSetPermissions:p})})})},P=h(x)},"./public/app/features/folders/FolderPermissions.tsx":(e,s,n)=>{n.r(s),n.d(s,{FolderPermissions:()=>F,default:()=>_});var o,i,r,t,d=n("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a=n("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),c=n("./packages/grafana-ui/src/index.ts"),p=n("./public/app/core/components/Animations/SlideDown.tsx"),l=n("./public/app/core/components/Page/Page.tsx"),m=n("./public/app/core/components/PermissionList/AddPermission.tsx"),u=n("./public/app/core/components/PermissionList/PermissionList.tsx"),h=n("./public/app/core/components/PermissionList/PermissionsInfo.tsx"),x=n("./public/app/core/selectors/navModel.ts"),P=n("./public/app/features/folders/state/actions.ts"),b=n("./public/app/features/folders/state/navModel.ts"),f=n("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function g(e,s,n){return s in e?Object.defineProperty(e,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[s]=n,e}const v={getFolderByUid:P.Pb,getFolderPermissions:P.a,updateFolderPermission:P.v7,removeFolderPermission:P.Uk,addFolderPermission:P.pz},j=(0,a.connect)(((e,s)=>{const n=s.match.params.uid;return{navModel:(0,x.h)(e.navIndex,`folder-permissions-${n}`,(0,b._)(1)),folderUid:n,folder:e.folder}}),v);class F extends d.PureComponent{constructor(e){super(e),g(this,"onOpenAddPermissions",(()=>{this.setState({isAdding:!0})})),g(this,"onRemoveItem",(e=>{this.props.removeFolderPermission(e)})),g(this,"onPermissionChanged",((e,s)=>{this.props.updateFolderPermission(e,s)})),g(this,"onAddPermission",(e=>this.props.addFolderPermission(e))),g(this,"onCancelAddPermission",(()=>{this.setState({isAdding:!1})})),this.state={isAdding:!1}}componentDidMount(){this.props.getFolderByUid(this.props.folderUid),this.props.getFolderPermissions(this.props.folderUid)}render(){const{navModel:e,folder:s}=this.props,{isAdding:n}=this.state;if(0===s.id)return(0,f.jsx)(l.Z,{navModel:e,children:o||(o=(0,f.jsx)(l.Z.Contents,{isLoading:!0,children:(0,f.jsx)("span",{})}))});const d={title:s.title,url:s.url,id:s.id};return(0,f.jsx)(l.Z,{navModel:e,children:(0,f.jsxs)(l.Z.Contents,{children:[(0,f.jsxs)("div",{className:"page-action-bar",children:[i||(i=(0,f.jsx)("h3",{className:"page-sub-heading",children:"Folder Permissions"})),r||(r=(0,f.jsx)(c.Tooltip,{placement:"auto",content:(0,f.jsx)(h.Z,{}),children:(0,f.jsx)(c.Icon,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})})),t||(t=(0,f.jsx)("div",{className:"page-action-bar__spacer"})),(0,f.jsx)(c.Button,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:n,children:"Add Permission"})]}),(0,f.jsx)(p.s,{in:n,children:(0,f.jsx)(m.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})}),(0,f.jsx)(u.Z,{items:s.permissions,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:d})]})})}}const _=j(F)}}]);
//# sourceMappingURL=FolderPermissions.b208037f6b1954dc031d.js.map