{"version":3,"file":"5303.a87fd0ce1ff28bec28a3.js","mappings":"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","sources":["webpack://grafana/./packages/grafana-data/src/datetime/parser.ts","webpack://grafana/./packages/grafana-data/src/events/eventFactory.ts","webpack://grafana/./packages/grafana-data/src/events/types.ts","webpack://grafana/./packages/grafana-data/src/field/FieldConfigOptionsRegistry.tsx","webpack://grafana/./packages/grafana-data/src/field/fieldComparers.ts","webpack://grafana/./packages/grafana-data/src/field/fieldState.ts","webpack://grafana/./packages/grafana-data/src/text/sanitize.ts","webpack://grafana/./packages/grafana-data/src/themes/createComponents.ts","webpack://grafana/./packages/grafana-data/src/themes/createV1Theme.ts","webpack://grafana/./packages/grafana-data/src/themes/createTheme.ts","webpack://grafana/./packages/grafana-data/src/themes/palette.ts","webpack://grafana/./packages/grafana-data/src/transformations/fieldReducer.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/fieldTypeMatcher.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/ids.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/predicates.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/refIdMatcher.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/simpleFieldMatcher.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/valueMatchers/equalMatchers.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/valueMatchers/nullMatchers.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/valueMatchers/numericMatchers.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/valueMatchers/rangeMatchers.ts","webpack://grafana/./packages/grafana-data/src/transformations/matchers/valueMatchers/regexMatchers.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/ensureColumns.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/filter.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/filterByName.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/filterByRefId.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/ids.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/merge.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/noop.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/organize.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/rename.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/seriesToColumns.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/seriesToRows.ts","webpack://grafana/./packages/grafana-data/src/transformations/transformers/sortBy.ts","webpack://grafana/./packages/grafana-data/src/types/dataFrame.ts","webpack://grafana/./packages/grafana-data/src/types/fieldColor.ts","webpack://grafana/./packages/grafana-data/src/types/theme.ts","webpack://grafana/./packages/grafana-data/src/types/thresholds.ts","webpack://grafana/./packages/grafana-data/src/types/valueMapping.ts","webpack://grafana/./packages/grafana-data/src/utils/Registry.ts","webpack://grafana/./packages/grafana-data/src/utils/anyToNumber.ts","webpack://grafana/./packages/grafana-data/src/utils/binaryOperators.ts","webpack://grafana/./packages/grafana-data/src/utils/fieldParser.ts","webpack://grafana/./packages/grafana-data/src/utils/makeClassES5Compatible.ts","webpack://grafana/./packages/grafana-data/src/valueFormats/arithmeticFormatters.ts","webpack://grafana/./packages/grafana-data/src/valueFormats/categories.ts","webpack://grafana/./packages/grafana-data/src/valueFormats/dateTimeFormatters.ts","webpack://grafana/./packages/grafana-data/src/valueFormats/symbolFormatters.ts","webpack://grafana/./packages/grafana-data/src/vector/ArrayVector.ts","webpack://grafana/./packages/grafana-data/src/vector/AsNumberVector.ts","webpack://grafana/./packages/grafana-data/src/vector/BinaryOperationVector.ts","webpack://grafana/./packages/grafana-data/src/vector/ConstantVector.ts","webpack://grafana/./packages/grafana-data/src/vector/RowVector.ts","webpack://grafana/./packages/grafana-data/src/vector/SortedVector.ts","webpack://grafana/./packages/grafana-data/src/vector/vectorToArray.ts","webpack://grafana/./packages/grafana-runtime/src/utils/toDataQueryError.ts","webpack://grafana/./public/app/features/live/centrifuge/LiveDataStream.ts","webpack://grafana/./public/app/features/live/centrifuge/channel.ts","webpack://grafana/./public/app/features/live/centrifuge/service.ts","webpack://grafana/./public/app/features/live/centrifuge/transferHandlers.ts","webpack://grafana/./public/app/plugins/datasource/prometheus/legend.ts"],"sourcesContent":["/* eslint-disable id-blacklist, no-restricted-imports, @typescript-eslint/ban-types */\nimport { lowerCase } from 'lodash';\nimport moment, { MomentInput } from 'moment-timezone';\n\nimport { DateTimeOptions, getTimeZone } from './common';\nimport { parse, isValid } from './datemath';\nimport { systemDateFormats } from './formats';\nimport { DateTimeInput, DateTime, isDateTime } from './moment_wrapper';\n\n/**\n * The type that describes options that can be passed when parsing a date and time value.\n * @public\n */\nexport interface DateTimeOptionsWhenParsing extends DateTimeOptions {\n  /**\n   * If the input is a Grafana quick date, e.g. now-6h, then you can specify this to control\n   * whether the last part of the date and time value is included or excluded.\n   *\n   * Example: now-6h and the current time is 12:20:00 if roundUp is set to true\n   * the returned DateTime value will be 06:00:00.\n   */\n  roundUp?: boolean;\n  fiscalYearStartMonth?: number;\n}\n\ntype DateTimeParser<T extends DateTimeOptions = DateTimeOptions> = (value: DateTimeInput, options?: T) => DateTime;\n\n/**\n * Helper function to parse a number, text or Date to a DateTime value. If a timeZone is supplied the incoming value\n * is parsed with that timeZone as a base. The only exception to this is if the passed value is in a UTC-based\n * format. Then it will use UTC as the base. If no format is specified the current system format will be assumed.\n *\n * It can also parse the Grafana quick date and time format, e.g. now-6h will be parsed as Date.now() - 6 hours and\n * returned as a valid DateTime value.\n *\n * If no options are supplied, then default values are used. For more details please see {@link DateTimeOptions}.\n *\n * @param value - should be a parsable date and time value\n * @param options\n *\n * @public\n */\nexport const dateTimeParse: DateTimeParser<DateTimeOptionsWhenParsing> = (value, options?): DateTime => {\n  if (isDateTime(value)) {\n    return value;\n  }\n\n  if (typeof value === 'string') {\n    return parseString(value, options);\n  }\n\n  return parseOthers(value, options);\n};\n\nconst parseString = (value: string, options?: DateTimeOptionsWhenParsing): DateTime => {\n  if (value.indexOf('now') !== -1) {\n    if (!isValid(value)) {\n      return moment() as DateTime;\n    }\n\n    const parsed = parse(value, options?.roundUp, options?.timeZone, options?.fiscalYearStartMonth);\n    return parsed || (moment() as DateTime);\n  }\n\n  const timeZone = getTimeZone(options);\n  const zone = moment.tz.zone(timeZone);\n  const format = options?.format ?? systemDateFormats.fullDate;\n\n  if (zone && zone.name) {\n    return moment.tz(value, format, zone.name) as DateTime;\n  }\n\n  switch (lowerCase(timeZone)) {\n    case 'utc':\n      return moment.utc(value, format) as DateTime;\n    default:\n      return moment(value, format) as DateTime;\n  }\n};\n\nconst parseOthers = (value: DateTimeInput, options?: DateTimeOptionsWhenParsing): DateTime => {\n  const date = value as MomentInput;\n  const timeZone = getTimeZone(options);\n  const zone = moment.tz.zone(timeZone);\n\n  if (zone && zone.name) {\n    return moment.tz(date, zone.name) as DateTime;\n  }\n\n  switch (lowerCase(timeZone)) {\n    case 'utc':\n      return moment.utc(date) as DateTime;\n    default:\n      return moment(date) as DateTime;\n  }\n};\n","import { AppEvent } from './types';\n\nconst typeList: Set<string> = new Set();\n\nexport function eventFactory<T = undefined>(name: string): AppEvent<T> {\n  if (typeList.has(name)) {\n    throw new Error(`There is already an event defined with type '${name}'`);\n  }\n\n  typeList.add(name);\n  return { name };\n}\n","import { Unsubscribable, Observable } from 'rxjs';\n\n/**\n * @alpha\n * internal interface\n */\nexport interface BusEvent {\n  readonly type: string;\n  readonly payload?: any;\n  readonly origin?: EventBus;\n}\n\n/**\n * @alpha\n * Base event type\n */\nexport abstract class BusEventBase implements BusEvent {\n  readonly type: string;\n  readonly payload?: any;\n  readonly origin?: EventBus;\n\n  constructor() {\n    //@ts-ignore\n    this.type = this.__proto__.constructor.type;\n  }\n}\n\n/**\n * @alpha\n * Base event type with payload\n */\nexport abstract class BusEventWithPayload<T> extends BusEventBase {\n  readonly payload: T;\n\n  constructor(payload: T) {\n    super();\n    this.payload = payload;\n  }\n}\n\n/*\n * Interface for an event type constructor\n */\nexport interface BusEventType<T extends BusEvent> {\n  type: string;\n  new (...args: any[]): T;\n}\n\n/**\n * @alpha\n * Event callback/handler type\n */\nexport interface BusEventHandler<T extends BusEvent> {\n  (event: T): void;\n}\n\n/**\n * @alpha\n * Main minimal interface\n */\nexport interface EventFilterOptions {\n  onlyLocal: boolean;\n}\n\n/**\n * @alpha\n * Main minimal interface\n */\nexport interface EventBus {\n  /**\n   * Publish single vent\n   */\n  publish<T extends BusEvent>(event: T): void;\n\n  /**\n   * Get observable of events\n   */\n  getStream<T extends BusEvent>(eventType: BusEventType<T>): Observable<T>;\n\n  /**\n   * Subscribe to an event stream\n   *\n   * This function is a wrapper around the `getStream(...)` function\n   */\n  subscribe<T extends BusEvent>(eventType: BusEventType<T>, handler: BusEventHandler<T>): Unsubscribable;\n\n  /**\n   * Remove all event subscriptions\n   */\n  removeAllListeners(): void;\n\n  /**\n   * Returns a new bus scoped that knows where it exists in a heiarchy\n   *\n   * @internal -- This is included for internal use only should not be used directly\n   */\n  newScopedBus(key: string, filter: EventFilterOptions): EventBus;\n}\n\n/**\n * @public\n * @deprecated event type\n */\nexport interface AppEvent<T> {\n  readonly name: string;\n  payload?: T;\n}\n\n/** @public */\nexport interface LegacyEmitter {\n  /**\n   * @deprecated use $emit\n   */\n  emit<T>(event: AppEvent<T> | string, payload?: T): void;\n\n  /**\n   * @deprecated use $on\n   */\n  on<T>(event: AppEvent<T> | string, handler: LegacyEventHandler<T>, scope?: any): void;\n\n  /**\n   * @deprecated use $on\n   */\n  off<T>(event: AppEvent<T> | string, handler: (payload?: T | any) => void): void;\n}\n\n/** @public */\nexport interface LegacyEventHandler<T> {\n  (payload: T): void;\n  wrapper?: (event: BusEvent) => void;\n}\n\n/** @alpha */\nexport interface EventBusExtended extends EventBus, LegacyEmitter {}\n","import { FieldConfigPropertyItem } from '../types/fieldOverrides';\nimport { Registry } from '../utils/Registry';\n\nexport class FieldConfigOptionsRegistry extends Registry<FieldConfigPropertyItem> {}\n","import { isNumber } from 'lodash';\n\nimport { dateTime } from '../datetime';\nimport { Field, FieldType } from '../types/dataFrame';\nimport { Vector } from '../types/vector';\n\ntype IndexComparer = (a: number, b: number) => number;\n\n/** @public */\nexport const fieldIndexComparer = (field: Field, reverse = false): IndexComparer => {\n  const values = field.values;\n\n  switch (field.type) {\n    case FieldType.number:\n      return numericIndexComparer(values, reverse);\n    case FieldType.string:\n      return stringIndexComparer(values, reverse);\n    case FieldType.boolean:\n      return booleanIndexComparer(values, reverse);\n    case FieldType.time:\n      return timeIndexComparer(values, reverse);\n    default:\n      return naturalIndexComparer(reverse);\n  }\n};\n\n/** @public */\nexport const timeComparer = (a: any, b: any): number => {\n  if (!a || !b) {\n    return falsyComparer(a, b);\n  }\n\n  if (isNumber(a) && isNumber(b)) {\n    return numericComparer(a, b);\n  }\n\n  if (dateTime(a).isBefore(b)) {\n    return -1;\n  }\n\n  if (dateTime(b).isBefore(a)) {\n    return 1;\n  }\n\n  return 0;\n};\n\n/** @public */\nexport const numericComparer = (a: number, b: number): number => {\n  return a - b;\n};\n\n/** @public */\nexport const stringComparer = (a: string, b: string): number => {\n  if (!a || !b) {\n    return falsyComparer(a, b);\n  }\n  return a.localeCompare(b);\n};\n\nexport const booleanComparer = (a: boolean, b: boolean): number => {\n  return falsyComparer(a, b);\n};\n\nconst falsyComparer = (a: any, b: any): number => {\n  if (!a && b) {\n    return 1;\n  }\n\n  if (a && !b) {\n    return -1;\n  }\n\n  return 0;\n};\n\nconst timeIndexComparer = (values: Vector<any>, reverse: boolean): IndexComparer => {\n  return (a: number, b: number): number => {\n    const vA = values.get(a);\n    const vB = values.get(b);\n    return reverse ? timeComparer(vB, vA) : timeComparer(vA, vB);\n  };\n};\n\nconst booleanIndexComparer = (values: Vector<any>, reverse: boolean): IndexComparer => {\n  return (a: number, b: number): number => {\n    const vA: boolean = values.get(a);\n    const vB: boolean = values.get(b);\n    return reverse ? booleanComparer(vB, vA) : booleanComparer(vA, vB);\n  };\n};\n\nconst numericIndexComparer = (values: Vector<any>, reverse: boolean): IndexComparer => {\n  return (a: number, b: number): number => {\n    const vA: number = values.get(a);\n    const vB: number = values.get(b);\n    return reverse ? numericComparer(vB, vA) : numericComparer(vA, vB);\n  };\n};\n\nconst stringIndexComparer = (values: Vector<any>, reverse: boolean): IndexComparer => {\n  return (a: number, b: number): number => {\n    const vA: string = values.get(a);\n    const vB: string = values.get(b);\n    return reverse ? stringComparer(vB, vA) : stringComparer(vA, vB);\n  };\n};\n\nconst naturalIndexComparer = (reverse: boolean): IndexComparer => {\n  return (a: number, b: number): number => {\n    return reverse ? numericComparer(b, a) : numericComparer(a, b);\n  };\n};\n","import { DataFrame, Field, TIME_SERIES_VALUE_FIELD_NAME, FieldType, TIME_SERIES_TIME_FIELD_NAME } from '../types';\nimport { formatLabels } from '../utils/labels';\n\n/**\n * Get an appropriate display title\n */\nexport function getFrameDisplayName(frame: DataFrame, index?: number) {\n  if (frame.name) {\n    return frame.name;\n  }\n\n  // Single field with tags\n  const valuesWithLabels: Field[] = [];\n  for (const field of frame.fields) {\n    if (field.labels && Object.keys(field.labels).length > 0) {\n      valuesWithLabels.push(field);\n    }\n  }\n\n  if (valuesWithLabels.length === 1) {\n    return formatLabels(valuesWithLabels[0].labels!);\n  }\n\n  // list all the\n  if (index === undefined) {\n    return frame.fields\n      .filter((f) => f.type !== FieldType.time)\n      .map((f) => getFieldDisplayName(f, frame))\n      .join(', ');\n  }\n\n  if (frame.refId) {\n    return `Series (${frame.refId})`;\n  }\n\n  return `Series (${index})`;\n}\n\nexport function getFieldDisplayName(field: Field, frame?: DataFrame, allFrames?: DataFrame[]): string {\n  const existingTitle = field.state?.displayName;\n  const multipleFrames = Boolean(allFrames && allFrames.length > 1);\n\n  if (existingTitle && multipleFrames === field.state?.multipleFrames) {\n    return existingTitle;\n  }\n\n  const displayName = calculateFieldDisplayName(field, frame, allFrames);\n  field.state = field.state || {};\n  field.state.displayName = displayName;\n  field.state.multipleFrames = multipleFrames;\n\n  return displayName;\n}\n\n/**\n * Get an appropriate display name. If the 'displayName' field config is set, use that.\n */\nfunction calculateFieldDisplayName(field: Field, frame?: DataFrame, allFrames?: DataFrame[]): string {\n  const hasConfigTitle = field.config?.displayName && field.config?.displayName.length;\n\n  let displayName = hasConfigTitle ? field.config!.displayName! : field.name;\n\n  if (hasConfigTitle) {\n    return displayName;\n  }\n\n  if (frame && field.config?.displayNameFromDS) {\n    return field.config.displayNameFromDS;\n  }\n\n  // This is an ugly exception for time field\n  // For time series we should normally treat time field with same name\n  // But in case it has a join source we should handle it as normal field\n  if (field.type === FieldType.time && !field.labels) {\n    return displayName ?? TIME_SERIES_TIME_FIELD_NAME;\n  }\n\n  let parts: string[] = [];\n  let frameNamesDiffer = false;\n\n  if (allFrames && allFrames.length > 1) {\n    for (let i = 1; i < allFrames.length; i++) {\n      const frame = allFrames[i];\n      if (frame.name !== allFrames[i - 1].name) {\n        frameNamesDiffer = true;\n        break;\n      }\n    }\n  }\n\n  let frameNameAdded = false;\n  let labelsAdded = false;\n\n  if (frameNamesDiffer && frame?.name) {\n    parts.push(frame.name);\n    frameNameAdded = true;\n  }\n\n  if (field.name && field.name !== TIME_SERIES_VALUE_FIELD_NAME) {\n    parts.push(field.name);\n  }\n\n  if (field.labels && frame) {\n    let singleLabelName = getSingleLabelName(allFrames ?? [frame]);\n\n    if (!singleLabelName) {\n      let allLabels = formatLabels(field.labels);\n      if (allLabels) {\n        parts.push(allLabels);\n        labelsAdded = true;\n      }\n    } else if (field.labels[singleLabelName]) {\n      parts.push(field.labels[singleLabelName]);\n      labelsAdded = true;\n    }\n  }\n\n  // if we have not added frame name and no labels, and field name = Value, we should add frame name\n  if (frame && !frameNameAdded && !labelsAdded && field.name === TIME_SERIES_VALUE_FIELD_NAME) {\n    if (frame.name && frame.name.length > 0) {\n      parts.push(frame.name);\n      frameNameAdded = true;\n    }\n  }\n\n  if (parts.length) {\n    displayName = parts.join(' ');\n  } else if (field.name) {\n    displayName = field.name;\n  } else {\n    displayName = TIME_SERIES_VALUE_FIELD_NAME;\n  }\n\n  // Ensure unique field name\n  if (displayName === field.name) {\n    displayName = getUniqueFieldName(field, frame);\n  }\n\n  return displayName;\n}\n\nfunction getUniqueFieldName(field: Field, frame?: DataFrame) {\n  let dupeCount = 0;\n  let foundSelf = false;\n\n  if (frame) {\n    for (let i = 0; i < frame.fields.length; i++) {\n      const otherField = frame.fields[i];\n\n      if (field === otherField) {\n        foundSelf = true;\n\n        if (dupeCount > 0) {\n          dupeCount++;\n          break;\n        }\n      } else if (field.name === otherField.name) {\n        dupeCount++;\n\n        if (foundSelf) {\n          break;\n        }\n      }\n    }\n  }\n\n  if (dupeCount) {\n    return `${field.name} ${dupeCount}`;\n  }\n\n  return field.name;\n}\n\n/**\n * Checks all data frames and return name of label if there is only one label name in all frames\n */\nfunction getSingleLabelName(frames: DataFrame[]): string | null {\n  let singleName: string | null = null;\n\n  for (let i = 0; i < frames.length; i++) {\n    const frame = frames[i];\n\n    for (const field of frame.fields) {\n      if (!field.labels) {\n        continue;\n      }\n\n      // yes this should be in!\n      for (const labelKey in field.labels) {\n        if (singleName === null) {\n          singleName = labelKey;\n        } else if (labelKey !== singleName) {\n          return null;\n        }\n      }\n    }\n  }\n\n  return singleName;\n}\n","import { sanitizeUrl as braintreeSanitizeUrl } from '@braintree/sanitize-url';\nimport * as xss from 'xss';\n\nconst XSSWL = Object.keys(xss.whiteList).reduce((acc, element) => {\n  acc[element] = xss.whiteList[element]?.concat(['class', 'style']);\n  return acc;\n}, {} as xss.IWhiteList);\n\nconst sanitizeXSS = new xss.FilterXSS({\n  whiteList: XSSWL,\n});\n\nconst sanitizeTextPanelWhitelist = new xss.FilterXSS({\n  whiteList: XSSWL,\n  css: {\n    whiteList: {\n      ...xss.getDefaultCSSWhiteList(),\n      'flex-direction': true,\n      'flex-wrap': true,\n      'flex-basis': true,\n      'flex-grow': true,\n      'flex-shrink': true,\n      'flex-flow': true,\n      gap: true,\n      order: true,\n      'justify-content': true,\n      'justify-items': true,\n      'justify-self': true,\n      'align-items': true,\n      'align-content': true,\n      'align-self': true,\n    },\n  },\n});\n\n/**\n * Returns string safe from XSS attacks.\n *\n * Even though we allow the style-attribute, there's still default filtering applied to it\n * Info: https://github.com/leizongmin/js-xss#customize-css-filter\n * Whitelist: https://github.com/leizongmin/js-css-filter/blob/master/lib/default.js\n */\nexport function sanitize(unsanitizedString: string): string {\n  try {\n    return sanitizeXSS.process(unsanitizedString);\n  } catch (error) {\n    console.error('String could not be sanitized', unsanitizedString);\n    return unsanitizedString;\n  }\n}\n\nexport function sanitizeTextPanelContent(unsanitizedString: string): string {\n  try {\n    return sanitizeTextPanelWhitelist.process(unsanitizedString);\n  } catch (error) {\n    console.error('String could not be sanitized', unsanitizedString);\n    return 'Text string could not be sanitized';\n  }\n}\n\nexport function sanitizeUrl(url: string): string {\n  return braintreeSanitizeUrl(url);\n}\n\nexport function hasAnsiCodes(input: string): boolean {\n  return /\\u001b\\[\\d{1,2}m/.test(input);\n}\n\nexport function escapeHtml(str: string): string {\n  return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\n","import { ThemeColors } from './createColors';\nimport { ThemeShadows } from './createShadows';\n\n/** @beta */\nexport interface ThemeComponents {\n  /** Applies to normal buttons, inputs, radio buttons, etc */\n  height: {\n    sm: number;\n    md: number;\n    lg: number;\n  };\n  input: {\n    background: string;\n    borderColor: string;\n    borderHover: string;\n    text: string;\n  };\n  tooltip: {\n    text: string;\n    background: string;\n  };\n  panel: {\n    padding: number;\n    headerHeight: number;\n    borderColor: string;\n    boxShadow: string;\n    background: string;\n  };\n  dropdown: {\n    background: string;\n  };\n  overlay: {\n    background: string;\n  };\n  dashboard: {\n    background: string;\n    padding: number;\n  };\n  sidemenu: {\n    width: number;\n  };\n}\n\nexport function createComponents(colors: ThemeColors, shadows: ThemeShadows): ThemeComponents {\n  const panel = {\n    padding: 1,\n    headerHeight: 4,\n    background: colors.background.primary,\n    borderColor: colors.border.weak,\n    boxShadow: 'none',\n  };\n\n  const input = {\n    borderColor: colors.border.medium,\n    borderHover: colors.border.strong,\n    text: colors.text.primary,\n    background: colors.mode === 'dark' ? colors.background.canvas : colors.background.primary,\n  };\n\n  return {\n    height: {\n      sm: 3,\n      md: 4,\n      lg: 6,\n    },\n    input,\n    panel,\n    dropdown: {\n      background: input.background,\n    },\n    tooltip: {\n      background: colors.mode === 'light' ? '#555' : '#35383e',\n      text: colors.mode === 'light' ? '#FFF' : colors.text.primary,\n    },\n    dashboard: {\n      background: colors.background.canvas,\n      padding: 1,\n    },\n    overlay: {\n      background: colors.mode === 'dark' ? 'rgba(63, 62, 62, 0.45)' : 'rgba(208, 209, 211, 0.24)',\n    },\n    sidemenu: {\n      width: 48,\n    },\n  };\n}\n","import { GrafanaTheme, GrafanaThemeCommons, GrafanaThemeType } from '../types';\n\nimport { GrafanaTheme2 } from './types';\n\nexport function createV1Theme(theme: Omit<GrafanaTheme2, 'v1'>): GrafanaTheme {\n  const oldCommon: GrafanaThemeCommons = {\n    name: 'Grafana Default',\n    typography: {\n      fontFamily: {\n        sansSerif: theme.typography.fontFamily,\n        monospace: theme.typography.fontFamilyMonospace,\n      },\n      size: {\n        base: `${theme.typography.fontSize}px`,\n        xs: theme.typography.size.xs,\n        sm: theme.typography.size.sm,\n        md: theme.typography.size.md,\n        lg: theme.typography.size.lg,\n      },\n      heading: {\n        h1: theme.typography.h1.fontSize,\n        h2: theme.typography.h2.fontSize,\n        h3: theme.typography.h3.fontSize,\n        h4: theme.typography.h4.fontSize,\n        h5: theme.typography.h5.fontSize,\n        h6: theme.typography.h6.fontSize,\n      },\n      weight: {\n        light: theme.typography.fontWeightLight,\n        regular: theme.typography.fontWeightRegular,\n        semibold: theme.typography.fontWeightMedium,\n        bold: theme.typography.fontWeightBold,\n      },\n      lineHeight: {\n        xs: theme.typography.bodySmall.lineHeight,\n        sm: theme.typography.bodySmall.lineHeight,\n        md: theme.typography.body.lineHeight,\n        lg: theme.typography.h2.lineHeight,\n      },\n      link: {\n        decoration: 'none',\n        hoverDecoration: 'none',\n      },\n    },\n    breakpoints: {\n      xs: `${theme.breakpoints.values.xs}px`,\n      sm: `${theme.breakpoints.values.sm}px`,\n      md: `${theme.breakpoints.values.md}px`,\n      lg: `${theme.breakpoints.values.lg}px`,\n      xl: `${theme.breakpoints.values.xl}px`,\n      xxl: `${theme.breakpoints.values.xxl}px`,\n    },\n    spacing: {\n      base: theme.spacing.gridSize,\n      insetSquishMd: theme.spacing(0.5, 1),\n      d: theme.spacing(2),\n      xxs: theme.spacing(0.25),\n      xs: theme.spacing(0.5),\n      sm: theme.spacing(1),\n      md: theme.spacing(2),\n      lg: theme.spacing(3),\n      xl: theme.spacing(4),\n      gutter: theme.spacing(4),\n\n      // Next-gen forms spacing variables\n      // TODO: Move variables definition to respective components when implementing\n      formSpacingBase: theme.spacing.gridSize,\n      formMargin: `${theme.spacing.gridSize * 4}px`,\n      formFieldsetMargin: `${theme.spacing.gridSize * 2}px`,\n      formInputHeight: theme.spacing.gridSize * 4,\n      formButtonHeight: theme.spacing.gridSize * 4,\n      formInputPaddingHorizontal: `${theme.spacing.gridSize}px`,\n\n      // Used for icons do define spacing between icon and input field\n      // Applied on the right(prefix) or left(suffix)\n      formInputAffixPaddingHorizontal: `${theme.spacing.gridSize / 2}px`,\n\n      formInputMargin: `${theme.spacing.gridSize * 2}px`,\n      formLabelPadding: '0 0 0 2px',\n      formLabelMargin: `0 0 ${theme.spacing.gridSize / 2 + 'px'} 0`,\n      formValidationMessagePadding: '4px 8px',\n      formValidationMessageMargin: '4px 0 0 0',\n      inlineFormMargin: '4px',\n    },\n    border: {\n      radius: {\n        sm: theme.shape.borderRadius(1),\n        md: theme.shape.borderRadius(2),\n        lg: theme.shape.borderRadius(3),\n      },\n      width: {\n        sm: '1px',\n      },\n    },\n    height: {\n      sm: theme.spacing.gridSize * theme.components.height.sm,\n      md: theme.spacing.gridSize * theme.components.height.md,\n      lg: theme.spacing.gridSize * theme.components.height.lg,\n    },\n    panelPadding: theme.components.panel.padding * theme.spacing.gridSize,\n    panelHeaderHeight: theme.spacing.gridSize * theme.components.panel.headerHeight,\n    zIndex: theme.zIndex,\n  };\n\n  const basicColors = {\n    ...commonColorsPalette,\n    black: '#000000',\n    white: '#ffffff',\n    dark1: '#141414',\n    dark2: '#161719',\n    dark3: '#1f1f20',\n    dark4: '#212124',\n    dark5: '#222426',\n    dark6: '#262628',\n    dark7: '#292a2d',\n    dark8: '#2f2f32',\n    dark9: '#343436',\n    dark10: '#424345',\n    gray1: '#555555',\n    gray2: '#8e8e8e',\n    gray3: '#b3b3b3',\n    gray4: '#d8d9da',\n    gray5: '#ececec',\n    gray6: '#f4f5f8', // not used in dark theme\n    gray7: '#fbfbfb', // not used in dark theme\n    redBase: '#e02f44',\n    redShade: '#c4162a',\n    greenBase: '#299c46',\n    greenShade: '#23843b',\n    red: '#d44a3a',\n    yellow: '#ecbb13',\n    purple: '#9933cc',\n    variable: '#32d1df',\n    orange: '#eb7b18',\n    orangeDark: '#ff780a',\n  };\n\n  const backgrounds = {\n    bg1: theme.colors.background.primary,\n    bg2: theme.colors.background.secondary,\n    bg3: theme.colors.action.hover,\n    dashboardBg: theme.colors.background.canvas,\n    bgBlue1: theme.colors.primary.main,\n    bgBlue2: theme.colors.primary.shade,\n  };\n\n  const borders = {\n    border1: theme.colors.border.weak,\n    border2: theme.colors.border.medium,\n    border3: theme.colors.border.strong,\n  };\n\n  const textColors = {\n    textStrong: theme.colors.text.maxContrast,\n    textHeading: theme.colors.text.primary,\n    text: theme.colors.text.primary,\n    textSemiWeak: theme.colors.text.secondary,\n    textWeak: theme.colors.text.secondary,\n    textFaint: theme.colors.text.disabled,\n    textBlue: theme.colors.primary.text,\n  };\n\n  const form = {\n    // Next-gen forms functional colors\n    formLabel: theme.colors.text.primary,\n    formDescription: theme.colors.text.secondary,\n    formInputBg: theme.components.input.background,\n    formInputBgDisabled: theme.colors.action.disabledBackground,\n    formInputBorder: theme.components.input.borderColor,\n    formInputBorderHover: theme.components.input.borderHover,\n    formInputBorderActive: theme.colors.primary.border,\n    formInputBorderInvalid: theme.colors.error.border,\n    formInputPlaceholderText: theme.colors.text.disabled,\n    formInputText: theme.components.input.text,\n    formInputDisabledText: theme.colors.action.disabledText,\n    formFocusOutline: theme.colors.primary.main,\n    formValidationMessageText: theme.colors.error.contrastText,\n    formValidationMessageBg: theme.colors.error.main,\n  };\n\n  return {\n    ...oldCommon,\n    type: theme.colors.mode === 'dark' ? GrafanaThemeType.Dark : GrafanaThemeType.Light,\n    isDark: theme.isDark,\n    isLight: theme.isLight,\n    name: theme.name,\n    palette: {\n      ...basicColors,\n      brandPrimary: basicColors.orange,\n      brandSuccess: theme.colors.success.main,\n      brandWarning: theme.colors.warning.main,\n      brandDanger: theme.colors.error.main,\n      queryRed: theme.colors.error.text,\n      queryGreen: theme.colors.success.text,\n      queryPurple: '#fe85fc',\n      queryOrange: basicColors.orange,\n      online: theme.colors.success.main,\n      warn: theme.colors.success.main,\n      critical: theme.colors.success.main,\n    },\n    colors: {\n      ...backgrounds,\n      ...borders,\n      ...form,\n      ...textColors,\n\n      bodyBg: theme.colors.background.canvas,\n      panelBg: theme.components.panel.background,\n      panelBorder: theme.components.panel.borderColor,\n      pageHeaderBg: theme.colors.background.canvas,\n      pageHeaderBorder: theme.colors.background.canvas,\n\n      dropdownBg: form.formInputBg,\n      dropdownShadow: basicColors.black,\n      dropdownOptionHoverBg: backgrounds.bg2,\n\n      link: theme.colors.text.primary,\n      linkDisabled: theme.colors.text.disabled,\n      linkHover: theme.colors.text.maxContrast,\n      linkExternal: theme.colors.text.link,\n    },\n    shadows: {\n      listItem: 'none',\n    },\n    visualization: theme.visualization,\n  };\n}\n\nconst commonColorsPalette = {\n  // New greys palette used by next-gen form elements\n  gray98: '#f7f8fa',\n  gray97: '#f1f5f9',\n  gray95: '#e9edf2',\n  gray90: '#dce1e6',\n  gray85: '#c7d0d9',\n  gray70: '#9fa7b3',\n  gray60: '#7b8087',\n  gray33: '#464c54',\n  gray25: '#2c3235',\n  gray15: '#202226',\n  gray10: '#141619',\n  gray05: '#0b0c0e',\n\n  // New blues palette used by next-gen form elements\n  blue95: '#5794f2', // blue95\n  blue85: '#33a2e5', // blueText\n  blue80: '#3274d9', // blue80\n  blue77: '#1f60c4', // blue77\n\n  // New reds palette used by next-gen form elements\n  red88: '#e02f44',\n};\n","import { createBreakpoints } from './breakpoints';\nimport { createColors, ThemeColorsInput } from './createColors';\nimport { createComponents } from './createComponents';\nimport { createShadows } from './createShadows';\nimport { createShape, ThemeShapeInput } from './createShape';\nimport { createSpacing, ThemeSpacingOptions } from './createSpacing';\nimport { createTransitions } from './createTransitions';\nimport { createTypography, ThemeTypographyInput } from './createTypography';\nimport { createV1Theme } from './createV1Theme';\nimport { createVisualizationColors } from './createVisualizationColors';\nimport { GrafanaTheme2 } from './types';\nimport { zIndex } from './zIndex';\n\n/** @internal */\nexport interface NewThemeOptions {\n  name?: string;\n  colors?: ThemeColorsInput;\n  spacing?: ThemeSpacingOptions;\n  shape?: ThemeShapeInput;\n  typography?: ThemeTypographyInput;\n}\n\n/** @internal */\nexport function createTheme(options: NewThemeOptions = {}): GrafanaTheme2 {\n  const {\n    name = 'Dark',\n    colors: colorsInput = {},\n    spacing: spacingInput = {},\n    shape: shapeInput = {},\n    typography: typographyInput = {},\n  } = options;\n\n  const colors = createColors(colorsInput);\n  const breakpoints = createBreakpoints();\n  const spacing = createSpacing(spacingInput);\n  const shape = createShape(shapeInput);\n  const typography = createTypography(colors, typographyInput);\n  const shadows = createShadows(colors);\n  const transitions = createTransitions();\n  const components = createComponents(colors, shadows);\n  const visualization = createVisualizationColors(colors);\n\n  const theme = {\n    name,\n    isDark: colors.mode === 'dark',\n    isLight: colors.mode === 'light',\n    colors,\n    breakpoints,\n    spacing,\n    shape,\n    components,\n    typography,\n    shadows,\n    transitions,\n    visualization,\n    zIndex: {\n      ...zIndex,\n    },\n  };\n\n  return {\n    ...theme,\n    v1: createV1Theme(theme),\n  };\n}\n","export const palette = {\n  white: '#FFFFFF',\n  black: '#000000',\n\n  gray25: '#015d71',\n  gray15: '#014b63', //'#202226',\n  gray10: '#023350', // old '#141619',\n  gray05: '#032242', // old '#0b0c0e',\n\n  // new from figma,\n  darkLayer0: '#18181A',\n  darkLayer1: '#212124',\n  darkLayer2: '#2a2a2f', // figma used #34343B but a bit too bright\n\n  darkBorder1: '#34343B',\n  darkBorder2: '#64646B',\n\n  // Dashboard bg / layer 0 (light theme)\n  gray90: '#F4F5F5',\n  // Card bg / layer 1\n  gray100: '#F4F5F5',\n  // divider line\n  gray80: '#D0D1D3',\n  // from figma\n  lightBorder1: '#E4E7E7',\n\n  blueDarkMain: '#3D71D9', // '#4165F5',\n  blueDarkText: '#6E9FFF', // '#58a6ff', //'#33a2e5', // '#5790FF',\n  redDarkMain: '#D10E5C',\n  redDarkText: '#FF5286',\n  greenDarkMain: '#1A7F4B',\n  greenDarkText: '#6CCF8E',\n  orangeDarkMain: '#F5B73D',\n  orangeDarkText: '#F8D06B',\n\n  blueLightMain: '#3871DC',\n  blueLightText: '#1F62E0',\n  redLightMain: '#E0226E',\n  redLightText: '#CF0E5B',\n  greenLightMain: '#1B855E',\n  greenLightText: '#0A764E',\n  orangeLightMain: '#FAD34A',\n  orangeLightText: '#8A6C00',\n};\n","// Libraries\nimport { isNumber } from 'lodash';\n\nimport { NullValueMode, Field, FieldState, FieldCalcs, FieldType } from '../types/index';\nimport { Registry, RegistryItem } from '../utils/Registry';\n\nexport enum ReducerID {\n  sum = 'sum',\n  max = 'max',\n  min = 'min',\n  logmin = 'logmin',\n  mean = 'mean',\n  last = 'last',\n  first = 'first',\n  count = 'count',\n  range = 'range',\n  diff = 'diff',\n  diffperc = 'diffperc',\n  delta = 'delta',\n  step = 'step',\n  firstNotNull = 'firstNotNull',\n  lastNotNull = 'lastNotNull',\n  changeCount = 'changeCount',\n  distinctCount = 'distinctCount',\n  allIsZero = 'allIsZero',\n  allIsNull = 'allIsNull',\n  allValues = 'allValues',\n}\n\n// Internal function\ntype FieldReducer = (field: Field, ignoreNulls: boolean, nullAsZero: boolean) => FieldCalcs;\n\nexport interface FieldReducerInfo extends RegistryItem {\n  // Internal details\n  emptyInputResult?: any; // typically null, but some things like 'count' & 'sum' should be zero\n  standard: boolean; // The most common stats can all be calculated in a single pass\n  reduce?: FieldReducer;\n}\n\ninterface ReduceFieldOptions {\n  field: Field;\n  reducers: string[]; // The stats to calculate\n}\n\n/**\n * @returns an object with a key for each selected stat\n * NOTE: This will also modify the 'field.state' object,\n * leaving values in a cache until cleared.\n */\nexport function reduceField(options: ReduceFieldOptions): FieldCalcs {\n  const { field, reducers } = options;\n\n  if (!field || !reducers || reducers.length < 1) {\n    return {};\n  }\n\n  if (field.state?.calcs) {\n    // Find the values we need to calculate\n    const missing: string[] = [];\n    for (const s of reducers) {\n      if (!field.state.calcs.hasOwnProperty(s)) {\n        missing.push(s);\n      }\n    }\n    if (missing.length < 1) {\n      return {\n        ...field.state.calcs,\n      };\n    }\n  }\n  if (!field.state) {\n    field.state = {} as FieldState;\n  }\n\n  const queue = fieldReducers.list(reducers);\n\n  // Return early for empty series\n  // This lets the concrete implementations assume at least one row\n  const data = field.values;\n  if (data.length < 1) {\n    const calcs = { ...field.state.calcs } as FieldCalcs;\n    for (const reducer of queue) {\n      calcs[reducer.id] = reducer.emptyInputResult !== null ? reducer.emptyInputResult : null;\n    }\n    return (field.state.calcs = calcs);\n  }\n\n  const { nullValueMode } = field.config;\n  const ignoreNulls = nullValueMode === NullValueMode.Ignore;\n  const nullAsZero = nullValueMode === NullValueMode.AsZero;\n\n  // Avoid calculating all the standard stats if possible\n  if (queue.length === 1 && queue[0].reduce) {\n    const values = queue[0].reduce(field, ignoreNulls, nullAsZero);\n    field.state.calcs = {\n      ...field.state.calcs,\n      ...values,\n    };\n    return values;\n  }\n\n  // For now everything can use the standard stats\n  let values = doStandardCalcs(field, ignoreNulls, nullAsZero);\n\n  for (const reducer of queue) {\n    if (!values.hasOwnProperty(reducer.id) && reducer.reduce) {\n      values = {\n        ...values,\n        ...reducer.reduce(field, ignoreNulls, nullAsZero),\n      };\n    }\n  }\n\n  field.state.calcs = {\n    ...field.state.calcs,\n    ...values,\n  };\n  return values;\n}\n\n// ------------------------------------------------------------------------------\n//\n//  No Exported symbols below here.\n//\n// ------------------------------------------------------------------------------\n\nexport const fieldReducers = new Registry<FieldReducerInfo>(() => [\n  {\n    id: ReducerID.lastNotNull,\n    name: 'Last *',\n    description: 'Last non-null value',\n    standard: true,\n    aliasIds: ['current'],\n    reduce: calculateLastNotNull,\n  },\n  {\n    id: ReducerID.last,\n    name: 'Last',\n    description: 'Last value',\n    standard: true,\n    reduce: calculateLast,\n  },\n  {\n    id: ReducerID.firstNotNull,\n    name: 'First *',\n    description: 'First non-null value',\n    standard: true,\n    reduce: calculateFirstNotNull,\n  },\n  { id: ReducerID.first, name: 'First', description: 'First Value', standard: true, reduce: calculateFirst },\n  { id: ReducerID.min, name: 'Min', description: 'Minimum Value', standard: true },\n  { id: ReducerID.max, name: 'Max', description: 'Maximum Value', standard: true },\n  { id: ReducerID.mean, name: 'Mean', description: 'Average Value', standard: true, aliasIds: ['avg'] },\n  {\n    id: ReducerID.sum,\n    name: 'Total',\n    description: 'The sum of all values',\n    emptyInputResult: 0,\n    standard: true,\n    aliasIds: ['total'],\n  },\n  {\n    id: ReducerID.count,\n    name: 'Count',\n    description: 'Number of values in response',\n    emptyInputResult: 0,\n    standard: true,\n  },\n  {\n    id: ReducerID.range,\n    name: 'Range',\n    description: 'Difference between minimum and maximum values',\n    standard: true,\n  },\n  {\n    id: ReducerID.delta,\n    name: 'Delta',\n    description: 'Cumulative change in value',\n    standard: true,\n  },\n  {\n    id: ReducerID.step,\n    name: 'Step',\n    description: 'Minimum interval between values',\n    standard: true,\n  },\n  {\n    id: ReducerID.diff,\n    name: 'Difference',\n    description: 'Difference between first and last values',\n    standard: true,\n  },\n  {\n    id: ReducerID.logmin,\n    name: 'Min (above zero)',\n    description: 'Used for log min scale',\n    standard: true,\n  },\n  {\n    id: ReducerID.allIsZero,\n    name: 'All Zeros',\n    description: 'All values are zero',\n    emptyInputResult: false,\n    standard: true,\n  },\n  {\n    id: ReducerID.allIsNull,\n    name: 'All Nulls',\n    description: 'All values are null',\n    emptyInputResult: true,\n    standard: true,\n  },\n  {\n    id: ReducerID.changeCount,\n    name: 'Change Count',\n    description: 'Number of times the value changes',\n    standard: false,\n    reduce: calculateChangeCount,\n  },\n  {\n    id: ReducerID.distinctCount,\n    name: 'Distinct Count',\n    description: 'Number of distinct values',\n    standard: false,\n    reduce: calculateDistinctCount,\n  },\n  {\n    id: ReducerID.diffperc,\n    name: 'Difference percent',\n    description: 'Percentage difference between first and last values',\n    standard: true,\n  },\n  {\n    id: ReducerID.allValues,\n    name: 'All values',\n    description: 'Returns an array with all values',\n    standard: false,\n    reduce: (field: Field) => ({ allValues: field.values.toArray() }),\n  },\n]);\n\nexport function doStandardCalcs(field: Field, ignoreNulls: boolean, nullAsZero: boolean): FieldCalcs {\n  const calcs = {\n    sum: 0,\n    max: -Number.MAX_VALUE,\n    min: Number.MAX_VALUE,\n    logmin: Number.MAX_VALUE,\n    mean: null,\n    last: null,\n    first: null,\n    lastNotNull: null,\n    firstNotNull: null,\n    count: 0,\n    nonNullCount: 0,\n    allIsNull: true,\n    allIsZero: true,\n    range: null,\n    diff: null,\n    delta: 0,\n    step: Number.MAX_VALUE,\n    diffperc: 0,\n\n    // Just used for calculations -- not exposed as a stat\n    previousDeltaUp: true,\n  } as FieldCalcs;\n\n  const data = field.values;\n  calcs.count = data.length;\n\n  const isNumberField = field.type === FieldType.number || FieldType.time;\n\n  for (let i = 0; i < data.length; i++) {\n    let currentValue = data.get(i);\n\n    if (i === 0) {\n      calcs.first = currentValue;\n    }\n\n    calcs.last = currentValue;\n\n    if (currentValue === null) {\n      if (ignoreNulls) {\n        continue;\n      }\n      if (nullAsZero) {\n        currentValue = 0;\n      }\n    }\n\n    if (currentValue != null) {\n      // null || undefined\n      const isFirst = calcs.firstNotNull === null;\n      if (isFirst) {\n        calcs.firstNotNull = currentValue;\n      }\n\n      if (isNumberField) {\n        calcs.sum += currentValue;\n        calcs.allIsNull = false;\n        calcs.nonNullCount++;\n\n        if (!isFirst) {\n          const step = currentValue - calcs.lastNotNull!;\n          if (calcs.step > step) {\n            calcs.step = step; // the minimum interval\n          }\n\n          if (calcs.lastNotNull! > currentValue) {\n            // counter reset\n            calcs.previousDeltaUp = false;\n            if (i === data.length - 1) {\n              // reset on last\n              calcs.delta += currentValue;\n            }\n          } else {\n            if (calcs.previousDeltaUp) {\n              calcs.delta += step; // normal increment\n            } else {\n              calcs.delta += currentValue; // account for counter reset\n            }\n            calcs.previousDeltaUp = true;\n          }\n        }\n\n        if (currentValue > calcs.max) {\n          calcs.max = currentValue;\n        }\n\n        if (currentValue < calcs.min) {\n          calcs.min = currentValue;\n        }\n\n        if (currentValue < calcs.logmin && currentValue > 0) {\n          calcs.logmin = currentValue;\n        }\n      }\n\n      if (currentValue !== 0) {\n        calcs.allIsZero = false;\n      }\n\n      calcs.lastNotNull = currentValue;\n    }\n  }\n\n  if (calcs.max === -Number.MAX_VALUE) {\n    calcs.max = null;\n  }\n\n  if (calcs.min === Number.MAX_VALUE) {\n    calcs.min = null;\n  }\n\n  if (calcs.step === Number.MAX_VALUE) {\n    calcs.step = null;\n  }\n\n  if (calcs.nonNullCount > 0) {\n    calcs.mean = calcs.sum! / calcs.nonNullCount;\n  }\n\n  if (calcs.allIsNull) {\n    calcs.allIsZero = false;\n  }\n\n  if (calcs.max !== null && calcs.min !== null) {\n    calcs.range = calcs.max - calcs.min;\n  }\n\n  if (isNumber(calcs.firstNotNull) && isNumber(calcs.lastNotNull)) {\n    calcs.diff = calcs.lastNotNull - calcs.firstNotNull;\n  }\n\n  if (isNumber(calcs.firstNotNull) && isNumber(calcs.diff)) {\n    calcs.diffperc = calcs.diff / calcs.firstNotNull;\n  }\n  return calcs;\n}\n\nfunction calculateFirst(field: Field, ignoreNulls: boolean, nullAsZero: boolean): FieldCalcs {\n  return { first: field.values.get(0) };\n}\n\nfunction calculateFirstNotNull(field: Field, ignoreNulls: boolean, nullAsZero: boolean): FieldCalcs {\n  const data = field.values;\n  for (let idx = 0; idx < data.length; idx++) {\n    const v = data.get(idx);\n    if (v != null && v !== undefined) {\n      return { firstNotNull: v };\n    }\n  }\n  return { firstNotNull: null };\n}\n\nfunction calculateLast(field: Field, ignoreNulls: boolean, nullAsZero: boolean): FieldCalcs {\n  const data = field.values;\n  return { last: data.get(data.length - 1) };\n}\n\nfunction calculateLastNotNull(field: Field, ignoreNulls: boolean, nullAsZero: boolean): FieldCalcs {\n  const data = field.values;\n  let idx = data.length - 1;\n  while (idx >= 0) {\n    const v = data.get(idx--);\n    if (v != null && v !== undefined) {\n      return { lastNotNull: v };\n    }\n  }\n  return { lastNotNull: null };\n}\n\nfunction calculateChangeCount(field: Field, ignoreNulls: boolean, nullAsZero: boolean): FieldCalcs {\n  const data = field.values;\n  let count = 0;\n  let first = true;\n  let last: any = null;\n  for (let i = 0; i < data.length; i++) {\n    let currentValue = data.get(i);\n    if (currentValue === null) {\n      if (ignoreNulls) {\n        continue;\n      }\n      if (nullAsZero) {\n        currentValue = 0;\n      }\n    }\n    if (!first && last !== currentValue) {\n      count++;\n    }\n    first = false;\n    last = currentValue;\n  }\n\n  return { changeCount: count };\n}\n\nfunction calculateDistinctCount(field: Field, ignoreNulls: boolean, nullAsZero: boolean): FieldCalcs {\n  const data = field.values;\n  const distinct = new Set<any>();\n  for (let i = 0; i < data.length; i++) {\n    let currentValue = data.get(i);\n    if (currentValue === null) {\n      if (ignoreNulls) {\n        continue;\n      }\n      if (nullAsZero) {\n        currentValue = 0;\n      }\n    }\n    distinct.add(currentValue);\n  }\n  return { distinctCount: distinct.size };\n}\n","import { Field, FieldType, DataFrame } from '../../types/dataFrame';\nimport { FieldMatcherInfo } from '../../types/transformations';\n\nimport { FieldMatcherID } from './ids';\n\n// General Field matcher\nconst fieldTypeMatcher: FieldMatcherInfo<FieldType> = {\n  id: FieldMatcherID.byType,\n  name: 'Field Type',\n  description: 'match based on the field type',\n  defaultOptions: FieldType.number,\n\n  get: (type: FieldType) => {\n    return (field: Field, frame: DataFrame, allFrames: DataFrame[]) => {\n      return type === field.type;\n    };\n  },\n\n  getOptionsDisplayText: (type: FieldType) => {\n    return `Field type: ${type}`;\n  },\n};\n\n// Numeric Field matcher\n// This gets its own entry so it shows up in the dropdown\nconst numericMatcher: FieldMatcherInfo = {\n  id: FieldMatcherID.numeric,\n  name: 'Numeric Fields',\n  description: 'Fields with type number',\n\n  get: () => {\n    return fieldTypeMatcher.get(FieldType.number);\n  },\n\n  getOptionsDisplayText: () => {\n    return 'Numeric Fields';\n  },\n};\n\n// Time Field matcher\nconst timeMatcher: FieldMatcherInfo = {\n  id: FieldMatcherID.time,\n  name: 'Time Fields',\n  description: 'Fields with type time',\n\n  get: () => {\n    return fieldTypeMatcher.get(FieldType.time);\n  },\n\n  getOptionsDisplayText: () => {\n    return 'Time Fields';\n  },\n};\n\n/**\n * Registry Initialization\n */\nexport function getFieldTypeMatchers(): FieldMatcherInfo[] {\n  return [fieldTypeMatcher, numericMatcher, timeMatcher];\n}\n","// This needs to be in its own file to avoid circular references\n\n// Builtin Predicates\n// not using 'any' and 'never' since they are reserved keywords\nexport enum MatcherID {\n  anyMatch = 'anyMatch', // checks children\n  allMatch = 'allMatch', // checks children\n  invertMatch = 'invertMatch', // checks child\n  alwaysMatch = 'alwaysMatch',\n  neverMatch = 'neverMatch',\n}\n\nexport enum FieldMatcherID {\n  // Specific Types\n  numeric = 'numeric',\n  time = 'time', // Can be multiple times\n  first = 'first',\n  firstTimeField = 'firstTimeField', // Only the first fime field\n\n  // With arguments\n  byType = 'byType',\n  byName = 'byName',\n  byNames = 'byNames',\n  byRegexp = 'byRegexp',\n  byRegexpOrNames = 'byRegexpOrNames',\n  byFrameRefID = 'byFrameRefID',\n  // byIndex = 'byIndex',\n  // byLabel = 'byLabel',\n}\n\n/**\n * Field name matchers\n */\nexport enum FrameMatcherID {\n  byName = 'byName',\n  byRefId = 'byRefId',\n  byIndex = 'byIndex',\n  byLabel = 'byLabel',\n}\n\n/**\n * @public\n */\nexport enum ValueMatcherID {\n  regex = 'regex',\n  isNull = 'isNull',\n  isNotNull = 'isNotNull',\n  greater = 'greater',\n  greaterOrEqual = 'greaterOrEqual',\n  lower = 'lower',\n  lowerOrEqual = 'lowerOrEqual',\n  equal = 'equal',\n  notEqual = 'notEqual',\n  between = 'between',\n}\n","import { Field, DataFrame, FieldType } from '../../types/dataFrame';\nimport { FieldMatcherInfo, MatcherConfig, FrameMatcherInfo } from '../../types/transformations';\nimport { getFieldMatcher, fieldMatchers, getFrameMatchers, frameMatchers } from '../matchers';\n\nimport { MatcherID } from './ids';\n\nconst anyFieldMatcher: FieldMatcherInfo<MatcherConfig[]> = {\n  id: MatcherID.anyMatch,\n  name: 'Any',\n  description: 'Any child matches (OR)',\n  excludeFromPicker: true,\n  defaultOptions: [], // empty array\n\n  get: (options: MatcherConfig[]) => {\n    const children = options.map((option) => {\n      return getFieldMatcher(option);\n    });\n    return (field: Field, frame: DataFrame, allFrames: DataFrame[]) => {\n      for (const child of children) {\n        if (child(field, frame, allFrames)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  },\n\n  getOptionsDisplayText: (options: MatcherConfig[]) => {\n    let text = '';\n    for (const sub of options) {\n      if (text.length > 0) {\n        text += ' OR ';\n      }\n      const matcher = fieldMatchers.get(sub.id);\n      text += matcher.getOptionsDisplayText ? matcher.getOptionsDisplayText(sub) : matcher.name;\n    }\n    return text;\n  },\n};\n\nconst anyFrameMatcher: FrameMatcherInfo<MatcherConfig[]> = {\n  id: MatcherID.anyMatch,\n  name: 'Any',\n  description: 'Any child matches (OR)',\n  excludeFromPicker: true,\n  defaultOptions: [], // empty array\n\n  get: (options: MatcherConfig[]) => {\n    const children = options.map((option) => {\n      return getFrameMatchers(option);\n    });\n    return (frame: DataFrame) => {\n      for (const child of children) {\n        if (child(frame)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  },\n\n  getOptionsDisplayText: (options: MatcherConfig[]) => {\n    let text = '';\n    for (const sub of options) {\n      if (text.length > 0) {\n        text += ' OR ';\n      }\n      const matcher = frameMatchers.get(sub.id);\n      text += matcher.getOptionsDisplayText ? matcher.getOptionsDisplayText(sub) : matcher.name;\n    }\n    return text;\n  },\n};\n\nconst allFieldsMatcher: FieldMatcherInfo<MatcherConfig[]> = {\n  id: MatcherID.allMatch,\n  name: 'All',\n  description: 'Everything matches (AND)',\n  excludeFromPicker: true,\n  defaultOptions: [], // empty array\n\n  get: (options: MatcherConfig[]) => {\n    const children = options.map((option) => {\n      return getFieldMatcher(option);\n    });\n    return (field: Field, frame: DataFrame, allFrames: DataFrame[]) => {\n      for (const child of children) {\n        if (!child(field, frame, allFrames)) {\n          return false;\n        }\n      }\n      return true;\n    };\n  },\n\n  getOptionsDisplayText: (options: MatcherConfig[]) => {\n    let text = '';\n    for (const sub of options) {\n      if (text.length > 0) {\n        text += ' AND ';\n      }\n      const matcher = fieldMatchers.get(sub.id); // Ugho what about frame\n      text += matcher.getOptionsDisplayText ? matcher.getOptionsDisplayText(sub) : matcher.name;\n    }\n    return text;\n  },\n};\n\nconst allFramesMatcher: FrameMatcherInfo<MatcherConfig[]> = {\n  id: MatcherID.allMatch,\n  name: 'All',\n  description: 'Everything matches (AND)',\n  excludeFromPicker: true,\n  defaultOptions: [], // empty array\n\n  get: (options: MatcherConfig[]) => {\n    const children = options.map((option) => {\n      return getFrameMatchers(option);\n    });\n    return (frame: DataFrame) => {\n      for (const child of children) {\n        if (!child(frame)) {\n          return false;\n        }\n      }\n      return true;\n    };\n  },\n\n  getOptionsDisplayText: (options: MatcherConfig[]) => {\n    let text = '';\n    for (const sub of options) {\n      if (text.length > 0) {\n        text += ' AND ';\n      }\n      const matcher = frameMatchers.get(sub.id);\n      text += matcher.getOptionsDisplayText ? matcher.getOptionsDisplayText(sub) : matcher.name;\n    }\n    return text;\n  },\n};\n\nconst notFieldMatcher: FieldMatcherInfo<MatcherConfig> = {\n  id: MatcherID.invertMatch,\n  name: 'NOT',\n  description: 'Inverts other matchers',\n  excludeFromPicker: true,\n\n  get: (option: MatcherConfig) => {\n    const check = getFieldMatcher(option);\n    return (field: Field, frame: DataFrame, allFrames: DataFrame[]) => {\n      return !check(field, frame, allFrames);\n    };\n  },\n\n  getOptionsDisplayText: (options: MatcherConfig) => {\n    const matcher = fieldMatchers.get(options.id);\n    const text = matcher.getOptionsDisplayText ? matcher.getOptionsDisplayText(options.options) : matcher.name;\n    return 'NOT ' + text;\n  },\n};\n\nconst notFrameMatcher: FrameMatcherInfo<MatcherConfig> = {\n  id: MatcherID.invertMatch,\n  name: 'NOT',\n  description: 'Inverts other matchers',\n  excludeFromPicker: true,\n\n  get: (option: MatcherConfig) => {\n    const check = getFrameMatchers(option);\n    return (frame: DataFrame) => {\n      return !check(frame);\n    };\n  },\n\n  getOptionsDisplayText: (options: MatcherConfig) => {\n    const matcher = frameMatchers.get(options.id);\n    const text = matcher.getOptionsDisplayText ? matcher.getOptionsDisplayText(options.options) : matcher.name;\n    return 'NOT ' + text;\n  },\n};\n\nexport const alwaysFieldMatcher = (field: Field) => {\n  return true;\n};\n\nexport const alwaysFrameMatcher = (frame: DataFrame) => {\n  return true;\n};\n\nexport const neverFieldMatcher = (field: Field) => {\n  return false;\n};\n\nexport const notTimeFieldMatcher = (field: Field) => {\n  return field.type !== FieldType.time;\n};\n\nexport const neverFrameMatcher = (frame: DataFrame) => {\n  return false;\n};\n\nconst alwaysFieldMatcherInfo: FieldMatcherInfo = {\n  id: MatcherID.alwaysMatch,\n  name: 'All Fields',\n  description: 'Always Match',\n\n  get: (option: any) => {\n    return alwaysFieldMatcher;\n  },\n\n  getOptionsDisplayText: (options: any) => {\n    return 'Always';\n  },\n};\n\nconst alwaysFrameMatcherInfo: FrameMatcherInfo = {\n  id: MatcherID.alwaysMatch,\n  name: 'All Frames',\n  description: 'Always Match',\n\n  get: (option: any) => {\n    return alwaysFrameMatcher;\n  },\n\n  getOptionsDisplayText: (options: any) => {\n    return 'Always';\n  },\n};\n\nconst neverFieldMatcherInfo: FieldMatcherInfo = {\n  id: MatcherID.neverMatch,\n  name: 'No Fields',\n  description: 'Never Match',\n  excludeFromPicker: true,\n\n  get: (option: any) => {\n    return neverFieldMatcher;\n  },\n\n  getOptionsDisplayText: (options: any) => {\n    return 'Never';\n  },\n};\n\nconst neverFrameMatcherInfo: FrameMatcherInfo = {\n  id: MatcherID.neverMatch,\n  name: 'No Frames',\n  description: 'Never Match',\n\n  get: (option: any) => {\n    return neverFrameMatcher;\n  },\n\n  getOptionsDisplayText: (options: any) => {\n    return 'Never';\n  },\n};\n\nexport function getFieldPredicateMatchers(): FieldMatcherInfo[] {\n  return [anyFieldMatcher, allFieldsMatcher, notFieldMatcher, alwaysFieldMatcherInfo, neverFieldMatcherInfo];\n}\n\nexport function getFramePredicateMatchers(): FrameMatcherInfo[] {\n  return [anyFrameMatcher, allFramesMatcher, notFrameMatcher, alwaysFrameMatcherInfo, neverFrameMatcherInfo];\n}\n","import { stringToJsRegex } from '../../text';\nimport { DataFrame } from '../../types/dataFrame';\nimport { FrameMatcherInfo } from '../../types/transformations';\n\nimport { FrameMatcherID } from './ids';\n\n// General Field matcher\nconst refIdMacher: FrameMatcherInfo<string> = {\n  id: FrameMatcherID.byRefId,\n  name: 'Query refId',\n  description: 'match the refId',\n  defaultOptions: 'A',\n\n  get: (pattern: string) => {\n    const regex = stringToJsRegex(pattern);\n    return (frame: DataFrame) => {\n      return regex.test(frame.refId || '');\n    };\n  },\n\n  getOptionsDisplayText: (pattern: string) => {\n    return `RefID: ${pattern}`;\n  },\n};\n\nexport function getRefIdMatchers(): FrameMatcherInfo[] {\n  return [refIdMacher];\n}\n","import { Field, FieldType, DataFrame } from '../../types/dataFrame';\nimport { FieldMatcherInfo } from '../../types/transformations';\n\nimport { FieldMatcherID } from './ids';\n\nconst firstFieldMatcher: FieldMatcherInfo = {\n  id: FieldMatcherID.first,\n  name: 'First Field',\n  description: 'The first field in the frame',\n\n  get: (type: FieldType) => {\n    return (field: Field, frame: DataFrame, allFrames: DataFrame[]) => {\n      return field === frame.fields[0];\n    };\n  },\n\n  getOptionsDisplayText: () => {\n    return `First field`;\n  },\n};\n\nconst firstTimeFieldMatcher: FieldMatcherInfo = {\n  id: FieldMatcherID.firstTimeField,\n  name: 'First time field',\n  description: 'The first field of type time in a frame',\n\n  get: (type: FieldType) => {\n    return (field: Field, frame: DataFrame, allFrames: DataFrame[]) => {\n      return field.type === FieldType.time && field === frame.fields.find((f) => f.type === FieldType.time);\n    };\n  },\n\n  getOptionsDisplayText: () => {\n    return `First time field`;\n  },\n};\n\n/**\n * Registry Initialization\n */\nexport function getSimpleFieldMatchers(): FieldMatcherInfo[] {\n  return [firstFieldMatcher, firstTimeFieldMatcher];\n}\n","import { Field } from '../../../types/dataFrame';\nimport { ValueMatcherInfo } from '../../../types/transformations';\nimport { ValueMatcherID } from '../ids';\n\nimport { BasicValueMatcherOptions } from './types';\n\nconst isEqualValueMatcher: ValueMatcherInfo<BasicValueMatcherOptions> = {\n  id: ValueMatcherID.equal,\n  name: 'Is equal',\n  description: 'Match where value for given field is equal to options value.',\n  get: (options) => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      // eslint-disable-next-line eqeqeq\n      return value == options.value;\n    };\n  },\n  getOptionsDisplayText: () => {\n    return `Matches all rows where field is null.`;\n  },\n  isApplicable: () => true,\n  getDefaultOptions: () => ({ value: '' }),\n};\n\nconst isNotEqualValueMatcher: ValueMatcherInfo<BasicValueMatcherOptions> = {\n  id: ValueMatcherID.notEqual,\n  name: 'Is not equal',\n  description: 'Match where value for given field is not equal to options value.',\n  get: (options) => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      // eslint-disable-next-line eqeqeq\n      return value != options.value;\n    };\n  },\n  getOptionsDisplayText: () => {\n    return `Matches all rows where field is not null.`;\n  },\n  isApplicable: () => true,\n  getDefaultOptions: () => ({ value: '' }),\n};\n\nexport const getEqualValueMatchers = (): ValueMatcherInfo[] => [isEqualValueMatcher, isNotEqualValueMatcher];\n","import { Field } from '../../../types/dataFrame';\nimport { ValueMatcherInfo } from '../../../types/transformations';\nimport { ValueMatcherID } from '../ids';\n\nimport { ValueMatcherOptions } from './types';\n\nconst isNullValueMatcher: ValueMatcherInfo<ValueMatcherOptions> = {\n  id: ValueMatcherID.isNull,\n  name: 'Is null',\n  description: 'Match where value for given field is null.',\n  get: () => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      return value == null;\n    };\n  },\n  getOptionsDisplayText: () => {\n    return `Matches all rows where field is null.`;\n  },\n  isApplicable: () => true,\n  getDefaultOptions: () => ({}),\n};\n\nconst isNotNullValueMatcher: ValueMatcherInfo<ValueMatcherOptions> = {\n  id: ValueMatcherID.isNotNull,\n  name: 'Is not null',\n  description: 'Match where value for given field is not null.',\n  get: () => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      return value != null;\n    };\n  },\n  getOptionsDisplayText: () => {\n    return `Matches all rows where field is not null.`;\n  },\n  isApplicable: () => true,\n  getDefaultOptions: () => ({}),\n};\n\nexport const getNullValueMatchers = (): ValueMatcherInfo[] => [isNullValueMatcher, isNotNullValueMatcher];\n","import { Field, FieldType } from '../../../types/dataFrame';\nimport { ValueMatcherInfo } from '../../../types/transformations';\nimport { ValueMatcherID } from '../ids';\n\nimport { BasicValueMatcherOptions } from './types';\n\nconst isGreaterValueMatcher: ValueMatcherInfo<BasicValueMatcherOptions<number>> = {\n  id: ValueMatcherID.greater,\n  name: 'Is greater',\n  description: 'Match when field value is greater than option.',\n  get: (options) => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      if (isNaN(value)) {\n        return false;\n      }\n      return value > options.value;\n    };\n  },\n  getOptionsDisplayText: (options) => {\n    return `Matches all rows where field value is greater than: ${options.value}.`;\n  },\n  isApplicable: (field) => field.type === FieldType.number,\n  getDefaultOptions: () => ({ value: 0 }),\n};\n\nconst isGreaterOrEqualValueMatcher: ValueMatcherInfo<BasicValueMatcherOptions<number>> = {\n  id: ValueMatcherID.greaterOrEqual,\n  name: 'Is greater or equal',\n  description: 'Match when field value is greater than or equal to option.',\n  get: (options) => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      if (isNaN(value)) {\n        return false;\n      }\n      return value >= options.value;\n    };\n  },\n  getOptionsDisplayText: (options) => {\n    return `Matches all rows where field value is greater than or equal to: ${options.value}.`;\n  },\n  isApplicable: (field) => field.type === FieldType.number,\n  getDefaultOptions: () => ({ value: 0 }),\n};\n\nconst isLowerValueMatcher: ValueMatcherInfo<BasicValueMatcherOptions<number>> = {\n  id: ValueMatcherID.lower,\n  name: 'Is lower',\n  description: 'Match when field value is lower than option.',\n  get: (options) => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      if (isNaN(value)) {\n        return false;\n      }\n      return value < options.value;\n    };\n  },\n  getOptionsDisplayText: (options) => {\n    return `Matches all rows where field value is lower than: ${options.value}.`;\n  },\n  isApplicable: (field) => field.type === FieldType.number,\n  getDefaultOptions: () => ({ value: 0 }),\n};\n\nconst isLowerOrEqualValueMatcher: ValueMatcherInfo<BasicValueMatcherOptions<number>> = {\n  id: ValueMatcherID.lowerOrEqual,\n  name: 'Is lower or equal',\n  description: 'Match when field value is lower or equal than option.',\n  get: (options) => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      if (isNaN(value)) {\n        return false;\n      }\n      return value <= options.value;\n    };\n  },\n  getOptionsDisplayText: (options) => {\n    return `Matches all rows where field value is lower or equal than: ${options.value}.`;\n  },\n  isApplicable: (field) => field.type === FieldType.number,\n  getDefaultOptions: () => ({ value: 0 }),\n};\n\nexport const getNumericValueMatchers = (): ValueMatcherInfo[] => [\n  isGreaterValueMatcher,\n  isGreaterOrEqualValueMatcher,\n  isLowerValueMatcher,\n  isLowerOrEqualValueMatcher,\n];\n","import { Field, FieldType } from '../../../types/dataFrame';\nimport { ValueMatcherInfo } from '../../../types/transformations';\nimport { ValueMatcherID } from '../ids';\n\nimport { RangeValueMatcherOptions } from './types';\n\nconst isBetweenValueMatcher: ValueMatcherInfo<RangeValueMatcherOptions<number>> = {\n  id: ValueMatcherID.between,\n  name: 'Is between',\n  description: 'Match when field value is between given option values.',\n  get: (options) => {\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      if (isNaN(value)) {\n        return false;\n      }\n      return value > options.from && value < options.to;\n    };\n  },\n  getOptionsDisplayText: (options) => {\n    return `Matches all rows where field value is between ${options.from} and ${options.to}.`;\n  },\n  isApplicable: (field) => field.type === FieldType.number,\n  getDefaultOptions: () => ({ from: 0, to: 100 }),\n};\n\nexport const getRangeValueMatchers = (): ValueMatcherInfo[] => [isBetweenValueMatcher];\n","import { Field } from '../../../types/dataFrame';\nimport { ValueMatcherInfo } from '../../../types/transformations';\nimport { ValueMatcherID } from '../ids';\n\nimport { BasicValueMatcherOptions } from './types';\n\nconst regexValueMatcher: ValueMatcherInfo<BasicValueMatcherOptions<string>> = {\n  id: ValueMatcherID.regex,\n  name: 'Regex',\n  description: 'Match when field value is matching regex.',\n  get: (options) => {\n    const regex = new RegExp(options.value);\n\n    return (valueIndex: number, field: Field) => {\n      const value = field.values.get(valueIndex);\n      return regex.test(value);\n    };\n  },\n  getOptionsDisplayText: (options) => {\n    return `Matches all rows where field value is matching regex: ${options.value}`;\n  },\n  isApplicable: () => true,\n  getDefaultOptions: () => ({ value: '.*' }),\n};\n\nexport const getRegexValueMatcher = (): ValueMatcherInfo[] => [regexValueMatcher];\n","import { map } from 'rxjs/operators';\n\nimport { getTimeField } from '../../dataframe/processDataFrame';\nimport { DataFrame } from '../../types/dataFrame';\nimport { SynchronousDataTransformerInfo } from '../../types/transformations';\n\nimport { DataTransformerID } from './ids';\nimport { seriesToColumnsTransformer } from './seriesToColumns';\n\nexport const ensureColumnsTransformer: SynchronousDataTransformerInfo = {\n  id: DataTransformerID.ensureColumns,\n  name: 'Ensure Columns Transformer',\n  description: 'Will check if current data frames is series or columns. If in series it will convert to columns.',\n\n  operator: (options) => (source) => source.pipe(map((data) => ensureColumnsTransformer.transformer(options)(data))),\n\n  transformer: (options: any) => (frames: DataFrame[]) => {\n    // Assume timeseries should first be joined by time\n    const timeFieldName = findConsistentTimeFieldName(frames);\n\n    if (frames.length > 1 && timeFieldName) {\n      return seriesToColumnsTransformer.transformer({\n        byField: timeFieldName,\n      })(frames);\n    }\n    return frames;\n  },\n};\n\n/**\n * Find the name for the time field used in all frames (if one exists)\n */\nfunction findConsistentTimeFieldName(data: DataFrame[]): string | undefined {\n  let name: string | undefined = undefined;\n  for (const frame of data) {\n    const { timeField } = getTimeField(frame);\n    if (!timeField) {\n      return undefined; // Not timeseries\n    }\n    if (!name) {\n      name = timeField.name;\n    } else if (name !== timeField.name) {\n      // Second frame has a different time column?!\n      return undefined;\n    }\n  }\n  return name;\n}\n","import { map } from 'rxjs/operators';\n\nimport { DataFrame, Field } from '../../types/dataFrame';\nimport { DataTransformerInfo, MatcherConfig } from '../../types/transformations';\nimport { getFieldMatcher, getFrameMatchers } from '../matchers';\n\nimport { DataTransformerID } from './ids';\nimport { noopTransformer } from './noop';\n\nexport interface FilterOptions {\n  include?: MatcherConfig;\n  exclude?: MatcherConfig;\n}\n\nexport const filterFieldsTransformer: DataTransformerInfo<FilterOptions> = {\n  id: DataTransformerID.filterFields,\n  name: 'Filter Fields',\n  description: 'select a subset of fields',\n  defaultOptions: {},\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options: FilterOptions) => (source) => {\n    if (!options.include && !options.exclude) {\n      return source.pipe(noopTransformer.operator({}));\n    }\n\n    return source.pipe(\n      map((data) => {\n        const include = options.include ? getFieldMatcher(options.include) : null;\n        const exclude = options.exclude ? getFieldMatcher(options.exclude) : null;\n\n        const processed: DataFrame[] = [];\n        for (const series of data) {\n          // Find the matching field indexes\n          const fields: Field[] = [];\n          for (let i = 0; i < series.fields.length; i++) {\n            const field = series.fields[i];\n\n            if (exclude) {\n              if (exclude(field, series, data)) {\n                continue;\n              }\n              if (!include) {\n                fields.push(field);\n              }\n            }\n            if (include && include(field, series, data)) {\n              fields.push(field);\n            }\n          }\n\n          if (!fields.length) {\n            continue;\n          }\n          const copy = {\n            ...series, // all the other properties\n            fields, // but a different set of fields\n          };\n          processed.push(copy);\n        }\n        return processed;\n      })\n    );\n  },\n};\n\nexport const filterFramesTransformer: DataTransformerInfo<FilterOptions> = {\n  id: DataTransformerID.filterFrames,\n  name: 'Filter Frames',\n  description: 'select a subset of frames',\n  defaultOptions: {},\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options) => (source) => {\n    if (!options.include && !options.exclude) {\n      return source.pipe(noopTransformer.operator({}));\n    }\n\n    return source.pipe(\n      map((data) => {\n        const include = options.include ? getFrameMatchers(options.include) : null;\n        const exclude = options.exclude ? getFrameMatchers(options.exclude) : null;\n\n        const processed: DataFrame[] = [];\n        for (const series of data) {\n          if (exclude) {\n            if (exclude(series)) {\n              continue;\n            }\n            if (!include) {\n              processed.push(series);\n            }\n          }\n          if (include && include(series)) {\n            processed.push(series);\n          }\n        }\n        return processed;\n      })\n    );\n  },\n};\n","import { DataTransformerInfo, MatcherConfig } from '../../types/transformations';\nimport { FieldMatcherID } from '../matchers/ids';\nimport { RegexpOrNamesMatcherOptions } from '../matchers/nameMatcher';\n\nimport { filterFieldsTransformer } from './filter';\nimport { DataTransformerID } from './ids';\n\nexport interface FilterFieldsByNameTransformerOptions {\n  include?: RegexpOrNamesMatcherOptions;\n  exclude?: RegexpOrNamesMatcherOptions;\n}\n\nexport const filterFieldsByNameTransformer: DataTransformerInfo<FilterFieldsByNameTransformerOptions> = {\n  id: DataTransformerID.filterFieldsByName,\n  name: 'Filter fields by name',\n  description: 'select a subset of fields',\n  defaultOptions: {},\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options) => (source) =>\n    source.pipe(\n      filterFieldsTransformer.operator({\n        include: getMatcherConfig(options.include),\n        exclude: getMatcherConfig(options.exclude),\n      })\n    ),\n};\n\nconst getMatcherConfig = (options?: RegexpOrNamesMatcherOptions): MatcherConfig | undefined => {\n  if (!options) {\n    return undefined;\n  }\n\n  const { names, pattern } = options;\n\n  if ((!Array.isArray(names) || names.length === 0) && !pattern) {\n    return undefined;\n  }\n\n  if (!pattern) {\n    return { id: FieldMatcherID.byNames, options: { names } };\n  }\n\n  if (!Array.isArray(names) || names.length === 0) {\n    return { id: FieldMatcherID.byRegexp, options: pattern };\n  }\n\n  return { id: FieldMatcherID.byRegexpOrNames, options };\n};\n","import { DataTransformerInfo } from '../../types/transformations';\nimport { FrameMatcherID } from '../matchers/ids';\n\nimport { filterFramesTransformer, FilterOptions } from './filter';\nimport { DataTransformerID } from './ids';\n\nexport interface FilterFramesByRefIdTransformerOptions {\n  include?: string;\n  exclude?: string;\n}\n\nexport const filterFramesByRefIdTransformer: DataTransformerInfo<FilterFramesByRefIdTransformerOptions> = {\n  id: DataTransformerID.filterByRefId,\n  name: 'Filter data by query refId',\n  description: 'select a subset of results',\n  defaultOptions: {},\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options) => (source) => {\n    const filterOptions: FilterOptions = {};\n    if (options.include) {\n      filterOptions.include = {\n        id: FrameMatcherID.byRefId,\n        options: options.include,\n      };\n    }\n    if (options.exclude) {\n      filterOptions.exclude = {\n        id: FrameMatcherID.byRefId,\n        options: options.exclude,\n      };\n    }\n\n    return source.pipe(filterFramesTransformer.operator(filterOptions));\n  },\n};\n","export enum DataTransformerID {\n  // join = 'join', // Pick a field and merge all series based on that field\n  append = 'append',\n  //  rotate = 'rotate', // Columns to rows\n  reduce = 'reduce',\n  order = 'order',\n  organize = 'organize',\n  rename = 'rename',\n  calculateField = 'calculateField',\n  seriesToColumns = 'seriesToColumns',\n  seriesToRows = 'seriesToRows',\n  merge = 'merge',\n  concatenate = 'concatenate',\n  labelsToFields = 'labelsToFields',\n  filterFields = 'filterFields',\n  filterFieldsByName = 'filterFieldsByName',\n  filterFrames = 'filterFrames',\n  filterByRefId = 'filterByRefId',\n  renameByRegex = 'renameByRegex',\n  filterByValue = 'filterByValue',\n  noop = 'noop',\n  ensureColumns = 'ensureColumns',\n  groupBy = 'groupBy',\n  sortBy = 'sortBy',\n  histogram = 'histogram',\n  configFromData = 'configFromData',\n  rowsToFields = 'rowsToFields',\n  prepareTimeSeries = 'prepareTimeSeries',\n  convertFieldType = 'convertFieldType',\n  fieldLookup = 'fieldLookup',\n  heatmap = 'heatmap',\n  spatial = 'spatial',\n  extractFields = 'extractFields',\n  groupingToMatrix = 'groupingToMatrix',\n}\n","import { omit } from 'lodash';\nimport { map } from 'rxjs/operators';\n\nimport { MutableDataFrame } from '../../dataframe';\nimport { DataFrame, Field } from '../../types/dataFrame';\nimport { DataTransformerInfo } from '../../types/transformations';\nimport { ArrayVector } from '../../vector/ArrayVector';\n\nimport { DataTransformerID } from './ids';\n\ninterface ValuePointer {\n  key: string;\n  index: number;\n}\n\nexport interface MergeTransformerOptions {}\n\nexport const mergeTransformer: DataTransformerInfo<MergeTransformerOptions> = {\n  id: DataTransformerID.merge,\n  name: 'Merge series/tables',\n  description: 'Merges multiple series/tables into a single serie/table',\n  defaultOptions: {},\n  operator: (options) => (source) =>\n    source.pipe(\n      map((dataFrames) => {\n        if (!Array.isArray(dataFrames) || dataFrames.length <= 1) {\n          return dataFrames;\n        }\n\n        const data = dataFrames.filter((frame) => frame.fields.length > 0);\n\n        if (data.length === 0) {\n          return [dataFrames[0]];\n        }\n\n        const fieldNames = new Set<string>();\n        const fieldIndexByName: Record<string, Record<number, number>> = {};\n        const fieldNamesForKey: string[] = [];\n        const dataFrame = new MutableDataFrame();\n\n        for (let frameIndex = 0; frameIndex < data.length; frameIndex++) {\n          const frame = data[frameIndex];\n\n          for (let fieldIndex = 0; fieldIndex < frame.fields.length; fieldIndex++) {\n            const field = frame.fields[fieldIndex];\n\n            if (!fieldNames.has(field.name)) {\n              dataFrame.addField(copyFieldStructure(field));\n              fieldNames.add(field.name);\n            }\n\n            fieldIndexByName[field.name] = fieldIndexByName[field.name] || {};\n            fieldIndexByName[field.name][frameIndex] = fieldIndex;\n\n            if (data.length - 1 !== frameIndex) {\n              continue;\n            }\n\n            if (fieldExistsInAllFrames(fieldIndexByName, field, data)) {\n              fieldNamesForKey.push(field.name);\n            }\n          }\n        }\n\n        if (fieldNamesForKey.length === 0) {\n          return dataFrames;\n        }\n\n        const valuesByKey: Record<string, Array<Record<string, any>>> = {};\n        const valuesInOrder: ValuePointer[] = [];\n        const keyFactory = createKeyFactory(data, fieldIndexByName, fieldNamesForKey);\n        const valueMapper = createValueMapper(data, fieldNames, fieldIndexByName);\n\n        for (let frameIndex = 0; frameIndex < data.length; frameIndex++) {\n          const frame = data[frameIndex];\n\n          for (let valueIndex = 0; valueIndex < frame.length; valueIndex++) {\n            const key = keyFactory(frameIndex, valueIndex);\n            const value = valueMapper(frameIndex, valueIndex);\n\n            if (!Array.isArray(valuesByKey[key])) {\n              valuesByKey[key] = [value];\n              valuesInOrder.push(createPointer(key, valuesByKey));\n              continue;\n            }\n\n            let valueWasMerged = false;\n\n            valuesByKey[key] = valuesByKey[key].map((existing) => {\n              if (!isMergable(existing, value)) {\n                return existing;\n              }\n              valueWasMerged = true;\n              return { ...existing, ...value };\n            });\n\n            if (!valueWasMerged) {\n              valuesByKey[key].push(value);\n              valuesInOrder.push(createPointer(key, valuesByKey));\n            }\n          }\n        }\n\n        for (const pointer of valuesInOrder) {\n          const value = valuesByKey[pointer.key][pointer.index];\n\n          if (value) {\n            dataFrame.add(value);\n          }\n        }\n\n        return [dataFrame];\n      })\n    ),\n};\n\nconst copyFieldStructure = (field: Field): Field => {\n  return {\n    ...omit(field, ['values', 'state', 'labels', 'config']),\n    values: new ArrayVector(),\n    config: {\n      ...omit(field.config, 'displayName'),\n    },\n  };\n};\n\nconst createKeyFactory = (\n  data: DataFrame[],\n  fieldPointerByName: Record<string, Record<string, number>>,\n  keyFieldNames: string[]\n) => {\n  const factoryIndex = keyFieldNames.reduce((index: Record<string, number[]>, fieldName) => {\n    return Object.keys(fieldPointerByName[fieldName]).reduce((index: Record<string, number[]>, frameIndex) => {\n      index[frameIndex] = index[frameIndex] || [];\n      index[frameIndex].push(fieldPointerByName[fieldName][frameIndex]);\n      return index;\n    }, index);\n  }, {});\n\n  return (frameIndex: number, valueIndex: number): string => {\n    return factoryIndex[frameIndex].reduce((key: string, fieldIndex: number) => {\n      return key + data[frameIndex].fields[fieldIndex].values.get(valueIndex);\n    }, '');\n  };\n};\n\nconst createValueMapper = (\n  data: DataFrame[],\n  fieldByName: Set<string>,\n  fieldIndexByName: Record<string, Record<number, number>>\n) => {\n  return (frameIndex: number, valueIndex: number) => {\n    const value: Record<string, any> = {};\n    const fieldNames = Array.from(fieldByName);\n\n    for (const fieldName of fieldNames) {\n      const fieldIndexByFrameIndex = fieldIndexByName[fieldName];\n      if (!fieldIndexByFrameIndex) {\n        continue;\n      }\n\n      const fieldIndex = fieldIndexByFrameIndex[frameIndex];\n      if (typeof fieldIndex !== 'number') {\n        continue;\n      }\n\n      const frame = data[frameIndex];\n      if (!frame || !frame.fields) {\n        continue;\n      }\n\n      const field = frame.fields[fieldIndex];\n      if (!field || !field.values) {\n        continue;\n      }\n\n      value[fieldName] = field.values.get(valueIndex);\n    }\n\n    return value;\n  };\n};\n\nconst isMergable = (existing: Record<string, any>, value: Record<string, any>): boolean => {\n  let mergable = true;\n\n  for (const prop in value) {\n    if (typeof existing[prop] === 'undefined') {\n      continue;\n    }\n\n    if (existing[prop] === null) {\n      continue;\n    }\n\n    if (existing[prop] !== value[prop]) {\n      mergable = false;\n      break;\n    }\n  }\n\n  return mergable;\n};\n\nconst fieldExistsInAllFrames = (\n  fieldIndexByName: Record<string, Record<number, number>>,\n  field: Field,\n  data: DataFrame[]\n) => {\n  return Object.keys(fieldIndexByName[field.name]).length === data.length;\n};\n\nconst createPointer = (key: string, valuesByKey: Record<string, Array<Record<string, any>>>): ValuePointer => {\n  return {\n    key,\n    index: valuesByKey[key].length - 1,\n  };\n};\n","import { DataTransformerInfo } from '../../types/transformations';\n\nimport { DataTransformerID } from './ids';\n\nexport interface NoopTransformerOptions {\n  include?: string;\n  exclude?: string;\n}\n\nexport const noopTransformer: DataTransformerInfo<NoopTransformerOptions> = {\n  id: DataTransformerID.noop,\n  name: 'noop',\n  description: 'No-operation transformer',\n  defaultOptions: {},\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options: NoopTransformerOptions) => (source) => source,\n};\n","import { DataTransformerInfo } from '../../types/transformations';\n\nimport { filterFieldsByNameTransformer } from './filterByName';\nimport { DataTransformerID } from './ids';\nimport { orderFieldsTransformer, OrderFieldsTransformerOptions } from './order';\nimport { renameFieldsTransformer, RenameFieldsTransformerOptions } from './rename';\n\nexport interface OrganizeFieldsTransformerOptions\n  extends OrderFieldsTransformerOptions,\n    RenameFieldsTransformerOptions {\n  excludeByName: Record<string, boolean>;\n}\n\nexport const organizeFieldsTransformer: DataTransformerInfo<OrganizeFieldsTransformerOptions> = {\n  id: DataTransformerID.organize,\n  name: 'Organize fields by name',\n  description: 'Order, filter and rename fields based on configuration given by user',\n  defaultOptions: {\n    excludeByName: {},\n    indexByName: {},\n    renameByName: {},\n  },\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options) => (source) =>\n    source.pipe(\n      filterFieldsByNameTransformer.operator({\n        exclude: { names: mapToExcludeArray(options.excludeByName) },\n      }),\n      orderFieldsTransformer.operator(options),\n      renameFieldsTransformer.operator(options)\n    ),\n};\n\nconst mapToExcludeArray = (excludeByName: Record<string, boolean>): string[] => {\n  if (!excludeByName) {\n    return [];\n  }\n\n  return Object.keys(excludeByName).filter((name) => excludeByName[name]);\n};\n","import { map } from 'rxjs/operators';\n\nimport { getFieldDisplayName } from '../../field/fieldState';\nimport { DataFrame, Field } from '../../types/dataFrame';\nimport { DataTransformerInfo } from '../../types/transformations';\n\nimport { DataTransformerID } from './ids';\n\nexport interface RenameFieldsTransformerOptions {\n  renameByName: Record<string, string>;\n}\n\nexport const renameFieldsTransformer: DataTransformerInfo<RenameFieldsTransformerOptions> = {\n  id: DataTransformerID.rename,\n  name: 'Rename fields by name',\n  description: 'Rename fields based on configuration given by user',\n  defaultOptions: {\n    renameByName: {},\n  },\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options) => (source) =>\n    source.pipe(\n      map((data) => {\n        const renamer = createRenamer(options.renameByName);\n\n        if (!Array.isArray(data) || data.length === 0) {\n          return data;\n        }\n\n        return data.map((frame) => ({\n          ...frame,\n          fields: renamer(frame),\n        }));\n      })\n    ),\n};\n\nconst createRenamer =\n  (renameByName: Record<string, string>) =>\n  (frame: DataFrame): Field[] => {\n    if (!renameByName || Object.keys(renameByName).length === 0) {\n      return frame.fields;\n    }\n\n    return frame.fields.map((field) => {\n      const displayName = getFieldDisplayName(field, frame);\n      const renameTo = renameByName[displayName];\n\n      if (typeof renameTo !== 'string' || renameTo.length === 0) {\n        return field;\n      }\n\n      return {\n        ...field,\n        config: {\n          ...field.config,\n          displayName: renameTo,\n        },\n        state: {\n          ...field.state,\n          displayName: renameTo,\n        },\n      };\n    });\n  };\n","import { map } from 'rxjs/operators';\n\nimport { DataFrame, SynchronousDataTransformerInfo, FieldMatcher } from '../../types';\nimport { fieldMatchers } from '../matchers';\nimport { FieldMatcherID } from '../matchers/ids';\n\nimport { DataTransformerID } from './ids';\nimport { outerJoinDataFrames } from './joinDataFrames';\n\nexport interface SeriesToColumnsOptions {\n  byField?: string; // empty will pick the field automatically\n}\n\nexport const seriesToColumnsTransformer: SynchronousDataTransformerInfo<SeriesToColumnsOptions> = {\n  id: DataTransformerID.seriesToColumns,\n  name: 'Series as columns', // Called 'Outer join' in the UI!\n  description: 'Groups series by field and returns values as columns',\n  defaultOptions: {\n    byField: undefined, // DEFAULT_KEY_FIELD,\n  },\n\n  operator: (options) => (source) => source.pipe(map((data) => seriesToColumnsTransformer.transformer(options)(data))),\n\n  transformer: (options: SeriesToColumnsOptions) => {\n    let joinBy: FieldMatcher | undefined = undefined;\n    return (data: DataFrame[]) => {\n      if (data.length > 1) {\n        if (options.byField && !joinBy) {\n          joinBy = fieldMatchers.get(FieldMatcherID.byName).get(options.byField);\n        }\n        const joined = outerJoinDataFrames({ frames: data, joinBy });\n        if (joined) {\n          return [joined];\n        }\n      }\n      return data;\n    };\n  },\n};\n","import { omit } from 'lodash';\nimport { map } from 'rxjs/operators';\n\nimport { MutableDataFrame, sortDataFrame } from '../../dataframe';\nimport { isTimeSeries } from '../../dataframe/utils';\nimport { getFrameDisplayName } from '../../field/fieldState';\nimport {\n  Field,\n  FieldType,\n  TIME_SERIES_METRIC_FIELD_NAME,\n  TIME_SERIES_TIME_FIELD_NAME,\n  TIME_SERIES_VALUE_FIELD_NAME,\n} from '../../types/dataFrame';\nimport { DataTransformerInfo } from '../../types/transformations';\nimport { ArrayVector } from '../../vector';\n\nimport { DataTransformerID } from './ids';\n\nexport interface SeriesToRowsTransformerOptions {}\n\nexport const seriesToRowsTransformer: DataTransformerInfo<SeriesToRowsTransformerOptions> = {\n  id: DataTransformerID.seriesToRows,\n  name: 'Series to rows',\n  description: 'Combines multiple series into a single serie and appends a column with metric name per value.',\n  defaultOptions: {},\n  operator: (options) => (source) =>\n    source.pipe(\n      map((data) => {\n        if (!Array.isArray(data) || data.length <= 1) {\n          return data;\n        }\n\n        if (!isTimeSeries(data)) {\n          return data;\n        }\n\n        const timeFieldByIndex: Record<number, number> = {};\n        const targetFields = new Set<string>();\n        const dataFrame = new MutableDataFrame();\n        const metricField: Field = {\n          name: TIME_SERIES_METRIC_FIELD_NAME,\n          values: new ArrayVector(),\n          config: {},\n          type: FieldType.string,\n        };\n\n        for (let frameIndex = 0; frameIndex < data.length; frameIndex++) {\n          const frame = data[frameIndex];\n\n          for (let fieldIndex = 0; fieldIndex < frame.fields.length; fieldIndex++) {\n            const field = frame.fields[fieldIndex];\n\n            if (field.type === FieldType.time) {\n              timeFieldByIndex[frameIndex] = fieldIndex;\n\n              if (!targetFields.has(TIME_SERIES_TIME_FIELD_NAME)) {\n                dataFrame.addField(copyFieldStructure(field, TIME_SERIES_TIME_FIELD_NAME));\n                dataFrame.addField(metricField);\n                targetFields.add(TIME_SERIES_TIME_FIELD_NAME);\n              }\n              continue;\n            }\n\n            if (!targetFields.has(TIME_SERIES_VALUE_FIELD_NAME)) {\n              dataFrame.addField(copyFieldStructure(field, TIME_SERIES_VALUE_FIELD_NAME));\n              targetFields.add(TIME_SERIES_VALUE_FIELD_NAME);\n            }\n          }\n        }\n\n        for (let frameIndex = 0; frameIndex < data.length; frameIndex++) {\n          const frame = data[frameIndex];\n\n          for (let valueIndex = 0; valueIndex < frame.length; valueIndex++) {\n            const timeFieldIndex = timeFieldByIndex[frameIndex];\n            const valueFieldIndex = timeFieldIndex === 0 ? 1 : 0;\n\n            dataFrame.add({\n              [TIME_SERIES_TIME_FIELD_NAME]: frame.fields[timeFieldIndex].values.get(valueIndex),\n              [TIME_SERIES_METRIC_FIELD_NAME]: getFrameDisplayName(frame),\n              [TIME_SERIES_VALUE_FIELD_NAME]: frame.fields[valueFieldIndex].values.get(valueIndex),\n            });\n          }\n        }\n\n        return [sortDataFrame(dataFrame, 0, true)];\n      })\n    ),\n};\n\nconst copyFieldStructure = (field: Field, name: string): Field => {\n  return {\n    ...omit(field, ['values', 'state', 'labels', 'config', 'name']),\n    name: name,\n    values: new ArrayVector(),\n    config: {\n      ...omit(field.config, ['displayName', 'displayNameFromDS']),\n    },\n  };\n};\n","import { map } from 'rxjs/operators';\n\nimport { sortDataFrame } from '../../dataframe';\nimport { getFieldDisplayName } from '../../field';\nimport { DataFrame } from '../../types';\nimport { DataTransformerInfo } from '../../types/transformations';\n\nimport { DataTransformerID } from './ids';\n\nexport interface SortByField {\n  field: string;\n  desc?: boolean;\n  index?: number;\n}\n\nexport interface SortByTransformerOptions {\n  // NOTE: this structure supports an array, however only the first entry is used\n  // future versions may support multi-sort options\n  sort: SortByField[];\n}\n\nexport const sortByTransformer: DataTransformerInfo<SortByTransformerOptions> = {\n  id: DataTransformerID.sortBy,\n  name: 'Sort by',\n  description: 'Sort fields in a frame',\n  defaultOptions: {\n    fields: {},\n  },\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options) => (source) =>\n    source.pipe(\n      map((data) => {\n        if (!Array.isArray(data) || data.length === 0 || !options?.sort?.length) {\n          return data;\n        }\n        return sortDataFrames(data, options.sort);\n      })\n    ),\n};\n\nexport function sortDataFrames(data: DataFrame[], sort: SortByField[]): DataFrame[] {\n  return data.map((frame) => {\n    const s = attachFieldIndex(frame, sort);\n    if (s.length && s[0].index != null) {\n      return sortDataFrame(frame, s[0].index, s[0].desc);\n    }\n    return frame;\n  });\n}\n\nfunction attachFieldIndex(frame: DataFrame, sort: SortByField[]): SortByField[] {\n  return sort.map((s) => {\n    if (s.index != null) {\n      // null or undefined\n      return s;\n    }\n    return {\n      ...s,\n      index: frame.fields.findIndex((f) => s.field === getFieldDisplayName(f, frame)),\n    };\n  });\n}\n","import { ScopedVars } from './ScopedVars';\nimport { QueryResultBase, Labels, NullValueMode } from './data';\nimport { DataLink, LinkModel } from './dataLink';\nimport { DisplayProcessor, DisplayValue } from './displayValue';\nimport { FieldColor } from './fieldColor';\nimport { ThresholdsConfig } from './thresholds';\nimport { ValueMapping } from './valueMapping';\nimport { Vector } from './vector';\n\n/** @public */\nexport enum FieldType {\n  time = 'time', // or date\n  number = 'number',\n  string = 'string',\n  boolean = 'boolean',\n  // Used to detect that the value is some kind of trace data to help with the visualisation and processing.\n  trace = 'trace',\n  geo = 'geo',\n  other = 'other', // Object, Array, etc\n}\n\n/**\n * @public\n * Every property is optional\n *\n * Plugins may extend this with additional properties. Something like series overrides\n */\nexport interface FieldConfig<TOptions = any> {\n  /**\n   * The display value for this field.  This supports template variables blank is auto\n   */\n  displayName?: string;\n\n  /**\n   * This can be used by data sources that return and explicit naming structure for values and labels\n   * When this property is configured, this value is used rather than the default naming strategy.\n   */\n  displayNameFromDS?: string;\n\n  /**\n   * Human readable field metadata\n   */\n  description?: string;\n\n  /**\n   * An explict path to the field in the datasource.  When the frame meta includes a path,\n   * This will default to `${frame.meta.path}/${field.name}\n   *\n   * When defined, this value can be used as an identifier within the datasource scope, and\n   * may be used to update the results\n   */\n  path?: string;\n\n  /**\n   * True if data source can write a value to the path.  Auth/authz are supported separately\n   */\n  writeable?: boolean;\n\n  /**\n   * True if data source field supports ad-hoc filters\n   */\n  filterable?: boolean;\n\n  // Numeric Options\n  unit?: string;\n  decimals?: number | null; // Significant digits (for display)\n  min?: number | null;\n  max?: number | null;\n\n  // Interval indicates the expected regular step between values in the series.\n  // When an interval exists, consumers can identify \"missing\" values when the expected value is not present.\n  // The grafana timeseries visualization will render disconnected values when missing values are found it the time field.\n  // The interval uses the same units as the values.  For time.Time, this is defined in milliseconds.\n  interval?: number | null;\n\n  // Convert input values into a display string\n  mappings?: ValueMapping[];\n\n  // Map numeric values to states\n  thresholds?: ThresholdsConfig;\n\n  // Map values to a display color\n  color?: FieldColor;\n\n  // Used when reducing field values\n  nullValueMode?: NullValueMode;\n\n  // The behavior when clicking on a result\n  links?: DataLink[];\n\n  // Alternative to empty string\n  noValue?: string;\n\n  // Panel Specific Values\n  custom?: TOptions;\n}\n\n/** @public */\nexport interface ValueLinkConfig {\n  /**\n   * Result of field reduction\n   */\n  calculatedValue?: DisplayValue;\n  /**\n   * Index of the value row within Field. Should be provided only when value is not a result of a reduction\n   */\n  valueRowIndex?: number;\n}\n\nexport interface Field<T = any, V = Vector<T>> {\n  /**\n   * Name of the field (column)\n   */\n  name: string;\n  /**\n   *  Field value type (string, number, etc)\n   */\n  type: FieldType;\n  /**\n   *  Meta info about how field and how to display it\n   */\n  config: FieldConfig;\n  values: V; // The raw field values\n  labels?: Labels;\n\n  /**\n   * Cached values with appropriate display and id values\n   */\n  state?: FieldState | null;\n\n  /**\n   * Convert a value for display\n   */\n  display?: DisplayProcessor;\n\n  /**\n   * Get value data links with variables interpolated\n   */\n  getLinks?: (config: ValueLinkConfig) => Array<LinkModel<Field>>;\n}\n\n/** @alpha */\nexport interface FieldState {\n  /**\n   * An appropriate name for the field (does not include frame info)\n   */\n  displayName?: string | null;\n\n  /**\n   * Cache of reduced values\n   */\n  calcs?: FieldCalcs;\n\n  /**\n   * The numeric range for values in this field.  This value will respect the min/max\n   * set in field config, or when set to `auto` this will have the min/max for all data\n   * in the response\n   */\n  range?: NumericRange;\n\n  /**\n   * Appropriate values for templating\n   */\n  scopedVars?: ScopedVars;\n\n  /**\n   * Series index is index for this field in a larger data set that can span multiple DataFrames\n   * Useful for assigning color to series by looking up a color in a palette using this index\n   */\n  seriesIndex?: number;\n\n  /**\n   * Location of this field within the context frames results\n   *\n   * @internal -- we will try to make this unnecessary\n   */\n  origin?: DataFrameFieldIndex;\n\n  /**\n   * Boolean value is true if field is in a larger data set with multiple frames.\n   * This is only related to the cached displayName property above.\n   */\n  multipleFrames?: boolean;\n}\n\n/** @public */\nexport interface NumericRange {\n  min?: number | null;\n  max?: number | null;\n  delta: number;\n}\n\nexport interface DataFrame extends QueryResultBase {\n  name?: string;\n  fields: Field[]; // All fields of equal length\n\n  // The number of rows\n  length: number;\n}\n\n/**\n * @public\n * Like a field, but properties are optional and values may be a simple array\n */\nexport interface FieldDTO<T = any> {\n  name: string; // The column name\n  type?: FieldType;\n  config?: FieldConfig;\n  values?: Vector<T> | T[]; // toJSON will always be T[], input could be either\n  labels?: Labels;\n}\n\n/**\n * @public\n * Like a DataFrame, but fields may be a FieldDTO\n */\nexport interface DataFrameDTO extends QueryResultBase {\n  name?: string;\n  fields: Array<FieldDTO | Field>;\n}\n\nexport interface FieldCalcs extends Record<string, any> {}\n\nexport const TIME_SERIES_VALUE_FIELD_NAME = 'Value';\nexport const TIME_SERIES_TIME_FIELD_NAME = 'Time';\nexport const TIME_SERIES_METRIC_FIELD_NAME = 'Metric';\n\n/**\n * Describes where a specific data frame field is located within a\n * dataset of type DataFrame[]\n *\n * @internal -- we will try to make this unnecessary\n */\nexport interface DataFrameFieldIndex {\n  frameIndex: number;\n  fieldIndex: number;\n}\n","/**\n * @public\n */\nexport enum FieldColorModeId {\n  Thresholds = 'thresholds',\n  PaletteClassic = 'palette-classic',\n  PaletteSaturated = 'palette-saturated',\n  ContinuousGrYlRd = 'continuous-GrYlRd',\n  Fixed = 'fixed',\n}\n\n/**\n * @public\n */\nexport interface FieldColor {\n  /** The main color scheme mode */\n  mode: FieldColorModeId | string;\n  /** Stores the fixed color value if mode is fixed */\n  fixedColor?: string;\n  /** Some visualizations need to know how to assign a series color from by value color schemes */\n  seriesBy?: FieldColorSeriesByMode;\n}\n\n/**\n * @beta\n */\nexport type FieldColorSeriesByMode = 'min' | 'max' | 'last';\n\nexport const FALLBACK_COLOR = 'gray';\n","import { ThemeVisualizationColors } from '../themes';\n\nexport enum GrafanaThemeType {\n  Light = 'light',\n  Dark = 'dark',\n}\n\nexport interface GrafanaThemeCommons {\n  name: string;\n  // TODO: not sure if should be a part of theme\n  breakpoints: {\n    xs: string;\n    sm: string;\n    md: string;\n    lg: string;\n    xl: string;\n    xxl: string;\n  };\n  typography: {\n    fontFamily: {\n      sansSerif: string;\n      monospace: string;\n    };\n    size: {\n      base: string;\n      xs: string;\n      sm: string;\n      md: string;\n      lg: string;\n    };\n    weight: {\n      light: number;\n      regular: number;\n      semibold: number;\n      bold: number;\n    };\n    lineHeight: {\n      xs: number; //1\n      sm: number; //1.1\n      md: number; // 4/3\n      lg: number; // 1.5\n    };\n    // TODO: Refactor to use size instead of custom defs\n    heading: {\n      h1: string;\n      h2: string;\n      h3: string;\n      h4: string;\n      h5: string;\n      h6: string;\n    };\n    link: {\n      decoration: string;\n      hoverDecoration: string;\n    };\n  };\n  spacing: {\n    base: number;\n    insetSquishMd: string;\n    d: string;\n    xxs: string;\n    xs: string;\n    sm: string;\n    md: string;\n    lg: string;\n    xl: string;\n    gutter: string;\n\n    // Next-gen forms spacing variables\n    // TODO: Move variables definition to respective components when implementing\n    formSpacingBase: number;\n    formMargin: string;\n    formFieldsetMargin: string;\n    formInputHeight: number;\n    formButtonHeight: number;\n    formInputPaddingHorizontal: string;\n    // Used for icons do define spacing between icon and input field\n    // Applied on the right(prefix) or left(suffix)\n    formInputAffixPaddingHorizontal: string;\n    formInputMargin: string;\n    formLabelPadding: string;\n    formLabelMargin: string;\n    formValidationMessagePadding: string;\n    formValidationMessageMargin: string;\n    inlineFormMargin: string;\n  };\n  border: {\n    radius: {\n      sm: string;\n      md: string;\n      lg: string;\n    };\n    width: {\n      sm: string;\n    };\n  };\n  height: {\n    sm: number;\n    md: number;\n    lg: number;\n  };\n  panelPadding: number;\n  panelHeaderHeight: number;\n  zIndex: {\n    dropdown: number;\n    navbarFixed: number;\n    sidemenu: number;\n    tooltip: number;\n    modalBackdrop: number;\n    modal: number;\n    portal: number;\n    typeahead: number;\n  };\n}\n\nexport interface GrafanaTheme extends GrafanaThemeCommons {\n  type: GrafanaThemeType;\n  isDark: boolean;\n  isLight: boolean;\n  palette: {\n    black: string;\n    white: string;\n    dark1: string;\n    dark2: string;\n    dark3: string;\n    dark4: string;\n    dark5: string;\n    dark6: string;\n    dark7: string;\n    dark8: string;\n    dark9: string;\n    dark10: string;\n    gray1: string;\n    gray2: string;\n    gray3: string;\n    gray4: string;\n    gray5: string;\n    gray6: string;\n    gray7: string;\n\n    // New greys palette used by next-gen form elements\n    gray98: string;\n    gray97: string;\n    gray95: string;\n    gray90: string;\n    gray85: string;\n    gray70: string;\n    gray60: string;\n    gray33: string;\n    gray25: string;\n    gray15: string;\n    gray10: string;\n    gray05: string;\n\n    // New blues palette used by next-gen form elements\n    blue95: string;\n    blue85: string;\n    blue80: string;\n    blue77: string;\n\n    // New reds palette used by next-gen form elements\n    red88: string;\n\n    // Accent colors\n    redBase: string;\n    redShade: string;\n    greenBase: string;\n    greenShade: string;\n    red: string;\n    yellow: string;\n    purple: string;\n    orange: string;\n    orangeDark: string;\n    queryRed: string;\n    queryGreen: string;\n    queryPurple: string;\n    queryOrange: string;\n    brandPrimary: string;\n    brandSuccess: string;\n    brandWarning: string;\n    brandDanger: string;\n\n    // Status colors\n    online: string;\n    warn: string;\n    critical: string;\n  };\n  colors: {\n    bg1: string;\n    bg2: string;\n    bg3: string;\n    border1: string;\n    border2: string;\n    border3: string;\n\n    bgBlue1: string;\n    bgBlue2: string;\n\n    dashboardBg: string;\n    bodyBg: string;\n    panelBg: string;\n    panelBorder: string;\n    pageHeaderBg: string;\n    pageHeaderBorder: string;\n\n    dropdownBg: string;\n    dropdownShadow: string;\n    dropdownOptionHoverBg: string;\n\n    // Link colors\n    link: string;\n    linkDisabled: string;\n    linkHover: string;\n    linkExternal: string;\n\n    // Text colors\n    textStrong: string;\n    textHeading: string;\n    text: string;\n    textSemiWeak: string;\n    textWeak: string;\n    textFaint: string;\n    textBlue: string;\n\n    // Next-gen forms functional colors\n    formLabel: string;\n    formDescription: string;\n    formInputBg: string;\n    formInputBgDisabled: string;\n    formInputBorder: string;\n    formInputBorderHover: string;\n    formInputBorderActive: string;\n    formInputBorderInvalid: string;\n    formFocusOutline: string;\n    formInputText: string;\n    formInputDisabledText: string;\n    formInputPlaceholderText: string;\n    formValidationMessageText: string;\n    formValidationMessageBg: string;\n  };\n  shadows: {\n    listItem: string;\n  };\n  visualization: ThemeVisualizationColors;\n}\n","export interface Threshold {\n  value: number;\n  color: string;\n  /**\n   *  Warning, Error, LowLow, Low, OK, High, HighHigh etc\n   */\n  state?: string;\n}\n\n/**\n *  Display mode\n */\nexport enum ThresholdsMode {\n  Absolute = 'absolute',\n  /**\n   *  between 0 and 1 (based on min/max)\n   */\n  Percentage = 'percentage',\n}\n\n/**\n *  Config that is passed to the ThresholdsEditor\n */\nexport interface ThresholdsConfig {\n  mode: ThresholdsMode;\n\n  /**\n   *  Must be sorted by 'value', first value is always -Infinity\n   */\n  steps: Threshold[];\n}\n","/**\n * @alpha\n */\nexport enum MappingType {\n  ValueToText = 'value', // was 1\n  RangeToText = 'range', // was 2\n  RegexToText = 'regex',\n  SpecialValue = 'special',\n}\n\n/**\n * @alpha\n */\nexport interface ValueMappingResult {\n  text?: string;\n  color?: string;\n  icon?: string;\n  index?: number;\n}\n\n/**\n * @alpha\n */\ninterface BaseValueMap<T> {\n  type: MappingType;\n  options: T;\n}\n\n/**\n * @alpha\n */\nexport interface ValueMap extends BaseValueMap<Record<string, ValueMappingResult>> {\n  type: MappingType.ValueToText;\n}\n\n/**\n * @alpha\n */\nexport interface RangeMapOptions {\n  from: number | null; // changed from string\n  to: number | null;\n  result: ValueMappingResult;\n}\n\n/**\n * @alpha\n */\nexport interface RangeMap extends BaseValueMap<RangeMapOptions> {\n  type: MappingType.RangeToText;\n}\n\n/**\n * @alpha\n */\nexport interface RegexMapOptions {\n  pattern: string;\n  result: ValueMappingResult;\n}\n\n/**\n * @alpha\n */\nexport interface RegexMap extends BaseValueMap<RegexMapOptions> {\n  type: MappingType.RegexToText;\n}\n\n/**\n * @alpha\n */\nexport interface SpecialValueOptions {\n  match: SpecialValueMatch;\n  result: ValueMappingResult;\n}\n\n/**\n * @alpha\n */\nexport enum SpecialValueMatch {\n  True = 'true',\n  False = 'false',\n  Null = 'null',\n  NaN = 'nan',\n  NullAndNaN = 'null+nan',\n  Empty = 'empty',\n}\n\n/**\n * @alpha\n */\nexport interface SpecialValueMap extends BaseValueMap<SpecialValueOptions> {\n  type: MappingType.SpecialValue;\n}\n\n/**\n * @alpha\n */\nexport type ValueMapping = ValueMap | RangeMap | RegexMap | SpecialValueMap;\n","import { PluginState } from '../types';\nimport { SelectableValue } from '../types/select';\n\nexport interface RegistryItem {\n  id: string; // Unique Key -- saved in configs\n  name: string; // Display Name, can change without breaking configs\n  description?: string;\n  aliasIds?: string[]; // when the ID changes, we may want backwards compatibility ('current' => 'last')\n\n  /**\n   * Some extensions should not be user selectable\n   *  like: 'all' and 'any' matchers;\n   */\n  excludeFromPicker?: boolean;\n\n  /**\n   * Optional feature state\n   */\n  state?: PluginState;\n}\n\nexport interface RegistryItemWithOptions<TOptions = any> extends RegistryItem {\n  /**\n   * Convert the options to a string\n   */\n  getOptionsDisplayText?: (options: TOptions) => string;\n\n  /**\n   * Default options used if nothing else is specified\n   */\n  defaultOptions?: TOptions;\n}\n\ninterface RegistrySelectInfo {\n  options: Array<SelectableValue<string>>;\n  current: Array<SelectableValue<string>>;\n}\n\nexport class Registry<T extends RegistryItem> {\n  private ordered: T[] = [];\n  private byId = new Map<string, T>();\n  private initialized = false;\n\n  constructor(private init?: () => T[]) {}\n\n  setInit = (init: () => T[]) => {\n    if (this.initialized) {\n      throw new Error('Registry already initialized');\n    }\n    this.init = init;\n  };\n\n  getIfExists(id: string | undefined): T | undefined {\n    if (!this.initialized) {\n      this.initialize();\n    }\n\n    if (id) {\n      return this.byId.get(id);\n    }\n\n    return undefined;\n  }\n\n  private initialize() {\n    if (this.init) {\n      for (const ext of this.init()) {\n        this.register(ext);\n      }\n    }\n    this.sort();\n    this.initialized = true;\n  }\n\n  get(id: string): T {\n    const v = this.getIfExists(id);\n    if (!v) {\n      throw new Error(`\"${id}\" not found in: ${this.list().map((v) => v.id)}`);\n    }\n    return v;\n  }\n\n  selectOptions(current?: string[], filter?: (ext: T) => boolean): RegistrySelectInfo {\n    if (!this.initialized) {\n      this.initialize();\n    }\n\n    const select = {\n      options: [],\n      current: [],\n    } as RegistrySelectInfo;\n\n    const currentOptions: Record<string, SelectableValue<string>> = {};\n    if (current) {\n      for (const id of current) {\n        currentOptions[id] = {};\n      }\n    }\n\n    for (const ext of this.ordered) {\n      if (ext.excludeFromPicker) {\n        continue;\n      }\n      if (filter && !filter(ext)) {\n        continue;\n      }\n\n      const option = {\n        value: ext.id,\n        label: ext.name,\n        description: ext.description,\n      };\n\n      if (ext.state === PluginState.alpha) {\n        option.label += ' (alpha)';\n      }\n\n      select.options.push(option);\n      if (currentOptions[ext.id]) {\n        currentOptions[ext.id] = option;\n      }\n    }\n\n    if (current) {\n      // this makes sure we preserve the order of ids\n      select.current = Object.values(currentOptions);\n    }\n\n    return select;\n  }\n\n  /**\n   * Return a list of values by ID, or all values if not specified\n   */\n  list(ids?: any[]): T[] {\n    if (!this.initialized) {\n      this.initialize();\n    }\n\n    if (ids) {\n      const found: T[] = [];\n      for (const id of ids) {\n        const v = this.getIfExists(id);\n        if (v) {\n          found.push(v);\n        }\n      }\n      return found;\n    }\n\n    return this.ordered;\n  }\n\n  isEmpty(): boolean {\n    if (!this.initialized) {\n      this.initialize();\n    }\n\n    return this.ordered.length === 0;\n  }\n\n  register(ext: T) {\n    if (this.byId.has(ext.id)) {\n      throw new Error('Duplicate Key:' + ext.id);\n    }\n\n    this.byId.set(ext.id, ext);\n    this.ordered.push(ext);\n\n    if (ext.aliasIds) {\n      for (const alias of ext.aliasIds) {\n        if (!this.byId.has(alias)) {\n          this.byId.set(alias, ext);\n        }\n      }\n    }\n\n    if (this.initialized) {\n      this.sort();\n    }\n  }\n\n  private sort() {\n    // TODO sort the list\n  }\n}\n","import { toNumber } from 'lodash';\n\n/**\n * Will return any value as a number or NaN\n *\n * @internal\n * */\nexport function anyToNumber(value: any): number {\n  if (typeof value === 'number') {\n    return value;\n  }\n\n  if (value === '' || value === null || value === undefined || Array.isArray(value)) {\n    return NaN; // lodash calls them 0\n  }\n\n  if (typeof value === 'boolean') {\n    return value ? 1 : 0;\n  }\n\n  return toNumber(value);\n}\n","import { RegistryItem, Registry } from './Registry';\n\nexport enum BinaryOperationID {\n  Add = '+',\n  Subtract = '-',\n  Divide = '/',\n  Multiply = '*',\n}\n\nexport type BinaryOperation = (left: number, right: number) => number;\n\ninterface BinaryOperatorInfo extends RegistryItem {\n  operation: BinaryOperation;\n}\n\nexport const binaryOperators = new Registry<BinaryOperatorInfo>(() => {\n  return [\n    {\n      id: BinaryOperationID.Add,\n      name: 'Add',\n      operation: (a: number, b: number) => a + b,\n    },\n    {\n      id: BinaryOperationID.Subtract,\n      name: 'Subtract',\n      operation: (a: number, b: number) => a - b,\n    },\n    {\n      id: BinaryOperationID.Multiply,\n      name: 'Multiply',\n      operation: (a: number, b: number) => a * b,\n    },\n    {\n      id: BinaryOperationID.Divide,\n      name: 'Divide',\n      operation: (a: number, b: number) => a / b,\n    },\n  ];\n});\n","import { guessFieldTypeFromValue } from '../dataframe/processDataFrame';\nimport { Field, FieldType } from '../types/dataFrame';\n\nexport function makeFieldParser(value: any, field: Field): (value: string) => any {\n  if (!field.type) {\n    if (field.name === 'time' || field.name === 'Time') {\n      field.type = FieldType.time;\n    } else {\n      field.type = guessFieldTypeFromValue(value);\n    }\n  }\n\n  if (field.type === FieldType.number) {\n    return (value: string) => {\n      return parseFloat(value);\n    };\n  }\n\n  // Will convert anything that starts with \"T\" to true\n  if (field.type === FieldType.boolean) {\n    return (value: string) => {\n      return !(value[0] === 'F' || value[0] === 'f' || value[0] === '0');\n    };\n  }\n\n  // Just pass the string back\n  return (value: string) => value;\n}\n","/**\n * @beta\n * Proxies a ES6 class so that it can be used as a base class for an ES5 class\n */\nexport function makeClassES5Compatible<T>(ES6Class: T): T {\n  return new Proxy(ES6Class as any, {\n    // ES5 code will call it like a function using super\n    apply(target, self, argumentsList) {\n      if (typeof Reflect === 'undefined' || !Reflect.construct) {\n        alert('Browser is too old');\n      }\n\n      return Reflect.construct(target, argumentsList, self.constructor);\n    },\n  }) as unknown as T;\n}\n","import { DecimalCount } from '../types/displayValue';\n\nimport { toFixed, FormattedValue } from './valueFormats';\n\nexport function toPercent(size: number, decimals: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n  return { text: toFixed(size, decimals), suffix: '%' };\n}\n\nexport function toPercentUnit(size: number, decimals: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n  return { text: toFixed(100 * size, decimals), suffix: '%' };\n}\n\nexport function toHex0x(value: number, decimals: DecimalCount): FormattedValue {\n  if (value == null) {\n    return { text: '' };\n  }\n  const asHex = toHex(value, decimals);\n  if (asHex.text.substring(0, 1) === '-') {\n    asHex.text = '-0x' + asHex.text.substring(1);\n  } else {\n    asHex.text = '0x' + asHex.text;\n  }\n  return asHex;\n}\n\nexport function toHex(value: number, decimals: DecimalCount): FormattedValue {\n  if (value == null) {\n    return { text: '' };\n  }\n  return {\n    text: parseFloat(toFixed(value, decimals)).toString(16).toUpperCase(),\n  };\n}\n\nexport function sci(value: number, decimals: DecimalCount): FormattedValue {\n  if (value == null) {\n    return { text: '' };\n  }\n  return { text: value.toExponential(decimals as number) };\n}\n","import { toHex, sci, toHex0x, toPercent, toPercentUnit } from './arithmeticFormatters';\nimport {\n  dateTimeAsIso,\n  dateTimeAsIsoNoDateIfToday,\n  dateTimeAsUS,\n  dateTimeAsUSNoDateIfToday,\n  getDateTimeAsLocalFormat,\n  getDateTimeAsLocalFormatNoDateIfToday,\n  dateTimeFromNow,\n  toClockMilliseconds,\n  toClockSeconds,\n  toDays,\n  toDurationInDaysHoursMinutesSeconds,\n  toDurationInHoursMinutesSeconds,\n  toDurationInMilliseconds,\n  toDurationInSeconds,\n  toHours,\n  toMicroSeconds,\n  toMilliSeconds,\n  toMinutes,\n  toNanoSeconds,\n  toSeconds,\n  toTimeTicks,\n  dateTimeSystemFormatter,\n} from './dateTimeFormatters';\nimport { binaryPrefix, currency, SIPrefix } from './symbolFormatters';\nimport {\n  locale,\n  scaledUnits,\n  simpleCountUnit,\n  toFixedUnit,\n  ValueFormatCategory,\n  stringFormater,\n  booleanValueFormatter,\n} from './valueFormats';\n\nexport const getCategories = (): ValueFormatCategory[] => [\n  {\n    name: 'Misc',\n    formats: [\n      { name: 'none', id: 'none', fn: toFixedUnit('') },\n      { name: 'String', id: 'string', fn: stringFormater },\n      {\n        name: 'short',\n        id: 'short',\n        fn: scaledUnits(1000, ['', ' K', ' Mil', ' Bil', ' Tri', ' Quadr', ' Quint', ' Sext', ' Sept']),\n      },\n      { name: 'Percent (0-100)', id: 'percent', fn: toPercent },\n      { name: 'Percent (0.0-1.0)', id: 'percentunit', fn: toPercentUnit },\n      { name: 'Humidity (%H)', id: 'humidity', fn: toFixedUnit('%H') },\n      { name: 'Decibel', id: 'dB', fn: toFixedUnit('dB') },\n      { name: 'Hexadecimal (0x)', id: 'hex0x', fn: toHex0x },\n      { name: 'Hexadecimal', id: 'hex', fn: toHex },\n      { name: 'Scientific notation', id: 'sci', fn: sci },\n      { name: 'Locale format', id: 'locale', fn: locale },\n      { name: 'Pixels', id: 'pixel', fn: toFixedUnit('px') },\n    ],\n  },\n  {\n    name: 'Acceleration',\n    formats: [\n      { name: 'Meters/sec', id: 'accMS2', fn: toFixedUnit('m/sec') },\n      { name: 'Feet/sec', id: 'accFS2', fn: toFixedUnit('f/sec') },\n      { name: 'G unit', id: 'accG', fn: toFixedUnit('g') },\n    ],\n  },\n  {\n    name: 'Angle',\n    formats: [\n      { name: 'Degrees ()', id: 'degree', fn: toFixedUnit('') },\n      { name: 'Radians', id: 'radian', fn: toFixedUnit('rad') },\n      { name: 'Gradian', id: 'grad', fn: toFixedUnit('grad') },\n      { name: 'Arc Minutes', id: 'arcmin', fn: toFixedUnit('arcmin') },\n      { name: 'Arc Seconds', id: 'arcsec', fn: toFixedUnit('arcsec') },\n    ],\n  },\n  {\n    name: 'Area',\n    formats: [\n      { name: 'Square Meters (m)', id: 'areaM2', fn: toFixedUnit('m') },\n      { name: 'Square Feet (ft)', id: 'areaF2', fn: toFixedUnit('ft') },\n      { name: 'Square Miles (mi)', id: 'areaMI2', fn: toFixedUnit('mi') },\n    ],\n  },\n  {\n    name: 'Computation',\n    formats: [\n      { name: 'FLOP/s', id: 'flops', fn: SIPrefix('FLOPS') },\n      { name: 'MFLOP/s', id: 'mflops', fn: SIPrefix('FLOPS', 2) },\n      { name: 'GFLOP/s', id: 'gflops', fn: SIPrefix('FLOPS', 3) },\n      { name: 'TFLOP/s', id: 'tflops', fn: SIPrefix('FLOPS', 4) },\n      { name: 'PFLOP/s', id: 'pflops', fn: SIPrefix('FLOPS', 5) },\n      { name: 'EFLOP/s', id: 'eflops', fn: SIPrefix('FLOPS', 6) },\n      { name: 'ZFLOP/s', id: 'zflops', fn: SIPrefix('FLOPS', 7) },\n      { name: 'YFLOP/s', id: 'yflops', fn: SIPrefix('FLOPS', 8) },\n    ],\n  },\n  {\n    name: 'Concentration',\n    formats: [\n      { name: 'parts-per-million (ppm)', id: 'ppm', fn: toFixedUnit('ppm') },\n      { name: 'parts-per-billion (ppb)', id: 'conppb', fn: toFixedUnit('ppb') },\n      { name: 'nanogram per cubic meter (ng/m)', id: 'conngm3', fn: toFixedUnit('ng/m') },\n      { name: 'nanogram per normal cubic meter (ng/Nm)', id: 'conngNm3', fn: toFixedUnit('ng/Nm') },\n      { name: 'microgram per cubic meter (g/m)', id: 'congm3', fn: toFixedUnit('g/m') },\n      { name: 'microgram per normal cubic meter (g/Nm)', id: 'congNm3', fn: toFixedUnit('g/Nm') },\n      { name: 'milligram per cubic meter (mg/m)', id: 'conmgm3', fn: toFixedUnit('mg/m') },\n      { name: 'milligram per normal cubic meter (mg/Nm)', id: 'conmgNm3', fn: toFixedUnit('mg/Nm') },\n      { name: 'gram per cubic meter (g/m)', id: 'congm3', fn: toFixedUnit('g/m') },\n      { name: 'gram per normal cubic meter (g/Nm)', id: 'congNm3', fn: toFixedUnit('g/Nm') },\n      { name: 'milligrams per decilitre (mg/dL)', id: 'conmgdL', fn: toFixedUnit('mg/dL') },\n      { name: 'millimoles per litre (mmol/L)', id: 'conmmolL', fn: toFixedUnit('mmol/L') },\n    ],\n  },\n  {\n    name: 'Currency',\n    formats: [\n      { name: 'Dollars ($)', id: 'currencyUSD', fn: currency('$') },\n      { name: 'Pounds ()', id: 'currencyGBP', fn: currency('') },\n      { name: 'Euro ()', id: 'currencyEUR', fn: currency('') },\n      { name: 'Yen ()', id: 'currencyJPY', fn: currency('') },\n      { name: 'Rubles ()', id: 'currencyRUB', fn: currency('') },\n      { name: 'Hryvnias ()', id: 'currencyUAH', fn: currency('') },\n      { name: 'Real (R$)', id: 'currencyBRL', fn: currency('R$') },\n      { name: 'Danish Krone (kr)', id: 'currencyDKK', fn: currency('kr', true) },\n      { name: 'Icelandic Krna (kr)', id: 'currencyISK', fn: currency('kr', true) },\n      { name: 'Norwegian Krone (kr)', id: 'currencyNOK', fn: currency('kr', true) },\n      { name: 'Swedish Krona (kr)', id: 'currencySEK', fn: currency('kr', true) },\n      { name: 'Czech koruna (czk)', id: 'currencyCZK', fn: currency('czk') },\n      { name: 'Swiss franc (CHF)', id: 'currencyCHF', fn: currency('CHF') },\n      { name: 'Polish Zoty (PLN)', id: 'currencyPLN', fn: currency('PLN') },\n      { name: 'Bitcoin ()', id: 'currencyBTC', fn: currency('') },\n      { name: 'Milli Bitcoin ()', id: 'currencymBTC', fn: currency('mBTC') },\n      { name: 'Micro Bitcoin ()', id: 'currencyBTC', fn: currency('BTC') },\n      { name: 'South African Rand (R)', id: 'currencyZAR', fn: currency('R') },\n      { name: 'Indian Rupee ()', id: 'currencyINR', fn: currency('') },\n      { name: 'South Korean Won ()', id: 'currencyKRW', fn: currency('') },\n      { name: 'Indonesian Rupiah (Rp)', id: 'currencyIDR', fn: currency('Rp') },\n      { name: 'Philippine Peso (PHP)', id: 'currencyPHP', fn: currency('PHP') },\n      { name: 'Vietnamese Dong (VND)', id: 'currencyVND', fn: currency('', true) },\n    ],\n  },\n  {\n    name: 'Data',\n    formats: [\n      { name: 'bytes(IEC)', id: 'bytes', fn: binaryPrefix('B') },\n      { name: 'bytes(SI)', id: 'decbytes', fn: SIPrefix('B') },\n      { name: 'bits(IEC)', id: 'bits', fn: binaryPrefix('b') },\n      { name: 'bits(SI)', id: 'decbits', fn: SIPrefix('b') },\n      { name: 'kibibytes', id: 'kbytes', fn: binaryPrefix('B', 1) },\n      { name: 'kilobytes', id: 'deckbytes', fn: SIPrefix('B', 1) },\n      { name: 'mebibytes', id: 'mbytes', fn: binaryPrefix('B', 2) },\n      { name: 'megabytes', id: 'decmbytes', fn: SIPrefix('B', 2) },\n      { name: 'gibibytes', id: 'gbytes', fn: binaryPrefix('B', 3) },\n      { name: 'gigabytes', id: 'decgbytes', fn: SIPrefix('B', 3) },\n      { name: 'tebibytes', id: 'tbytes', fn: binaryPrefix('B', 4) },\n      { name: 'terabytes', id: 'dectbytes', fn: SIPrefix('B', 4) },\n      { name: 'pebibytes', id: 'pbytes', fn: binaryPrefix('B', 5) },\n      { name: 'petabytes', id: 'decpbytes', fn: SIPrefix('B', 5) },\n    ],\n  },\n  {\n    name: 'Data rate',\n    formats: [\n      { name: 'packets/sec', id: 'pps', fn: SIPrefix('p/s') },\n      { name: 'bytes/sec(IEC)', id: 'binBps', fn: binaryPrefix('B/s') },\n      { name: 'bytes/sec(SI)', id: 'Bps', fn: SIPrefix('B/s') },\n      { name: 'bits/sec(IEC)', id: 'binbps', fn: binaryPrefix('b/s') },\n      { name: 'bits/sec(SI)', id: 'bps', fn: SIPrefix('b/s') },\n      { name: 'kibibytes/sec', id: 'KiBs', fn: binaryPrefix('B/s', 1) },\n      { name: 'kibibits/sec', id: 'Kibits', fn: binaryPrefix('b/s', 1) },\n      { name: 'kilobytes/sec', id: 'KBs', fn: SIPrefix('B/s', 1) },\n      { name: 'kilobits/sec', id: 'Kbits', fn: SIPrefix('b/s', 1) },\n      { name: 'mebibytes/sec', id: 'MiBs', fn: binaryPrefix('B/s', 2) },\n      { name: 'mebibits/sec', id: 'Mibits', fn: binaryPrefix('b/s', 2) },\n      { name: 'megabytes/sec', id: 'MBs', fn: SIPrefix('B/s', 2) },\n      { name: 'megabits/sec', id: 'Mbits', fn: SIPrefix('b/s', 2) },\n      { name: 'gibibytes/sec', id: 'GiBs', fn: binaryPrefix('B/s', 3) },\n      { name: 'gibibits/sec', id: 'Gibits', fn: binaryPrefix('b/s', 3) },\n      { name: 'gigabytes/sec', id: 'GBs', fn: SIPrefix('B/s', 3) },\n      { name: 'gigabits/sec', id: 'Gbits', fn: SIPrefix('b/s', 3) },\n      { name: 'tebibytes/sec', id: 'TiBs', fn: binaryPrefix('B/s', 4) },\n      { name: 'tebibits/sec', id: 'Tibits', fn: binaryPrefix('b/s', 4) },\n      { name: 'terabytes/sec', id: 'TBs', fn: SIPrefix('B/s', 4) },\n      { name: 'terabits/sec', id: 'Tbits', fn: SIPrefix('b/s', 4) },\n      { name: 'pebibytes/sec', id: 'PiBs', fn: binaryPrefix('B/s', 5) },\n      { name: 'pebibits/sec', id: 'Pibits', fn: binaryPrefix('b/s', 5) },\n      { name: 'petabytes/sec', id: 'PBs', fn: SIPrefix('B/s', 5) },\n      { name: 'petabits/sec', id: 'Pbits', fn: SIPrefix('b/s', 5) },\n    ],\n  },\n  {\n    name: 'Date & time',\n    formats: [\n      { name: 'Datetime ISO', id: 'dateTimeAsIso', fn: dateTimeAsIso },\n      { name: 'Datetime ISO (No date if today)', id: 'dateTimeAsIsoNoDateIfToday', fn: dateTimeAsIsoNoDateIfToday },\n      { name: 'Datetime US', id: 'dateTimeAsUS', fn: dateTimeAsUS },\n      { name: 'Datetime US (No date if today)', id: 'dateTimeAsUSNoDateIfToday', fn: dateTimeAsUSNoDateIfToday },\n      { name: 'Datetime local', id: 'dateTimeAsLocal', fn: getDateTimeAsLocalFormat() },\n      {\n        name: 'Datetime local (No date if today)',\n        id: 'dateTimeAsLocalNoDateIfToday',\n        fn: getDateTimeAsLocalFormatNoDateIfToday(),\n      },\n      { name: 'Datetime default', id: 'dateTimeAsSystem', fn: dateTimeSystemFormatter },\n      { name: 'From Now', id: 'dateTimeFromNow', fn: dateTimeFromNow },\n    ],\n  },\n  {\n    name: 'Energy',\n    formats: [\n      { name: 'Watt (W)', id: 'watt', fn: SIPrefix('W') },\n      { name: 'Kilowatt (kW)', id: 'kwatt', fn: SIPrefix('W', 1) },\n      { name: 'Megawatt (MW)', id: 'megwatt', fn: SIPrefix('W', 2) },\n      { name: 'Gigawatt (GW)', id: 'gwatt', fn: SIPrefix('W', 3) },\n      { name: 'Milliwatt (mW)', id: 'mwatt', fn: SIPrefix('W', -1) },\n      { name: 'Watt per square meter (W/m)', id: 'Wm2', fn: toFixedUnit('W/m') },\n      { name: 'Volt-Ampere (VA)', id: 'voltamp', fn: SIPrefix('VA') },\n      { name: 'Kilovolt-Ampere (kVA)', id: 'kvoltamp', fn: SIPrefix('VA', 1) },\n      { name: 'Volt-Ampere reactive (VAr)', id: 'voltampreact', fn: SIPrefix('VAr') },\n      { name: 'Kilovolt-Ampere reactive (kVAr)', id: 'kvoltampreact', fn: SIPrefix('VAr', 1) },\n      { name: 'Watt-hour (Wh)', id: 'watth', fn: SIPrefix('Wh') },\n      { name: 'Watt-hour per Kilogram (Wh/kg)', id: 'watthperkg', fn: SIPrefix('Wh/kg') },\n      { name: 'Kilowatt-hour (kWh)', id: 'kwatth', fn: SIPrefix('Wh', 1) },\n      { name: 'Kilowatt-min (kWm)', id: 'kwattm', fn: SIPrefix('W-Min', 1) },\n      { name: 'Ampere-hour (Ah)', id: 'amph', fn: SIPrefix('Ah') },\n      { name: 'Kiloampere-hour (kAh)', id: 'kamph', fn: SIPrefix('Ah', 1) },\n      { name: 'Milliampere-hour (mAh)', id: 'mamph', fn: SIPrefix('Ah', -1) },\n      { name: 'Joule (J)', id: 'joule', fn: SIPrefix('J') },\n      { name: 'Electron volt (eV)', id: 'ev', fn: SIPrefix('eV') },\n      { name: 'Ampere (A)', id: 'amp', fn: SIPrefix('A') },\n      { name: 'Kiloampere (kA)', id: 'kamp', fn: SIPrefix('A', 1) },\n      { name: 'Milliampere (mA)', id: 'mamp', fn: SIPrefix('A', -1) },\n      { name: 'Volt (V)', id: 'volt', fn: SIPrefix('V') },\n      { name: 'Kilovolt (kV)', id: 'kvolt', fn: SIPrefix('V', 1) },\n      { name: 'Millivolt (mV)', id: 'mvolt', fn: SIPrefix('V', -1) },\n      { name: 'Decibel-milliwatt (dBm)', id: 'dBm', fn: SIPrefix('dBm') },\n      { name: 'Ohm ()', id: 'ohm', fn: SIPrefix('') },\n      { name: 'Kiloohm (k)', id: 'kohm', fn: SIPrefix('', 1) },\n      { name: 'Megaohm (M)', id: 'Mohm', fn: SIPrefix('', 2) },\n      { name: 'Farad (F)', id: 'farad', fn: SIPrefix('F') },\n      { name: 'Microfarad (F)', id: 'farad', fn: SIPrefix('F', -2) },\n      { name: 'Nanofarad (nF)', id: 'nfarad', fn: SIPrefix('F', -3) },\n      { name: 'Picofarad (pF)', id: 'pfarad', fn: SIPrefix('F', -4) },\n      { name: 'Femtofarad (fF)', id: 'ffarad', fn: SIPrefix('F', -5) },\n      { name: 'Henry (H)', id: 'henry', fn: SIPrefix('H') },\n      { name: 'Millihenry (mH)', id: 'mhenry', fn: SIPrefix('H', -1) },\n      { name: 'Microhenry (H)', id: 'henry', fn: SIPrefix('H', -2) },\n      { name: 'Lumens (Lm)', id: 'lumens', fn: SIPrefix('Lm') },\n    ],\n  },\n  {\n    name: 'Flow',\n    formats: [\n      { name: 'Gallons/min (gpm)', id: 'flowgpm', fn: toFixedUnit('gpm') },\n      { name: 'Cubic meters/sec (cms)', id: 'flowcms', fn: toFixedUnit('cms') },\n      { name: 'Cubic feet/sec (cfs)', id: 'flowcfs', fn: toFixedUnit('cfs') },\n      { name: 'Cubic feet/min (cfm)', id: 'flowcfm', fn: toFixedUnit('cfm') },\n      { name: 'Litre/hour', id: 'litreh', fn: toFixedUnit('L/h') },\n      { name: 'Litre/min (L/min)', id: 'flowlpm', fn: toFixedUnit('L/min') },\n      { name: 'milliLitre/min (mL/min)', id: 'flowmlpm', fn: toFixedUnit('mL/min') },\n      { name: 'Lux (lx)', id: 'lux', fn: toFixedUnit('lux') },\n    ],\n  },\n  {\n    name: 'Force',\n    formats: [\n      { name: 'Newton-meters (Nm)', id: 'forceNm', fn: SIPrefix('Nm') },\n      { name: 'Kilonewton-meters (kNm)', id: 'forcekNm', fn: SIPrefix('Nm', 1) },\n      { name: 'Newtons (N)', id: 'forceN', fn: SIPrefix('N') },\n      { name: 'Kilonewtons (kN)', id: 'forcekN', fn: SIPrefix('N', 1) },\n    ],\n  },\n  {\n    name: 'Hash rate',\n    formats: [\n      { name: 'hashes/sec', id: 'Hs', fn: SIPrefix('H/s') },\n      { name: 'kilohashes/sec', id: 'KHs', fn: SIPrefix('H/s', 1) },\n      { name: 'megahashes/sec', id: 'MHs', fn: SIPrefix('H/s', 2) },\n      { name: 'gigahashes/sec', id: 'GHs', fn: SIPrefix('H/s', 3) },\n      { name: 'terahashes/sec', id: 'THs', fn: SIPrefix('H/s', 4) },\n      { name: 'petahashes/sec', id: 'PHs', fn: SIPrefix('H/s', 5) },\n      { name: 'exahashes/sec', id: 'EHs', fn: SIPrefix('H/s', 6) },\n    ],\n  },\n  {\n    name: 'Mass',\n    formats: [\n      { name: 'milligram (mg)', id: 'massmg', fn: SIPrefix('g', -1) },\n      { name: 'gram (g)', id: 'massg', fn: SIPrefix('g') },\n      { name: 'pound (lb)', id: 'masslb', fn: toFixedUnit('lb') },\n      { name: 'kilogram (kg)', id: 'masskg', fn: SIPrefix('g', 1) },\n      { name: 'metric ton (t)', id: 'masst', fn: toFixedUnit('t') },\n    ],\n  },\n  {\n    name: 'Length',\n    formats: [\n      { name: 'millimeter (mm)', id: 'lengthmm', fn: SIPrefix('m', -1) },\n      { name: 'inch (in)', id: 'lengthin', fn: toFixedUnit('in') },\n      { name: 'feet (ft)', id: 'lengthft', fn: toFixedUnit('ft') },\n      { name: 'meter (m)', id: 'lengthm', fn: SIPrefix('m') },\n      { name: 'kilometer (km)', id: 'lengthkm', fn: SIPrefix('m', 1) },\n      { name: 'mile (mi)', id: 'lengthmi', fn: toFixedUnit('mi') },\n    ],\n  },\n  {\n    name: 'Pressure',\n    formats: [\n      { name: 'Millibars', id: 'pressurembar', fn: SIPrefix('bar', -1) },\n      { name: 'Bars', id: 'pressurebar', fn: SIPrefix('bar') },\n      { name: 'Kilobars', id: 'pressurekbar', fn: SIPrefix('bar', 1) },\n      { name: 'Pascals', id: 'pressurepa', fn: SIPrefix('Pa') },\n      { name: 'Hectopascals', id: 'pressurehpa', fn: toFixedUnit('hPa') },\n      { name: 'Kilopascals', id: 'pressurekpa', fn: toFixedUnit('kPa') },\n      { name: 'Inches of mercury', id: 'pressurehg', fn: toFixedUnit('\"Hg') },\n      { name: 'PSI', id: 'pressurepsi', fn: scaledUnits(1000, ['psi', 'ksi', 'Mpsi']) },\n    ],\n  },\n  {\n    name: 'Radiation',\n    formats: [\n      { name: 'Becquerel (Bq)', id: 'radbq', fn: SIPrefix('Bq') },\n      { name: 'curie (Ci)', id: 'radci', fn: SIPrefix('Ci') },\n      { name: 'Gray (Gy)', id: 'radgy', fn: SIPrefix('Gy') },\n      { name: 'rad', id: 'radrad', fn: SIPrefix('rad') },\n      { name: 'Sievert (Sv)', id: 'radsv', fn: SIPrefix('Sv') },\n      { name: 'milliSievert (mSv)', id: 'radmsv', fn: SIPrefix('Sv', -1) },\n      { name: 'microSievert (Sv)', id: 'radusv', fn: SIPrefix('Sv', -2) },\n      { name: 'rem', id: 'radrem', fn: SIPrefix('rem') },\n      { name: 'Exposure (C/kg)', id: 'radexpckg', fn: SIPrefix('C/kg') },\n      { name: 'roentgen (R)', id: 'radr', fn: SIPrefix('R') },\n      { name: 'Sievert/hour (Sv/h)', id: 'radsvh', fn: SIPrefix('Sv/h') },\n      { name: 'milliSievert/hour (mSv/h)', id: 'radmsvh', fn: SIPrefix('Sv/h', -1) },\n      { name: 'microSievert/hour (Sv/h)', id: 'radusvh', fn: SIPrefix('Sv/h', -2) },\n    ],\n  },\n  {\n    name: 'Rotational Speed',\n    formats: [\n      { name: 'Revolutions per minute (rpm)', id: 'rotrpm', fn: toFixedUnit('rpm') },\n      { name: 'Hertz (Hz)', id: 'rothz', fn: SIPrefix('Hz') },\n      { name: 'Radians per second (rad/s)', id: 'rotrads', fn: toFixedUnit('rad/s') },\n      { name: 'Degrees per second (/s)', id: 'rotdegs', fn: toFixedUnit('/s') },\n    ],\n  },\n  {\n    name: 'Temperature',\n    formats: [\n      { name: 'Celsius (C)', id: 'celsius', fn: toFixedUnit('C') },\n      { name: 'Fahrenheit (F)', id: 'fahrenheit', fn: toFixedUnit('F') },\n      { name: 'Kelvin (K)', id: 'kelvin', fn: toFixedUnit('K') },\n    ],\n  },\n  {\n    name: 'Time',\n    formats: [\n      { name: 'Hertz (1/s)', id: 'hertz', fn: SIPrefix('Hz') },\n      { name: 'nanoseconds (ns)', id: 'ns', fn: toNanoSeconds },\n      { name: 'microseconds (s)', id: 's', fn: toMicroSeconds },\n      { name: 'milliseconds (ms)', id: 'ms', fn: toMilliSeconds },\n      { name: 'seconds (s)', id: 's', fn: toSeconds },\n      { name: 'minutes (m)', id: 'm', fn: toMinutes },\n      { name: 'hours (h)', id: 'h', fn: toHours },\n      { name: 'days (d)', id: 'd', fn: toDays },\n      { name: 'duration (ms)', id: 'dtdurationms', fn: toDurationInMilliseconds },\n      { name: 'duration (s)', id: 'dtdurations', fn: toDurationInSeconds },\n      { name: 'duration (hh:mm:ss)', id: 'dthms', fn: toDurationInHoursMinutesSeconds },\n      { name: 'duration (d hh:mm:ss)', id: 'dtdhms', fn: toDurationInDaysHoursMinutesSeconds },\n      { name: 'Timeticks (s/100)', id: 'timeticks', fn: toTimeTicks },\n      { name: 'clock (ms)', id: 'clockms', fn: toClockMilliseconds },\n      { name: 'clock (s)', id: 'clocks', fn: toClockSeconds },\n    ],\n  },\n  {\n    name: 'Throughput',\n    formats: [\n      { name: 'counts/sec (cps)', id: 'cps', fn: simpleCountUnit('c/s') },\n      { name: 'ops/sec (ops)', id: 'ops', fn: simpleCountUnit('ops/s') },\n      { name: 'requests/sec (rps)', id: 'reqps', fn: simpleCountUnit('req/s') },\n      { name: 'reads/sec (rps)', id: 'rps', fn: simpleCountUnit('rd/s') },\n      { name: 'writes/sec (wps)', id: 'wps', fn: simpleCountUnit('wr/s') },\n      { name: 'I/O ops/sec (iops)', id: 'iops', fn: simpleCountUnit('io/s') },\n      { name: 'counts/min (cpm)', id: 'cpm', fn: simpleCountUnit('c/m') },\n      { name: 'ops/min (opm)', id: 'opm', fn: simpleCountUnit('ops/m') },\n      { name: 'reads/min (rpm)', id: 'rpm', fn: simpleCountUnit('rd/m') },\n      { name: 'writes/min (wpm)', id: 'wpm', fn: simpleCountUnit('wr/m') },\n    ],\n  },\n  {\n    name: 'Velocity',\n    formats: [\n      { name: 'meters/second (m/s)', id: 'velocityms', fn: toFixedUnit('m/s') },\n      { name: 'kilometers/hour (km/h)', id: 'velocitykmh', fn: toFixedUnit('km/h') },\n      { name: 'miles/hour (mph)', id: 'velocitymph', fn: toFixedUnit('mph') },\n      { name: 'knot (kn)', id: 'velocityknot', fn: toFixedUnit('kn') },\n    ],\n  },\n  {\n    name: 'Volume',\n    formats: [\n      { name: 'millilitre (mL)', id: 'mlitre', fn: SIPrefix('L', -1) },\n      { name: 'litre (L)', id: 'litre', fn: SIPrefix('L') },\n      { name: 'cubic meter', id: 'm3', fn: toFixedUnit('m') },\n      { name: 'Normal cubic meter', id: 'Nm3', fn: toFixedUnit('Nm') },\n      { name: 'cubic decimeter', id: 'dm3', fn: toFixedUnit('dm') },\n      { name: 'gallons', id: 'gallons', fn: toFixedUnit('gal') },\n    ],\n  },\n  {\n    name: 'Boolean',\n    formats: [\n      { name: 'True / False', id: 'bool', fn: booleanValueFormatter('True', 'False') },\n      { name: 'Yes / No', id: 'bool_yes_no', fn: booleanValueFormatter('Yes', 'No') },\n      { name: 'On / Off', id: 'bool_on_off', fn: booleanValueFormatter('On', 'Off') },\n    ],\n  },\n];\n","import { dateTimeFormat, dateTimeFormatTimeAgo, localTimeFormat, systemDateFormats } from '../datetime';\nimport { toDuration as duration, toUtc, dateTime } from '../datetime/moment_wrapper';\nimport { TimeZone } from '../types';\nimport { DecimalCount } from '../types/displayValue';\n\nimport { toFixed, toFixedScaled, FormattedValue, ValueFormatter } from './valueFormats';\n\ninterface IntervalsInSeconds {\n  [interval: string]: number;\n}\n\nexport enum Interval {\n  Year = 'year',\n  Month = 'month',\n  Week = 'week',\n  Day = 'day',\n  Hour = 'hour',\n  Minute = 'minute',\n  Second = 'second',\n  Millisecond = 'millisecond',\n}\n\nconst UNITS = [\n  Interval.Year,\n  Interval.Month,\n  Interval.Week,\n  Interval.Day,\n  Interval.Hour,\n  Interval.Minute,\n  Interval.Second,\n  Interval.Millisecond,\n];\n\nconst INTERVALS_IN_SECONDS: IntervalsInSeconds = {\n  [Interval.Year]: 31536000,\n  [Interval.Month]: 2592000,\n  [Interval.Week]: 604800,\n  [Interval.Day]: 86400,\n  [Interval.Hour]: 3600,\n  [Interval.Minute]: 60,\n  [Interval.Second]: 1,\n  [Interval.Millisecond]: 0.001,\n};\n\nexport function toNanoSeconds(size: number, decimals?: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  if (Math.abs(size) < 1000) {\n    return { text: toFixed(size, decimals), suffix: ' ns' };\n  } else if (Math.abs(size) < 1000000) {\n    return toFixedScaled(size / 1000, decimals, ' s');\n  } else if (Math.abs(size) < 1000000000) {\n    return toFixedScaled(size / 1000000, decimals, ' ms');\n  } else if (Math.abs(size) < 60000000000) {\n    return toFixedScaled(size / 1000000000, decimals, ' s');\n  } else if (Math.abs(size) < 3600000000000) {\n    return toFixedScaled(size / 60000000000, decimals, ' min');\n  } else if (Math.abs(size) < 86400000000000) {\n    return toFixedScaled(size / 3600000000000, decimals, ' hour');\n  } else {\n    return toFixedScaled(size / 86400000000000, decimals, ' day');\n  }\n}\n\nexport function toMicroSeconds(size: number, decimals?: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  if (Math.abs(size) < 1000) {\n    return { text: toFixed(size, decimals), suffix: ' s' };\n  } else if (Math.abs(size) < 1000000) {\n    return toFixedScaled(size / 1000, decimals, ' ms');\n  } else {\n    return toFixedScaled(size / 1000000, decimals, ' s');\n  }\n}\n\nexport function toMilliSeconds(size: number, decimals?: DecimalCount, scaledDecimals?: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  if (Math.abs(size) < 1000) {\n    return { text: toFixed(size, decimals), suffix: ' ms' };\n  } else if (Math.abs(size) < 60000) {\n    // Less than 1 min\n    return toFixedScaled(size / 1000, decimals, ' s');\n  } else if (Math.abs(size) < 3600000) {\n    // Less than 1 hour, divide in minutes\n    return toFixedScaled(size / 60000, decimals, ' min');\n  } else if (Math.abs(size) < 86400000) {\n    // Less than one day, divide in hours\n    return toFixedScaled(size / 3600000, decimals, ' hour');\n  } else if (Math.abs(size) < 31536000000) {\n    // Less than one year, divide in days\n    return toFixedScaled(size / 86400000, decimals, ' day');\n  }\n\n  return toFixedScaled(size / 31536000000, decimals, ' year');\n}\n\nexport function trySubstract(value1: DecimalCount, value2: DecimalCount): DecimalCount {\n  if (value1 !== null && value1 !== undefined && value2 !== null && value2 !== undefined) {\n    return value1 - value2;\n  }\n  return undefined;\n}\n\nexport function toSeconds(size: number, decimals?: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  // If 0, use s unit instead of ns\n  if (size === 0) {\n    return { text: '0', suffix: ' s' };\n  }\n\n  // Less than 1 s, divide in ns\n  if (Math.abs(size) < 0.000001) {\n    return toFixedScaled(size * 1e9, decimals, ' ns');\n  }\n  // Less than 1 ms, divide in s\n  if (Math.abs(size) < 0.001) {\n    return toFixedScaled(size * 1e6, decimals, ' s');\n  }\n  // Less than 1 second, divide in ms\n  if (Math.abs(size) < 1) {\n    return toFixedScaled(size * 1e3, decimals, ' ms');\n  }\n\n  if (Math.abs(size) < 60) {\n    return { text: toFixed(size, decimals), suffix: ' s' };\n  } else if (Math.abs(size) < 3600) {\n    // Less than 1 hour, divide in minutes\n    return toFixedScaled(size / 60, decimals, ' min');\n  } else if (Math.abs(size) < 86400) {\n    // Less than one day, divide in hours\n    return toFixedScaled(size / 3600, decimals, ' hour');\n  } else if (Math.abs(size) < 604800) {\n    // Less than one week, divide in days\n    return toFixedScaled(size / 86400, decimals, ' day');\n  } else if (Math.abs(size) < 31536000) {\n    // Less than one year, divide in week\n    return toFixedScaled(size / 604800, decimals, ' week');\n  }\n\n  return toFixedScaled(size / 3.15569e7, decimals, ' year');\n}\n\nexport function toMinutes(size: number, decimals?: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  if (Math.abs(size) < 60) {\n    return { text: toFixed(size, decimals), suffix: ' min' };\n  } else if (Math.abs(size) < 1440) {\n    return toFixedScaled(size / 60, decimals, ' hour');\n  } else if (Math.abs(size) < 10080) {\n    return toFixedScaled(size / 1440, decimals, ' day');\n  } else if (Math.abs(size) < 604800) {\n    return toFixedScaled(size / 10080, decimals, ' week');\n  } else {\n    return toFixedScaled(size / 5.25948e5, decimals, ' year');\n  }\n}\n\nexport function toHours(size: number, decimals?: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  if (Math.abs(size) < 24) {\n    return { text: toFixed(size, decimals), suffix: ' hour' };\n  } else if (Math.abs(size) < 168) {\n    return toFixedScaled(size / 24, decimals, ' day');\n  } else if (Math.abs(size) < 8760) {\n    return toFixedScaled(size / 168, decimals, ' week');\n  } else {\n    return toFixedScaled(size / 8760, decimals, ' year');\n  }\n}\n\nexport function toDays(size: number, decimals?: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  if (Math.abs(size) < 7) {\n    return { text: toFixed(size, decimals), suffix: ' day' };\n  } else if (Math.abs(size) < 365) {\n    return toFixedScaled(size / 7, decimals, ' week');\n  } else {\n    return toFixedScaled(size / 365, decimals, ' year');\n  }\n}\n\nexport function toDuration(size: number, decimals: DecimalCount, timeScale: Interval): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  if (size === 0) {\n    return { text: '0', suffix: ' ' + timeScale + 's' };\n  }\n\n  if (size < 0) {\n    const v = toDuration(-size, decimals, timeScale);\n    if (!v.suffix) {\n      v.suffix = '';\n    }\n    v.suffix += ' ago';\n    return v;\n  }\n\n  // convert $size to milliseconds\n  // intervals_in_seconds uses seconds (duh), convert them to milliseconds here to minimize floating point errors\n  size *= INTERVALS_IN_SECONDS[timeScale] * 1000;\n\n  const strings = [];\n\n  // after first value >= 1 print only $decimals more\n  let decrementDecimals = false;\n  let decimalsCount = 0;\n\n  if (decimals !== null && decimals !== undefined) {\n    decimalsCount = decimals as number;\n  }\n\n  for (let i = 0; i < UNITS.length && decimalsCount >= 0; i++) {\n    const interval = INTERVALS_IN_SECONDS[UNITS[i]] * 1000;\n    const value = size / interval;\n    if (value >= 1 || decrementDecimals) {\n      decrementDecimals = true;\n      const floor = Math.floor(value);\n      const unit = UNITS[i] + (floor !== 1 ? 's' : '');\n      strings.push(floor + ' ' + unit);\n      size = size % interval;\n      decimalsCount--;\n    }\n  }\n\n  return { text: strings.join(', ') };\n}\n\nexport function toClock(size: number, decimals?: DecimalCount): FormattedValue {\n  if (size === null) {\n    return { text: '' };\n  }\n\n  // < 1 second\n  if (size < 1000) {\n    return {\n      text: toUtc(size).format('SSS\\\\m\\\\s'),\n    };\n  }\n\n  // < 1 minute\n  if (size < 60000) {\n    let format = 'ss\\\\s:SSS\\\\m\\\\s';\n    if (decimals === 0) {\n      format = 'ss\\\\s';\n    }\n    return { text: toUtc(size).format(format) };\n  }\n\n  // < 1 hour\n  if (size < 3600000) {\n    let format = 'mm\\\\m:ss\\\\s:SSS\\\\m\\\\s';\n    if (decimals === 0) {\n      format = 'mm\\\\m';\n    } else if (decimals === 1) {\n      format = 'mm\\\\m:ss\\\\s';\n    }\n    return { text: toUtc(size).format(format) };\n  }\n\n  let format = 'mm\\\\m:ss\\\\s:SSS\\\\m\\\\s';\n\n  const hours = `${('0' + Math.floor(duration(size, 'milliseconds').asHours())).slice(-2)}h`;\n\n  if (decimals === 0) {\n    format = '';\n  } else if (decimals === 1) {\n    format = 'mm\\\\m';\n  } else if (decimals === 2) {\n    format = 'mm\\\\m:ss\\\\s';\n  }\n\n  const text = format ? `${hours}:${toUtc(size).format(format)}` : hours;\n  return { text };\n}\n\nexport function toDurationInMilliseconds(size: number, decimals: DecimalCount): FormattedValue {\n  return toDuration(size, decimals, Interval.Millisecond);\n}\n\nexport function toDurationInSeconds(size: number, decimals: DecimalCount): FormattedValue {\n  return toDuration(size, decimals, Interval.Second);\n}\n\nexport function toDurationInHoursMinutesSeconds(size: number): FormattedValue {\n  if (size < 0) {\n    const v = toDurationInHoursMinutesSeconds(-size);\n    if (!v.suffix) {\n      v.suffix = '';\n    }\n    v.suffix += ' ago';\n    return v;\n  }\n  const strings = [];\n  const numHours = Math.floor(size / 3600);\n  const numMinutes = Math.floor((size % 3600) / 60);\n  const numSeconds = Math.floor((size % 3600) % 60);\n  numHours > 9 ? strings.push('' + numHours) : strings.push('0' + numHours);\n  numMinutes > 9 ? strings.push('' + numMinutes) : strings.push('0' + numMinutes);\n  numSeconds > 9 ? strings.push('' + numSeconds) : strings.push('0' + numSeconds);\n  return { text: strings.join(':') };\n}\n\nexport function toDurationInDaysHoursMinutesSeconds(size: number): FormattedValue {\n  if (size < 0) {\n    const v = toDurationInDaysHoursMinutesSeconds(-size);\n    if (!v.suffix) {\n      v.suffix = '';\n    }\n    v.suffix += ' ago';\n    return v;\n  }\n  let dayString = '';\n  const numDays = Math.floor(size / (24 * 3600));\n  if (numDays > 0) {\n    dayString = numDays + ' d ';\n  }\n  const hmsString = toDurationInHoursMinutesSeconds(size - numDays * 24 * 3600);\n  return { text: dayString + hmsString.text };\n}\n\nexport function toTimeTicks(size: number, decimals: DecimalCount): FormattedValue {\n  return toSeconds(size / 100, decimals);\n}\n\nexport function toClockMilliseconds(size: number, decimals: DecimalCount): FormattedValue {\n  return toClock(size, decimals);\n}\n\nexport function toClockSeconds(size: number, decimals: DecimalCount): FormattedValue {\n  return toClock(size * 1000, decimals);\n}\n\nexport function toDateTimeValueFormatter(pattern: string, todayPattern?: string): ValueFormatter {\n  return (value: number, decimals: DecimalCount, scaledDecimals: DecimalCount, timeZone?: TimeZone): FormattedValue => {\n    if (todayPattern) {\n      if (dateTime().isSame(value, 'day')) {\n        return {\n          text: dateTimeFormat(value, { format: todayPattern, timeZone }),\n        };\n      }\n    }\n    return { text: dateTimeFormat(value, { format: pattern, timeZone }) };\n  };\n}\n\nexport const dateTimeAsIso = toDateTimeValueFormatter('YYYY-MM-DD HH:mm:ss');\nexport const dateTimeAsIsoNoDateIfToday = toDateTimeValueFormatter('YYYY-MM-DD HH:mm:ss', 'HH:mm:ss');\nexport const dateTimeAsUS = toDateTimeValueFormatter('MM/DD/YYYY h:mm:ss a');\nexport const dateTimeAsUSNoDateIfToday = toDateTimeValueFormatter('MM/DD/YYYY h:mm:ss a', 'h:mm:ss a');\n\nexport function getDateTimeAsLocalFormat() {\n  return toDateTimeValueFormatter(\n    localTimeFormat({\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n    })\n  );\n}\n\nexport function getDateTimeAsLocalFormatNoDateIfToday() {\n  return toDateTimeValueFormatter(\n    localTimeFormat({\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n    }),\n    localTimeFormat({\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n    })\n  );\n}\n\nexport function dateTimeSystemFormatter(\n  value: number,\n  decimals: DecimalCount,\n  scaledDecimals: DecimalCount,\n  timeZone?: TimeZone,\n  showMs?: boolean\n): FormattedValue {\n  return {\n    text: dateTimeFormat(value, {\n      format: showMs ? systemDateFormats.fullDateMS : systemDateFormats.fullDate,\n      timeZone,\n    }),\n  };\n}\n\nexport function dateTimeFromNow(\n  value: number,\n  decimals: DecimalCount,\n  scaledDecimals: DecimalCount,\n  timeZone?: TimeZone\n): FormattedValue {\n  return { text: dateTimeFormatTimeAgo(value, { timeZone }) };\n}\n","import { DecimalCount } from '../types/displayValue';\n\nimport { scaledUnits, ValueFormatter } from './valueFormats';\n\nexport function currency(symbol: string, asSuffix?: boolean): ValueFormatter {\n  const units = ['', 'K', 'M', 'B', 'T'];\n  const scaler = scaledUnits(1000, units);\n  return (size: number, decimals?: DecimalCount, scaledDecimals?: DecimalCount) => {\n    if (size === null) {\n      return { text: '' };\n    }\n    const scaled = scaler(size, decimals, scaledDecimals);\n    if (asSuffix) {\n      scaled.suffix = scaled.suffix !== undefined ? `${scaled.suffix}${symbol}` : undefined;\n    } else {\n      scaled.prefix = symbol;\n    }\n    return scaled;\n  };\n}\n\nexport function getOffsetFromSIPrefix(c: string): number {\n  switch (c) {\n    case 'f':\n      return -5;\n    case 'p':\n      return -4;\n    case 'n':\n      return -3;\n    case '': // Two different unicode chars for \n    case '':\n      return -2;\n    case 'm':\n      return -1;\n    case '':\n      return 0;\n    case 'k':\n      return 1;\n    case 'M':\n      return 2;\n    case 'G':\n      return 3;\n    case 'T':\n      return 4;\n    case 'P':\n      return 5;\n    case 'E':\n      return 6;\n    case 'Z':\n      return 7;\n    case 'Y':\n      return 8;\n  }\n  return 0;\n}\n\nexport function binaryPrefix(unit: string, offset = 0): ValueFormatter {\n  const prefixes = ['', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi', 'Ei', 'Zi', 'Yi'].slice(offset);\n  const units = prefixes.map((p) => {\n    return ' ' + p + unit;\n  });\n  return scaledUnits(1024, units);\n}\n\nexport function SIPrefix(unit: string, offset = 0): ValueFormatter {\n  let prefixes = ['f', 'p', 'n', '', 'm', '', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'];\n  prefixes = prefixes.slice(5 + (offset || 0));\n  const units = prefixes.map((p) => {\n    return ' ' + p + unit;\n  });\n  return scaledUnits(1000, units);\n}\n","import { MutableVector } from '../types/vector';\n\nimport { FunctionalVector } from './FunctionalVector';\n\n/**\n * @public\n */\nexport class ArrayVector<T = any> extends FunctionalVector<T> implements MutableVector<T> {\n  buffer: T[];\n\n  constructor(buffer?: T[]) {\n    super();\n    this.buffer = buffer ? buffer : [];\n  }\n\n  get length() {\n    return this.buffer.length;\n  }\n\n  add(value: T) {\n    this.buffer.push(value);\n  }\n\n  get(index: number): T {\n    return this.buffer[index];\n  }\n\n  set(index: number, value: T) {\n    this.buffer[index] = value;\n  }\n\n  reverse() {\n    this.buffer.reverse();\n  }\n\n  toArray(): T[] {\n    return this.buffer;\n  }\n\n  toJSON(): T[] {\n    return this.buffer;\n  }\n}\n","import { Vector } from '../types';\n\nimport { FunctionalVector } from './FunctionalVector';\n\n/**\n * This will force all values to be numbers\n *\n * @public\n */\nexport class AsNumberVector extends FunctionalVector<number> {\n  constructor(private field: Vector) {\n    super();\n  }\n\n  get length() {\n    return this.field.length;\n  }\n\n  get(index: number) {\n    return +this.field.get(index);\n  }\n}\n","import { Vector } from '../types/vector';\nimport { BinaryOperation } from '../utils/binaryOperators';\n\nimport { vectorToArray } from './vectorToArray';\n\n/**\n * @public\n */\nexport class BinaryOperationVector implements Vector<number> {\n  constructor(private left: Vector<number>, private right: Vector<number>, private operation: BinaryOperation) {}\n\n  get length(): number {\n    return this.left.length;\n  }\n\n  get(index: number): number {\n    return this.operation(this.left.get(index), this.right.get(index));\n  }\n\n  toArray(): number[] {\n    return vectorToArray(this);\n  }\n\n  toJSON(): number[] {\n    return vectorToArray(this);\n  }\n}\n","import { Vector } from '../types/vector';\n\n/**\n * @public\n */\nexport class ConstantVector<T = any> implements Vector<T> {\n  constructor(private value: T, private len: number) {}\n\n  get length() {\n    return this.len;\n  }\n\n  get(index: number): T {\n    return this.value;\n  }\n\n  toArray(): T[] {\n    const arr = new Array<T>(this.length);\n    return arr.fill(this.value);\n  }\n\n  toJSON(): T[] {\n    return this.toArray();\n  }\n}\n","import { Vector } from '../types';\n\nimport { vectorToArray } from './vectorToArray';\n\n/**\n * RowVector makes the row values look like a vector\n * @internal\n */\nexport class RowVector implements Vector {\n  constructor(private columns: Vector[]) {}\n\n  rowIndex = 0;\n\n  get length(): number {\n    return this.columns.length;\n  }\n\n  get(index: number): number {\n    return this.columns[index].get(this.rowIndex);\n  }\n\n  toArray(): number[] {\n    return vectorToArray(this);\n  }\n\n  toJSON(): number[] {\n    return vectorToArray(this);\n  }\n}\n","import { Vector } from '../types/vector';\n\nimport { vectorToArray } from './vectorToArray';\n\n/**\n * Values are returned in the order defined by the input parameter\n */\nexport class SortedVector<T = any> implements Vector<T> {\n  constructor(private source: Vector<T>, private order: number[]) {}\n\n  get length(): number {\n    return this.source.length;\n  }\n\n  get(index: number): T {\n    return this.source.get(this.order[index]);\n  }\n\n  toArray(): T[] {\n    return vectorToArray(this);\n  }\n\n  toJSON(): T[] {\n    return vectorToArray(this);\n  }\n}\n","import { Vector } from '../types/vector';\n\nexport function vectorToArray<T>(v: Vector<T>): T[] {\n  const arr: T[] = Array(v.length);\n  for (let i = 0; i < v.length; i++) {\n    arr[i] = v.get(i);\n  }\n  return arr;\n}\n","import { DataQueryError } from '@grafana/data';\n\n/**\n * Convert an object into a DataQueryError -- if this is an HTTP response,\n * it will put the correct values in the error field\n *\n * @public\n */\nexport function toDataQueryError(err: DataQueryError | string | Object): DataQueryError {\n  const error = (err || {}) as DataQueryError;\n\n  if (!error.message) {\n    if (typeof err === 'string' || err instanceof String) {\n      return { message: err } as DataQueryError;\n    }\n\n    let message = 'Query error';\n    if (error.message) {\n      message = error.message;\n    } else if (error.data && error.data.message) {\n      message = error.data.message;\n    } else if (error.data && error.data.error) {\n      message = error.data.error;\n    } else if (error.status) {\n      message = `Query error: ${error.status} ${error.statusText}`;\n    }\n    error.message = message;\n  }\n\n  return error;\n}\n","import { map, Observable, ReplaySubject, Subject, Subscriber, Subscription } from 'rxjs';\n\nimport {\n  DataFrameJSON,\n  DataQueryError,\n  Field,\n  isLiveChannelMessageEvent,\n  isLiveChannelStatusEvent,\n  LiveChannelConnectionState,\n  LiveChannelEvent,\n  LiveChannelId,\n  LoadingState,\n} from '@grafana/data';\nimport { LiveDataStreamOptions, StreamingFrameAction, StreamingFrameOptions } from '@grafana/runtime/src/services/live';\nimport { toDataQueryError } from '@grafana/runtime/src/utils/toDataQueryError';\n\nimport { getStreamingFrameOptions, StreamingDataFrame } from '../data/StreamingDataFrame';\nimport { StreamingResponseDataType } from '../data/utils';\n\nimport { DataStreamSubscriptionKey, StreamingDataQueryResponse } from './service';\n\nconst bufferIfNot =\n  (canEmitObservable: Observable<boolean>) =>\n  <T>(source: Observable<T>): Observable<T[]> => {\n    return new Observable((subscriber: Subscriber<T[]>) => {\n      let buffer: T[] = [];\n      let canEmit = true;\n\n      const emitBuffer = () => {\n        subscriber.next(buffer);\n        buffer = [];\n      };\n\n      const canEmitSub = canEmitObservable.subscribe({\n        next: (val) => {\n          canEmit = val;\n\n          if (canEmit && buffer.length) {\n            emitBuffer();\n          }\n        },\n      });\n\n      const sourceSub = source.subscribe({\n        next(value) {\n          if (canEmit) {\n            if (!buffer.length) {\n              subscriber.next([value]);\n            } else {\n              emitBuffer();\n            }\n          } else {\n            buffer.push(value);\n          }\n        },\n        error(error) {\n          subscriber.error(error);\n        },\n        complete() {\n          subscriber.complete();\n        },\n      });\n\n      return () => {\n        sourceSub.unsubscribe();\n        canEmitSub.unsubscribe();\n      };\n    });\n  };\n\nexport type DataStreamHandlerDeps<T> = {\n  channelId: LiveChannelId;\n  liveEventsObservable: Observable<LiveChannelEvent<T>>;\n  onShutdown: () => void;\n  subscriberReadiness: Observable<boolean>;\n  defaultStreamingFrameOptions: Readonly<StreamingFrameOptions>;\n  shutdownDelayInMs: number;\n};\n\nenum InternalStreamMessageType {\n  Error,\n  NewValuesSameSchema,\n  ChangedSchema,\n}\n\ntype InternalStreamMessageTypeToData = {\n  [InternalStreamMessageType.Error]: {\n    error: DataQueryError;\n  };\n  [InternalStreamMessageType.ChangedSchema]: {};\n  [InternalStreamMessageType.NewValuesSameSchema]: {\n    values: unknown[][];\n  };\n};\n\ntype InternalStreamMessage<T = InternalStreamMessageType> = T extends InternalStreamMessageType\n  ? {\n      type: T;\n    } & InternalStreamMessageTypeToData[T]\n  : never;\n\nconst reduceNewValuesSameSchemaMessages = (\n  packets: Array<InternalStreamMessage<InternalStreamMessageType.NewValuesSameSchema>>\n) => ({\n  values: packets.reduce((acc, { values }) => {\n    for (let i = 0; i < values.length; i++) {\n      if (!acc[i]) {\n        acc[i] = [];\n      }\n      for (let j = 0; j < values[i].length; j++) {\n        acc[i].push(values[i][j]);\n      }\n    }\n    return acc;\n  }, [] as unknown[][]),\n  type: InternalStreamMessageType.NewValuesSameSchema,\n});\n\nconst filterMessages = <T extends InternalStreamMessageType>(\n  packets: InternalStreamMessage[],\n  type: T\n): Array<InternalStreamMessage<T>> => packets.filter((p) => p.type === type) as Array<InternalStreamMessage<T>>;\n\nexport class LiveDataStream<T = unknown> {\n  private frameBuffer: StreamingDataFrame;\n  private liveEventsSubscription: Subscription;\n  private stream: Subject<InternalStreamMessage> = new ReplaySubject(1);\n  private shutdownTimeoutId: ReturnType<typeof setTimeout> | undefined;\n\n  constructor(private deps: DataStreamHandlerDeps<T>) {\n    this.frameBuffer = StreamingDataFrame.empty(deps.defaultStreamingFrameOptions);\n    this.liveEventsSubscription = deps.liveEventsObservable.subscribe({\n      error: this.onError,\n      complete: this.onComplete,\n      next: this.onNext,\n    });\n  }\n\n  private shutdown = () => {\n    this.stream.complete();\n    this.liveEventsSubscription.unsubscribe();\n    this.deps.onShutdown();\n  };\n\n  private shutdownIfNoSubscribers = () => {\n    if (!this.stream.observed) {\n      this.shutdown();\n    }\n  };\n\n  private onError = (err: any) => {\n    console.log('LiveQuery [error]', { err }, this.deps.channelId);\n    this.stream.next({\n      type: InternalStreamMessageType.Error,\n      error: toDataQueryError(err),\n    });\n    this.shutdown();\n  };\n\n  private onComplete = () => {\n    console.log('LiveQuery [complete]', this.deps.channelId);\n    this.shutdown();\n  };\n\n  private onNext = (evt: LiveChannelEvent) => {\n    if (isLiveChannelMessageEvent(evt)) {\n      this.process(evt.message);\n      return;\n    }\n\n    const liveChannelStatusEvent = isLiveChannelStatusEvent(evt);\n    if (liveChannelStatusEvent && evt.error) {\n      this.stream.next({\n        type: InternalStreamMessageType.Error,\n        error: {\n          ...toDataQueryError(evt.error),\n          message: `Streaming channel error: ${evt.error.message}`,\n        },\n      });\n      return;\n    }\n\n    if (\n      liveChannelStatusEvent &&\n      (evt.state === LiveChannelConnectionState.Connected || evt.state === LiveChannelConnectionState.Pending) &&\n      evt.message\n    ) {\n      this.process(evt.message);\n    }\n  };\n\n  private process = (msg: DataFrameJSON) => {\n    const packetInfo = this.frameBuffer.push(msg);\n\n    if (packetInfo.schemaChanged) {\n      this.stream.next({\n        type: InternalStreamMessageType.ChangedSchema,\n      });\n    } else {\n      this.stream.next({\n        type: InternalStreamMessageType.NewValuesSameSchema,\n        values: this.frameBuffer.getValuesFromLastPacket(),\n      });\n    }\n  };\n\n  private resizeBuffer = (bufferOptions: StreamingFrameOptions) => {\n    if (bufferOptions && this.frameBuffer.needsResizing(bufferOptions)) {\n      this.frameBuffer.resize(bufferOptions);\n    }\n  };\n\n  private prepareInternalStreamForNewSubscription = (options: LiveDataStreamOptions): void => {\n    if (!this.frameBuffer.hasAtLeastOnePacket() && options.frame) {\n      // will skip initial frames from subsequent subscribers\n      this.process(options.frame);\n    }\n  };\n\n  private clearShutdownTimeout = () => {\n    if (this.shutdownTimeoutId) {\n      clearTimeout(this.shutdownTimeoutId);\n      this.shutdownTimeoutId = undefined;\n    }\n  };\n\n  get = (options: LiveDataStreamOptions, subKey: DataStreamSubscriptionKey): Observable<StreamingDataQueryResponse> => {\n    this.clearShutdownTimeout();\n    const buffer = getStreamingFrameOptions(options.buffer);\n\n    this.resizeBuffer(buffer);\n    this.prepareInternalStreamForNewSubscription(options);\n\n    const shouldSendLastPacketOnly = options?.buffer?.action === StreamingFrameAction.Replace;\n    const fieldsNamesFilter = options.filter?.fields;\n    const dataNeedsFiltering = fieldsNamesFilter?.length;\n    const fieldFilterPredicate = dataNeedsFiltering ? ({ name }: Field) => fieldsNamesFilter.includes(name) : undefined;\n    let matchingFieldIndexes: number[] | undefined = undefined;\n\n    const getFullFrameResponseData = <T>(\n      messages: InternalStreamMessage[],\n      error?: DataQueryError\n    ): StreamingDataQueryResponse => {\n      matchingFieldIndexes = fieldFilterPredicate\n        ? this.frameBuffer.getMatchingFieldIndexes(fieldFilterPredicate)\n        : undefined;\n\n      if (!shouldSendLastPacketOnly) {\n        return {\n          key: subKey,\n          state: error ? LoadingState.Error : LoadingState.Streaming,\n          data: [\n            {\n              type: StreamingResponseDataType.FullFrame,\n              frame: this.frameBuffer.serialize(fieldFilterPredicate, buffer),\n            },\n          ],\n          error,\n        };\n      }\n\n      if (error) {\n        // send empty frame with error\n        return {\n          key: subKey,\n          state: LoadingState.Error,\n          data: [\n            {\n              type: StreamingResponseDataType.FullFrame,\n              frame: this.frameBuffer.serialize(fieldFilterPredicate, buffer, { maxLength: 0 }),\n            },\n          ],\n          error,\n        };\n      }\n\n      if (!messages.length) {\n        console.warn(`expected to find at least one non error message ${messages.map(({ type }) => type)}`);\n        // send empty frame\n        return {\n          key: subKey,\n          state: LoadingState.Streaming,\n          data: [\n            {\n              type: StreamingResponseDataType.FullFrame,\n              frame: this.frameBuffer.serialize(fieldFilterPredicate, buffer, { maxLength: 0 }),\n            },\n          ],\n          error,\n        };\n      }\n\n      return {\n        key: subKey,\n        state: LoadingState.Streaming,\n        data: [\n          {\n            type: StreamingResponseDataType.FullFrame,\n            frame: this.frameBuffer.serialize(fieldFilterPredicate, buffer, {\n              maxLength: this.frameBuffer.packetInfo.length,\n            }),\n          },\n        ],\n        error,\n      };\n    };\n\n    const getNewValuesSameSchemaResponseData = (\n      messages: Array<InternalStreamMessage<InternalStreamMessageType.NewValuesSameSchema>>\n    ): StreamingDataQueryResponse => {\n      const lastMessage = messages.length ? messages[messages.length - 1] : undefined;\n      const values =\n        shouldSendLastPacketOnly && lastMessage\n          ? lastMessage.values\n          : reduceNewValuesSameSchemaMessages(messages).values;\n\n      const filteredValues = matchingFieldIndexes\n        ? values.filter((v, i) => (matchingFieldIndexes as number[]).includes(i))\n        : values;\n\n      return {\n        key: subKey,\n        state: LoadingState.Streaming,\n        data: [\n          {\n            type: StreamingResponseDataType.NewValuesSameSchema,\n            values: filteredValues,\n          },\n        ],\n      };\n    };\n\n    let shouldSendFullFrame = true;\n    const transformedInternalStream = this.stream.pipe(\n      bufferIfNot(this.deps.subscriberReadiness),\n      map((messages, i) => {\n        const errors = filterMessages(messages, InternalStreamMessageType.Error);\n        const lastError = errors.length ? errors[errors.length - 1].error : undefined;\n\n        if (shouldSendFullFrame) {\n          shouldSendFullFrame = false;\n          return getFullFrameResponseData(messages, lastError);\n        }\n\n        if (errors.length) {\n          // send the latest frame with the last error, discard everything else\n          return getFullFrameResponseData(messages, lastError);\n        }\n\n        const schemaChanged = messages.some((n) => n.type === InternalStreamMessageType.ChangedSchema);\n        if (schemaChanged) {\n          // send the latest frame, discard intermediate appends\n          return getFullFrameResponseData(messages, undefined);\n        }\n\n        const newValueSameSchemaMessages = filterMessages(messages, InternalStreamMessageType.NewValuesSameSchema);\n        if (newValueSameSchemaMessages.length !== messages.length) {\n          console.warn(`unsupported message type ${messages.map(({ type }) => type)}`);\n        }\n\n        return getNewValuesSameSchemaResponseData(newValueSameSchemaMessages);\n      })\n    );\n\n    return new Observable<StreamingDataQueryResponse>((subscriber) => {\n      const sub = transformedInternalStream.subscribe({\n        next: (n) => {\n          subscriber.next(n);\n        },\n        error: (err) => {\n          subscriber.error(err);\n        },\n        complete: () => {\n          subscriber.complete();\n        },\n      });\n\n      return () => {\n        // TODO: potentially resize (downsize) the buffer on unsubscribe\n        sub.unsubscribe();\n        if (!this.stream.observed) {\n          this.clearShutdownTimeout();\n          this.shutdownTimeoutId = setTimeout(this.shutdownIfNoSubscribers, this.deps.shutdownDelayInMs);\n        }\n      };\n    });\n  };\n}\n","import Centrifuge, {\n  JoinLeaveContext,\n  PublicationContext,\n  SubscribeErrorContext,\n  SubscribeSuccessContext,\n  SubscriptionEvents,\n  UnsubscribeContext,\n} from 'centrifuge/dist/centrifuge';\nimport { Subject, of, Observable } from 'rxjs';\n\nimport {\n  LiveChannelStatusEvent,\n  LiveChannelEvent,\n  LiveChannelEventType,\n  LiveChannelConnectionState,\n  LiveChannelPresenceStatus,\n  LiveChannelAddress,\n  DataFrameJSON,\n  isValidLiveChannelAddress,\n} from '@grafana/data';\n\n/**\n * Internal class that maps Centrifuge support to GrafanaLive\n */\nexport class CentrifugeLiveChannel<T = any> {\n  readonly currentStatus: LiveChannelStatusEvent;\n\n  readonly opened = Date.now();\n  readonly id: string;\n  readonly addr: LiveChannelAddress;\n\n  readonly stream = new Subject<LiveChannelEvent<T>>();\n\n  // Hold on to the last header with schema\n  lastMessageWithSchema?: DataFrameJSON;\n\n  subscription?: Centrifuge.Subscription;\n  shutdownCallback?: () => void;\n  initalized?: boolean;\n\n  constructor(id: string, addr: LiveChannelAddress) {\n    this.id = id;\n    this.addr = addr;\n    this.currentStatus = {\n      type: LiveChannelEventType.Status,\n      id,\n      timestamp: this.opened,\n      state: LiveChannelConnectionState.Pending,\n    };\n    if (!isValidLiveChannelAddress(addr)) {\n      this.currentStatus.state = LiveChannelConnectionState.Invalid;\n      this.currentStatus.error = 'invalid channel address';\n    }\n  }\n\n  // This should only be called when centrifuge is connected\n  initalize(): SubscriptionEvents {\n    if (this.initalized) {\n      throw new Error('Channel already initalized: ' + this.id);\n    }\n    this.initalized = true;\n\n    const events: SubscriptionEvents = {\n      // Called when a message is received from the socket\n      publish: (ctx: PublicationContext) => {\n        try {\n          if (ctx.data) {\n            if (ctx.data.schema) {\n              this.lastMessageWithSchema = ctx.data as DataFrameJSON;\n            }\n\n            this.stream.next({\n              type: LiveChannelEventType.Message,\n              message: ctx.data,\n            });\n          }\n\n          // Clear any error messages\n          if (this.currentStatus.error) {\n            this.currentStatus.timestamp = Date.now();\n            delete this.currentStatus.error;\n            this.sendStatus();\n          }\n        } catch (err) {\n          console.log('publish error', this.addr, err);\n          this.currentStatus.error = err;\n          this.currentStatus.timestamp = Date.now();\n          this.sendStatus();\n        }\n      },\n      error: (ctx: SubscribeErrorContext) => {\n        this.currentStatus.timestamp = Date.now();\n        this.currentStatus.error = ctx.error;\n        this.sendStatus();\n      },\n      subscribe: (ctx: SubscribeSuccessContext) => {\n        this.currentStatus.timestamp = Date.now();\n        this.currentStatus.state = LiveChannelConnectionState.Connected;\n        delete this.currentStatus.error;\n\n        if (ctx.data?.schema) {\n          this.lastMessageWithSchema = ctx.data as DataFrameJSON;\n        }\n\n        this.sendStatus(ctx.data);\n      },\n      unsubscribe: (ctx: UnsubscribeContext) => {\n        this.currentStatus.timestamp = Date.now();\n        this.currentStatus.state = LiveChannelConnectionState.Disconnected;\n        this.sendStatus();\n      },\n    };\n\n    events.join = (ctx: JoinLeaveContext) => {\n      this.stream.next({ type: LiveChannelEventType.Join, user: ctx.info.user });\n    };\n    events.leave = (ctx: JoinLeaveContext) => {\n      this.stream.next({ type: LiveChannelEventType.Leave, user: ctx.info.user });\n    };\n    return events;\n  }\n\n  private sendStatus(message?: any) {\n    const copy = { ...this.currentStatus };\n    if (message) {\n      copy.message = message;\n    }\n    this.stream.next(copy);\n  }\n\n  disconnectIfNoListeners = () => {\n    const count = this.stream.observers.length;\n    if (count === 0) {\n      this.disconnect();\n    }\n  };\n\n  /**\n   * Get the stream of events and\n   */\n  getStream() {\n    return new Observable((subscriber) => {\n      const initialMessage = { ...this.currentStatus };\n      if (this.lastMessageWithSchema?.schema) {\n        // send just schema instead of schema+data to avoid having data gaps\n        initialMessage.message = { schema: this.lastMessageWithSchema?.schema };\n      }\n\n      subscriber.next({ ...this.currentStatus, message: this.lastMessageWithSchema });\n\n      const sub = this.stream.subscribe(subscriber);\n      return () => {\n        sub.unsubscribe();\n        const count = this.stream.observers.length;\n\n        // Wait 1/4 second to fully disconnect\n        if (count === 0) {\n          setTimeout(this.disconnectIfNoListeners, 250);\n        }\n      };\n    }) as Observable<LiveChannelEvent<T>>;\n  }\n\n  /**\n   * This is configured by the server when the config supports presence\n   */\n  async getPresence(): Promise<LiveChannelPresenceStatus> {\n    if (!this.subscription) {\n      return Promise.reject('not subscribed');\n    }\n\n    return this.subscription!.presence().then((v) => {\n      return {\n        users: Object.keys(v.presence),\n      };\n    });\n  }\n\n  /**\n   * This will close and terminate all streams for this channel\n   */\n  disconnect() {\n    this.currentStatus.state = LiveChannelConnectionState.Shutdown;\n    this.currentStatus.timestamp = Date.now();\n\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription.removeAllListeners(); // they keep all listeners attached after unsubscribe\n      this.subscription = undefined;\n    }\n\n    this.stream.complete();\n\n    this.stream.next({ ...this.currentStatus });\n    this.stream.complete();\n\n    if (this.shutdownCallback) {\n      this.shutdownCallback();\n    }\n  }\n\n  shutdownWithError(err: string) {\n    this.currentStatus.error = err;\n    this.sendStatus();\n    this.disconnect();\n  }\n}\n\nexport function getErrorChannel<TMessage>(msg: string, id: string, addr: LiveChannelAddress) {\n  return {\n    id,\n    opened: Date.now(),\n    addr,\n\n    // return an error\n    getStream: () =>\n      of({\n        type: LiveChannelEventType.Status,\n        id,\n        timestamp: Date.now(),\n        state: LiveChannelConnectionState.Invalid,\n        error: msg,\n      }),\n\n    // already disconnected\n    disconnect: () => {},\n  };\n}\n","import Centrifuge from 'centrifuge/dist/centrifuge';\nimport { BehaviorSubject, Observable, share, startWith } from 'rxjs';\n\nimport {\n  DataQueryError,\n  DataQueryResponse,\n  LiveChannelAddress,\n  LiveChannelConnectionState,\n  LiveChannelId,\n  toLiveChannelId,\n} from '@grafana/data';\nimport { FetchResponse } from '@grafana/runtime/src/services/backendSrv';\nimport {\n  GrafanaLiveSrv,\n  LiveDataStreamOptions,\n  LiveQueryDataOptions,\n  StreamingFrameAction,\n  StreamingFrameOptions,\n} from '@grafana/runtime/src/services/live';\nimport { BackendDataSourceResponse } from '@grafana/runtime/src/utils/queryResponse';\n\nimport { StreamingResponseData } from '../data/utils';\n\nimport { LiveDataStream } from './LiveDataStream';\nimport { CentrifugeLiveChannel } from './channel';\n\nexport type CentrifugeSrvDeps = {\n  appUrl: string;\n  orgId: number;\n  orgRole: string;\n  sessionId: string;\n  liveEnabled: boolean;\n  dataStreamSubscriberReadiness: Observable<boolean>;\n};\n\nexport type StreamingDataQueryResponse = Omit<DataQueryResponse, 'data'> & { data: [StreamingResponseData] };\n\nexport type CentrifugeSrv = Omit<GrafanaLiveSrv, 'publish' | 'getDataStream' | 'getQueryData'> & {\n  getDataStream: (options: LiveDataStreamOptions) => Observable<StreamingDataQueryResponse>;\n  getQueryData: (\n    options: LiveQueryDataOptions\n  ) => Promise<\n    | { data: BackendDataSourceResponse | undefined }\n    | FetchResponse<BackendDataSourceResponse | undefined>\n    | DataQueryError\n  >;\n};\n\nexport type DataStreamSubscriptionKey = string;\n\nconst defaultStreamingFrameOptions: Readonly<StreamingFrameOptions> = {\n  maxLength: 100,\n  maxDelta: Infinity,\n  action: StreamingFrameAction.Append,\n};\n\nconst dataStreamShutdownDelayInMs = 5000;\n\nexport class CentrifugeService implements CentrifugeSrv {\n  readonly open = new Map<string, CentrifugeLiveChannel>();\n  private readonly liveDataStreamByChannelId: Record<LiveChannelId, LiveDataStream> = {};\n  readonly centrifuge: Centrifuge;\n  readonly connectionState: BehaviorSubject<boolean>;\n  readonly connectionBlocker: Promise<void>;\n  private readonly dataStreamSubscriberReadiness: Observable<boolean>;\n\n  constructor(private deps: CentrifugeSrvDeps) {\n    this.dataStreamSubscriberReadiness = deps.dataStreamSubscriberReadiness.pipe(share(), startWith(true));\n    const liveUrl = `${deps.appUrl.replace(/^http/, 'ws')}/api/live/ws`;\n    this.centrifuge = new Centrifuge(liveUrl, {\n      timeout: 30000,\n    });\n    this.centrifuge.setConnectData({\n      sessionId: deps.sessionId,\n      orgId: deps.orgId,\n    });\n    // orgRole is set when logged in *or* anonomus users can use grafana\n    if (deps.liveEnabled && deps.orgRole !== '') {\n      this.centrifuge.connect(); // do connection\n    }\n    this.connectionState = new BehaviorSubject<boolean>(this.centrifuge.isConnected());\n    this.connectionBlocker = new Promise<void>((resolve) => {\n      if (this.centrifuge.isConnected()) {\n        return resolve();\n      }\n      const connectListener = () => {\n        resolve();\n        this.centrifuge.removeListener('connect', connectListener);\n      };\n      this.centrifuge.addListener('connect', connectListener);\n    });\n\n    // Register global listeners\n    this.centrifuge.on('connect', this.onConnect);\n    this.centrifuge.on('disconnect', this.onDisconnect);\n    this.centrifuge.on('publish', this.onServerSideMessage);\n  }\n\n  //----------------------------------------------------------\n  // Internal functions\n  //----------------------------------------------------------\n\n  private onConnect = (context: any) => {\n    this.connectionState.next(true);\n  };\n\n  private onDisconnect = (context: any) => {\n    this.connectionState.next(false);\n  };\n\n  private onServerSideMessage = (context: any) => {\n    console.log('Publication from server-side channel', context);\n  };\n\n  /**\n   * Get a channel.  If the scope, namespace, or path is invalid, a shutdown\n   * channel will be returned with an error state indicated in its status\n   */\n  private getChannel<TMessage>(addr: LiveChannelAddress): CentrifugeLiveChannel<TMessage> {\n    const id = `${this.deps.orgId}/${addr.scope}/${addr.namespace}/${addr.path}`;\n    let channel = this.open.get(id);\n    if (channel != null) {\n      return channel;\n    }\n\n    channel = new CentrifugeLiveChannel(id, addr);\n    if (channel.currentStatus.state === LiveChannelConnectionState.Invalid) {\n      return channel;\n    }\n    channel.shutdownCallback = () => {\n      this.open.delete(id); // remove it from the list of open channels\n    };\n    this.open.set(id, channel);\n\n    // Initialize the channel in the background\n    this.initChannel(channel).catch((err) => {\n      if (channel) {\n        channel.currentStatus.state = LiveChannelConnectionState.Invalid;\n        channel.shutdownWithError(err);\n      }\n      this.open.delete(id);\n    });\n\n    // return the not-yet initialized channel\n    return channel;\n  }\n\n  private async initChannel(channel: CentrifugeLiveChannel): Promise<void> {\n    const events = channel.initalize();\n    if (!this.centrifuge.isConnected()) {\n      await this.connectionBlocker;\n    }\n    channel.subscription = this.centrifuge.subscribe(channel.id, events, { data: channel.addr.data });\n    return;\n  }\n\n  //----------------------------------------------------------\n  // Exported functions\n  //----------------------------------------------------------\n\n  /**\n   * Listen for changes to the connection state\n   */\n  getConnectionState = () => {\n    return this.connectionState.asObservable();\n  };\n\n  /**\n   * Watch for messages in a channel\n   */\n  getStream: CentrifugeSrv['getStream'] = <T>(address: LiveChannelAddress) => {\n    return this.getChannel<T>(address).getStream();\n  };\n\n  private createSubscriptionKey = (options: LiveDataStreamOptions): DataStreamSubscriptionKey =>\n    options.key ?? `xstr/${streamCounter++}`;\n\n  private getLiveDataStream = (options: LiveDataStreamOptions): LiveDataStream => {\n    const channelId = toLiveChannelId(options.addr);\n    const existingStream = this.liveDataStreamByChannelId[channelId];\n\n    if (existingStream) {\n      return existingStream;\n    }\n\n    const channel = this.getChannel(options.addr);\n    this.liveDataStreamByChannelId[channelId] = new LiveDataStream({\n      channelId,\n      onShutdown: () => {\n        delete this.liveDataStreamByChannelId[channelId];\n      },\n      liveEventsObservable: channel.getStream(),\n      subscriberReadiness: this.dataStreamSubscriberReadiness,\n      defaultStreamingFrameOptions,\n      shutdownDelayInMs: dataStreamShutdownDelayInMs,\n    });\n    return this.liveDataStreamByChannelId[channelId];\n  };\n  /**\n   * Connect to a channel and return results as DataFrames\n   */\n  getDataStream: CentrifugeSrv['getDataStream'] = (options) => {\n    const subscriptionKey = this.createSubscriptionKey(options);\n\n    const stream = this.getLiveDataStream(options);\n    return stream.get(options, subscriptionKey);\n  };\n\n  /**\n   * Executes a query over the live websocket. Query response can contain live channels we can subscribe to for further updates\n   *\n   * Since the initial request and subscription are on the same socket, this will support HA setups\n   */\n  getQueryData: CentrifugeSrv['getQueryData'] = async (options) => {\n    if (!this.centrifuge.isConnected()) {\n      await this.connectionBlocker;\n    }\n    return this.centrifuge.namedRPC('grafana.query', options.body);\n  };\n\n  /**\n   * For channels that support presence, this will request the current state from the server.\n   *\n   * Join and leave messages will be sent to the open stream\n   */\n  getPresence: CentrifugeSrv['getPresence'] = (address) => {\n    return this.getChannel(address).getPresence();\n  };\n}\n\n// This is used to give a unique key for each stream.  The actual value does not matter\nlet streamCounter = 0;\n","import * as comlink from 'comlink';\nimport { Subscriber } from 'rxjs';\n\n// Observers, ie. functions passed to `observable.subscribe(...)`, are converted to a subclass of `Subscriber` before they are sent to the source Observable.\n// The conversion happens internally in the RxJS library - this transfer handler is catches them and wraps them with a proxy\nconst subscriberTransferHandler: any = {\n  canHandle(value: any): boolean {\n    return value && value instanceof Subscriber;\n  },\n\n  serialize(value: Function): [MessagePort, Transferable[]] {\n    const obj = comlink.proxy(value);\n\n    const { port1, port2 } = new MessageChannel();\n\n    comlink.expose(obj, port1);\n\n    return [port2, [port2]];\n  },\n\n  deserialize(value: MessagePort): comlink.Remote<MessagePort> {\n    value.start();\n\n    return comlink.wrap<MessagePort>(value);\n  },\n};\ncomlink.transferHandlers.set('SubscriberHandler', subscriberTransferHandler);\n","import { Labels } from '@grafana/data';\n\n/** replace labels in a string.  Used for loki+prometheus legend formats */\nexport function renderLegendFormat(aliasPattern: string, aliasData: Labels): string {\n  const aliasRegex = /\\{\\{\\s*(.+?)\\s*\\}\\}/g;\n  return aliasPattern.replace(aliasRegex, (_, g1) => (aliasData[g1] ? aliasData[g1] : g1));\n}\n"],"names":["dateTimeParse","value","options","isDateTime","parseString","parseOthers","indexOf","isValid","moment","parse","roundUp","timeZone","fiscalYearStartMonth","getTimeZone","zone","format","systemDateFormats","name","lowerCase","date","typeList","Set","eventFactory","has","Error","add","BusEventBase","constructor","this","type","__proto__","BusEventWithPayload","payload","super","FieldConfigOptionsRegistry","Registry","fieldIndexComparer","field","reverse","values","FieldType","numericIndexComparer","stringIndexComparer","booleanIndexComparer","timeIndexComparer","naturalIndexComparer","timeComparer","a","b","isNumber","numericComparer","dateTime","isBefore","falsyComparer","stringComparer","localeCompare","booleanComparer","vA","get","vB","getFrameDisplayName","frame","index","valuesWithLabels","fields","labels","Object","keys","length","push","formatLabels","undefined","filter","f","map","getFieldDisplayName","join","refId","allFrames","existingTitle","state","displayName","multipleFrames","Boolean","hasConfigTitle","config","displayNameFromDS","TIME_SERIES_TIME_FIELD_NAME","parts","frameNamesDiffer","i","frameNameAdded","labelsAdded","TIME_SERIES_VALUE_FIELD_NAME","singleLabelName","frames","singleName","labelKey","getSingleLabelName","allLabels","dupeCount","foundSelf","otherField","getUniqueFieldName","calculateFieldDisplayName","XSSWL","xss","reduce","acc","element","concat","sanitizeXSS","whiteList","sanitizeTextPanelWhitelist","css","gap","order","sanitize","unsanitizedString","process","error","console","sanitizeTextPanelContent","sanitizeUrl","url","braintreeSanitizeUrl","hasAnsiCodes","input","test","escapeHtml","str","String","replace","createComponents","colors","shadows","panel","padding","headerHeight","background","primary","borderColor","border","weak","boxShadow","medium","borderHover","strong","text","mode","canvas","height","sm","md","lg","dropdown","tooltip","dashboard","overlay","sidemenu","width","createV1Theme","theme","oldCommon","typography","fontFamily","sansSerif","monospace","fontFamilyMonospace","size","base","fontSize","xs","heading","h1","h2","h3","h4","h5","h6","weight","light","fontWeightLight","regular","fontWeightRegular","semibold","fontWeightMedium","bold","fontWeightBold","lineHeight","bodySmall","body","link","decoration","hoverDecoration","breakpoints","xl","xxl","spacing","gridSize","insetSquishMd","d","xxs","gutter","formSpacingBase","formMargin","formFieldsetMargin","formInputHeight","formButtonHeight","formInputPaddingHorizontal","formInputAffixPaddingHorizontal","formInputMargin","formLabelPadding","formLabelMargin","formValidationMessagePadding","formValidationMessageMargin","inlineFormMargin","radius","shape","borderRadius","components","panelPadding","panelHeaderHeight","zIndex","basicColors","commonColorsPalette","black","white","dark1","dark2","dark3","dark4","dark5","dark6","dark7","dark8","dark9","dark10","gray1","gray2","gray3","gray4","gray5","gray6","gray7","redBase","redShade","greenBase","greenShade","red","yellow","purple","variable","orange","orangeDark","backgrounds","bg1","bg2","secondary","bg3","action","hover","dashboardBg","bgBlue1","main","bgBlue2","shade","borders","border1","border2","border3","textColors","textStrong","maxContrast","textHeading","textSemiWeak","textWeak","textFaint","disabled","textBlue","form","formLabel","formDescription","formInputBg","formInputBgDisabled","disabledBackground","formInputBorder","formInputBorderHover","formInputBorderActive","formInputBorderInvalid","formInputPlaceholderText","formInputText","formInputDisabledText","disabledText","formFocusOutline","formValidationMessageText","contrastText","formValidationMessageBg","GrafanaThemeType","isDark","isLight","palette","brandPrimary","brandSuccess","success","brandWarning","warning","brandDanger","queryRed","queryGreen","queryPurple","queryOrange","online","warn","critical","bodyBg","panelBg","panelBorder","pageHeaderBg","pageHeaderBorder","dropdownBg","dropdownShadow","dropdownOptionHoverBg","linkDisabled","linkHover","linkExternal","listItem","visualization","gray98","gray97","gray95","gray90","gray85","gray70","gray60","gray33","gray25","gray15","gray10","gray05","blue95","blue85","blue80","blue77","red88","createTheme","colorsInput","spacingInput","shapeInput","typographyInput","createColors","createBreakpoints","createSpacing","createShape","createTypography","createShadows","transitions","createTransitions","createVisualizationColors","v1","darkLayer0","darkLayer1","darkLayer2","darkBorder1","darkBorder2","gray100","gray80","lightBorder1","blueDarkMain","blueDarkText","redDarkMain","redDarkText","greenDarkMain","greenDarkText","orangeDarkMain","orangeDarkText","blueLightMain","blueLightText","redLightMain","redLightText","greenLightMain","greenLightText","orangeLightMain","orangeLightText","ReducerID","reduceField","reducers","calcs","missing","s","hasOwnProperty","queue","fieldReducers","list","reducer","id","emptyInputResult","nullValueMode","ignoreNulls","NullValueMode","nullAsZero","doStandardCalcs","lastNotNull","description","standard","aliasIds","calculateLastNotNull","last","calculateLast","firstNotNull","calculateFirstNotNull","first","calculateFirst","min","max","mean","sum","count","range","delta","step","diff","logmin","allIsZero","allIsNull","changeCount","calculateChangeCount","distinctCount","calculateDistinctCount","diffperc","allValues","toArray","Number","MAX_VALUE","nonNullCount","previousDeltaUp","data","isNumberField","currentValue","isFirst","idx","v","distinct","fieldTypeMatcher","FieldMatcherID","defaultOptions","getOptionsDisplayText","numericMatcher","timeMatcher","getFieldTypeMatchers","MatcherID","FrameMatcherID","ValueMatcherID","anyFieldMatcher","excludeFromPicker","children","option","getFieldMatcher","child","sub","matcher","fieldMatchers","anyFrameMatcher","getFrameMatchers","frameMatchers","allFieldsMatcher","allFramesMatcher","notFieldMatcher","check","notFrameMatcher","alwaysFieldMatcher","alwaysFrameMatcher","neverFieldMatcher","notTimeFieldMatcher","neverFrameMatcher","alwaysFieldMatcherInfo","alwaysFrameMatcherInfo","neverFieldMatcherInfo","neverFrameMatcherInfo","getFieldPredicateMatchers","getFramePredicateMatchers","refIdMacher","pattern","regex","stringToJsRegex","getRefIdMatchers","firstFieldMatcher","firstTimeFieldMatcher","find","getSimpleFieldMatchers","isEqualValueMatcher","valueIndex","isApplicable","getDefaultOptions","isNotEqualValueMatcher","getEqualValueMatchers","isNullValueMatcher","isNotNullValueMatcher","getNullValueMatchers","isGreaterValueMatcher","isNaN","isGreaterOrEqualValueMatcher","isLowerValueMatcher","isLowerOrEqualValueMatcher","getNumericValueMatchers","isBetweenValueMatcher","from","to","getRangeValueMatchers","regexValueMatcher","RegExp","getRegexValueMatcher","ensureColumnsTransformer","DataTransformerID","operator","source","pipe","transformer","timeFieldName","timeField","getTimeField","findConsistentTimeFieldName","seriesToColumnsTransformer","byField","filterFieldsTransformer","include","exclude","processed","series","copy","noopTransformer","filterFramesTransformer","filterFieldsByNameTransformer","getMatcherConfig","names","Array","isArray","filterFramesByRefIdTransformer","filterOptions","mergeTransformer","dataFrames","fieldNames","fieldIndexByName","fieldNamesForKey","dataFrame","MutableDataFrame","frameIndex","fieldIndex","addField","copyFieldStructure","fieldExistsInAllFrames","valuesByKey","valuesInOrder","keyFactory","createKeyFactory","valueMapper","createValueMapper","key","createPointer","valueWasMerged","existing","isMergable","pointer","omit","ArrayVector","fieldPointerByName","keyFieldNames","factoryIndex","fieldName","fieldByName","fieldIndexByFrameIndex","mergable","prop","organizeFieldsTransformer","excludeByName","indexByName","renameByName","mapToExcludeArray","orderFieldsTransformer","renameFieldsTransformer","renamer","createRenamer","renameTo","joinBy","joined","outerJoinDataFrames","seriesToRowsTransformer","isTimeSeries","timeFieldByIndex","targetFields","metricField","TIME_SERIES_METRIC_FIELD_NAME","timeFieldIndex","valueFieldIndex","sortDataFrame","sortByTransformer","sort","findIndex","attachFieldIndex","desc","sortDataFrames","FieldColorModeId","FALLBACK_COLOR","ThresholdsMode","MappingType","SpecialValueMatch","init","Map","initialized","getIfExists","initialize","byId","ext","register","selectOptions","current","select","currentOptions","ordered","label","PluginState","ids","found","isEmpty","set","alias","anyToNumber","NaN","toNumber","BinaryOperationID","binaryOperators","Add","operation","Subtract","Multiply","Divide","makeFieldParser","guessFieldTypeFromValue","parseFloat","makeClassES5Compatible","ES6Class","Proxy","apply","target","self","argumentsList","Reflect","construct","alert","toPercent","decimals","toFixed","suffix","toPercentUnit","toHex0x","asHex","toHex","substring","toString","toUpperCase","sci","toExponential","getCategories","formats","fn","toFixedUnit","stringFormater","scaledUnits","locale","SIPrefix","currency","binaryPrefix","dateTimeAsIso","dateTimeAsIsoNoDateIfToday","dateTimeAsUS","dateTimeAsUSNoDateIfToday","getDateTimeAsLocalFormat","getDateTimeAsLocalFormatNoDateIfToday","dateTimeSystemFormatter","dateTimeFromNow","toNanoSeconds","toMicroSeconds","toMilliSeconds","toSeconds","toMinutes","toHours","toDays","toDurationInMilliseconds","toDurationInSeconds","toDurationInHoursMinutesSeconds","toDurationInDaysHoursMinutesSeconds","toTimeTicks","toClockMilliseconds","toClockSeconds","simpleCountUnit","booleanValueFormatter","Interval","UNITS","Year","Month","Week","Day","Hour","Minute","Second","Millisecond","INTERVALS_IN_SECONDS","Math","abs","toFixedScaled","scaledDecimals","toDuration","timeScale","strings","decrementDecimals","decimalsCount","interval","floor","unit","toClock","toUtc","hours","duration","asHours","slice","numHours","numMinutes","numSeconds","dayString","numDays","toDateTimeValueFormatter","todayPattern","isSame","dateTimeFormat","localTimeFormat","year","month","day","hour","minute","second","showMs","dateTimeFormatTimeAgo","symbol","asSuffix","scaler","scaled","prefix","getOffsetFromSIPrefix","c","offset","prefixes","units","p","FunctionalVector","buffer","toJSON","AsNumberVector","BinaryOperationVector","left","right","vectorToArray","ConstantVector","len","fill","RowVector","columns","rowIndex","SortedVector","arr","toDataQueryError","err","message","status","statusText","InternalStreamMessageType","filterMessages","packets","LiveDataStream","deps","ReplaySubject","stream","complete","liveEventsSubscription","unsubscribe","onShutdown","observed","shutdown","log","channelId","next","evt","isLiveChannelMessageEvent","liveChannelStatusEvent","isLiveChannelStatusEvent","LiveChannelConnectionState","msg","frameBuffer","schemaChanged","ChangedSchema","NewValuesSameSchema","getValuesFromLastPacket","bufferOptions","needsResizing","resize","hasAtLeastOnePacket","shutdownTimeoutId","clearTimeout","subKey","clearShutdownTimeout","getStreamingFrameOptions","resizeBuffer","prepareInternalStreamForNewSubscription","shouldSendLastPacketOnly","StreamingFrameAction","fieldsNamesFilter","fieldFilterPredicate","includes","matchingFieldIndexes","getFullFrameResponseData","messages","getMatchingFieldIndexes","LoadingState","StreamingResponseDataType","serialize","maxLength","packetInfo","getNewValuesSameSchemaResponseData","lastMessage","j","filteredValues","shouldSendFullFrame","transformedInternalStream","canEmitObservable","subscriberReadiness","Observable","subscriber","canEmit","emitBuffer","canEmitSub","subscribe","val","sourceSub","errors","lastError","some","n","newValueSameSchemaMessages","setTimeout","shutdownIfNoSubscribers","shutdownDelayInMs","StreamingDataFrame","defaultStreamingFrameOptions","liveEventsObservable","onError","onComplete","onNext","CentrifugeLiveChannel","addr","Date","now","Subject","observers","disconnect","currentStatus","LiveChannelEventType","timestamp","opened","isValidLiveChannelAddress","initalize","initalized","events","publish","ctx","schema","lastMessageWithSchema","sendStatus","user","info","leave","getStream","initialMessage","disconnectIfNoListeners","subscription","presence","then","users","Promise","reject","removeAllListeners","shutdownCallback","shutdownWithError","maxDelta","Infinity","CentrifugeService","context","connectionState","asObservable","address","getChannel","streamCounter","toLiveChannelId","existingStream","liveDataStreamByChannelId","channel","dataStreamSubscriberReadiness","subscriptionKey","createSubscriptionKey","getLiveDataStream","async","centrifuge","isConnected","connectionBlocker","namedRPC","getPresence","share","startWith","liveUrl","appUrl","Centrifuge","timeout","setConnectData","sessionId","orgId","liveEnabled","orgRole","connect","BehaviorSubject","resolve","connectListener","removeListener","addListener","on","onConnect","onDisconnect","onServerSideMessage","scope","namespace","path","open","delete","initChannel","catch","subscriberTransferHandler","canHandle","Subscriber","obj","comlink","port1","port2","MessageChannel","deserialize","start","renderLegendFormat","aliasPattern","aliasData","_","g1"],"sourceRoot":""}