"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9218],{"./public/app/core/components/PageActionBar/PageActionBar.tsx":(e,t,a)=>{a.d(t,{Z:()=>n});var s=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./packages/grafana-ui/src/index.ts"),i=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");class n extends s.PureComponent{render(){const{searchQuery:e,linkButton:t,setSearchQuery:a,target:s,placeholder:n="Search by name or type"}=this.props,r={href:null==t?void 0:t.href,disabled:null==t?void 0:t.disabled};return s&&(r.target=s),(0,i.jsxs)("div",{className:"page-action-bar",children:[(0,i.jsx)("div",{className:"gf-form gf-form--grow",children:(0,i.jsx)(l.FilterInput,{value:e,onChange:a,placeholder:n})}),t&&(0,i.jsx)(l.LinkButton,Object.assign({},r,{children:t.title}))]})}}},"./public/app/features/playlist/PlaylistPage.tsx":(e,t,a)=>{a.r(t),a.d(t,{PlaylistPage:()=>w,default:()=>D});var s=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/0/cache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),i=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useDebounce.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/core/components/Page/Page.tsx"),o=a("./public/app/core/components/PageActionBar/PageActionBar.tsx"),c=a("./public/app/core/selectors/navModel.ts"),d=a("./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx"),p=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),u=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const y=()=>{const e=(0,n.useStyles2)(h);return(0,u.jsx)("div",{className:e.noResult,children:"No playlist found!"})},h=e=>({noResult:p.css`
      padding: ${e.spacing(2)};
      background: ${e.colors.secondary.main};
      font-style: italic;
      margin-top: ${e.spacing(2)};
    `});var m,x=a("./public/app/core/services/context_srv.ts"),b=a("./public/app/features/dashboard/components/DashNav/DashNavButton.tsx"),g=a("./packages/grafana-data/src/index.ts"),v=a("./public/app/core/app_events.ts"),f=a("./public/app/features/dashboard/components/ShareModal/utils.ts");const j=e=>{let{playlistId:t,onDismiss:a}=e;const[l,i]=(0,s.useState)(!1),[r,o]=(0,s.useState)(!1),c={};l&&(c.kiosk=l),r&&(c.autofitpanels=!0);const d=g.urlUtil.renderUrl(`${(0,f.OS)()}/play/${t}`,c);return(0,u.jsx)(n.Modal,{isOpen:!0,title:"Share playlist",onDismiss:a,children:(0,u.jsxs)(n.FieldSet,{children:[(0,u.jsx)(n.Field,{label:"Mode",children:(0,u.jsx)(n.RadioButtonGroup,{value:l,options:[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],onChange:i})}),(0,u.jsx)(n.Field,{children:(0,u.jsx)(n.Checkbox,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:r,onChange:e=>o(e.currentTarget.checked)})}),(0,u.jsx)(n.Field,{label:"Link URL",children:(0,u.jsx)(n.Input,{id:"link-url-input",value:d,readOnly:!0,addonAfter:(0,u.jsxs)(n.ClipboardButton,{variant:"primary",getText:()=>d,onClipboardCopy:()=>{v.Z.emit(g.AppEvents.alertSuccess,["Content copied to clipboard"])},children:[m||(m=(0,u.jsx)(n.Icon,{name:"copy"}))," Copy"]})})})]})})},k=e=>{let{playlists:t,setStartPlaylist:a,setPlaylistToDelete:s}=e;const l=(0,n.useStyles2)(S);return(0,u.jsx)("ul",{className:l.list,children:t.map((e=>(0,u.jsx)("li",{className:l.listItem,children:(0,u.jsxs)(n.Card,{children:[(0,u.jsxs)(n.Card.Heading,{children:[e.name,(0,u.jsx)(n.ModalsController,{children:t=>{let{showModal:a,hideModal:s}=t;return(0,u.jsx)(b.u,{tooltip:"Share playlist",icon:"share-alt",iconSize:"lg",onClick:()=>{a(j,{playlistId:e.id,onDismiss:s})}})}},"button-share")]}),(0,u.jsxs)(n.Card.Actions,{children:[(0,u.jsx)(n.Button,{variant:"secondary",icon:"play",onClick:()=>a(e),children:"Start playlist"}),x.Vt.isEditor&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n.LinkButton,{variant:"secondary",href:`/playlists/edit/${e.id}`,icon:"cog",children:"Edit playlist"},"edit"),(0,u.jsx)(n.Button,{disabled:!1,onClick:()=>s({id:e.id,name:e.name}),icon:"trash-alt",variant:"destructive",children:"Delete playlist"})]})]})]})},e.id.toString())))})};function S(e){return{list:(0,p.css)({display:"grid"}),listItem:(0,p.css)({listStyle:"none"})}}var C=a("./packages/grafana-runtime/src/index.ts");const _=e=>{let{playlist:t,onDismiss:a}=e;const[l,i]=(0,s.useState)(!1),[r,o]=(0,s.useState)(!1);return(0,u.jsxs)(n.Modal,{isOpen:!0,icon:"play",title:"Start playlist",onDismiss:a,children:[(0,u.jsxs)(n.FieldSet,{children:[(0,u.jsx)(n.Field,{label:"Mode",children:(0,u.jsx)(n.RadioButtonGroup,{value:l,options:[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],onChange:i})}),(0,u.jsx)(n.Checkbox,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:r,onChange:e=>o(e.currentTarget.checked)})]}),(0,u.jsx)(n.Modal.ButtonRow,{children:(0,u.jsxs)(n.Button,{variant:"primary",onClick:()=>{const e={};l&&(e.kiosk=l),r&&(e.autofitpanels=!0),C.locationService.push(g.urlUtil.renderUrl(`/playlists/play/${t.id}`,e))},children:["Start ",t.name]})})]})};var B,P,T=a("./public/app/features/playlist/api.ts");const w=e=>{let{navModel:t}=e;const[a,l]=(0,s.useState)(""),[c,p]=(0,s.useState)(a),[h,m]=(0,s.useState)(!1),[x,b]=(0,s.useState)(),[g,v]=(0,s.useState)(),[f,j]=(0,s.useState)(0),[S,C]=(0,s.useState)([]);(0,i.Z)((async()=>{const e=await(0,T.Dv)(a);h||m(!0),C(e),p(a)}),350,[f,a]);const w=S&&S.length>0,D=B||(B=(0,u.jsx)(d.Z,{title:"There are no playlists created yet",buttonIcon:"plus",buttonLink:"playlists/new",buttonTitle:"Create Playlist",proTip:"You can use playlists to cycle dashboards on TVs without user control",proTipLink:"http://docs.grafana.org/reference/playlist/",proTipLinkTitle:"Learn more",proTipTarget:"_blank"})),A=S.length>0||a.length>0||c.length>0;return(0,u.jsx)(r.Z,{navModel:t,children:(0,u.jsxs)(r.Z.Contents,{isLoading:!h,children:[A&&(0,u.jsx)(o.Z,{searchQuery:a,linkButton:{title:"New playlist",href:"/playlists/new"},setSearchQuery:l}),!w&&a?P||(P=(0,u.jsx)(y,{})):(0,u.jsx)(k,{playlists:S,setStartPlaylist:b,setPlaylistToDelete:v}),!A&&D,g&&(0,u.jsx)(n.ConfirmModal,{title:g.name,confirmText:"Delete",body:`Are you sure you want to delete '${g.name}' playlist?`,onConfirm:()=>{g&&(0,T.l8)(g.id).finally((()=>{j(f+1),v(void 0)}))},isOpen:Boolean(g),onDismiss:()=>v(void 0)}),x&&(0,u.jsx)(_,{playlist:x,onDismiss:()=>b(void 0)})]})})},D=(0,l.connect)((e=>({navModel:(0,c.h)(e.navIndex,"playlists")})))(w)},"./public/app/features/playlist/api.ts":(e,t,a)=>{a.d(t,{A5:()=>d,CE:()=>o,Dv:()=>p,cg:()=>r,l8:()=>c});var s=a("./packages/grafana-runtime/src/index.ts"),l=a("./public/app/core/actions/index.ts"),i=a("./public/app/core/copy/appNotification.ts"),n=a("./public/app/store/store.ts");async function r(e){await u((()=>(0,s.getBackendSrv)().post("/api/playlists",e)))}async function o(e,t){await u((()=>(0,s.getBackendSrv)().put(`/api/playlists/${e}`,t)))}async function c(e){await u((()=>(0,s.getBackendSrv)().delete(`/api/playlists/${e}`)),"Playlist deleted")}async function d(e){return await(0,s.getBackendSrv)().get(`/api/playlists/${e}`)}async function p(e){return await(0,s.getBackendSrv)().get("/api/playlists/",{query:e})}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Playlist saved";try{await e(),(0,n.WI)((0,l.$l)((0,i.AT)(t)))}catch(e){(0,n.WI)((0,l.$l)((0,i.t_)("Unable to save playlist",e)))}}}}]);
//# sourceMappingURL=PlaylistPage.a87fd0ce1ff28bec28a3.js.map