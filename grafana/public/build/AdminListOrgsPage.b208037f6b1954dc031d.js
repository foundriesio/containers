"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3798],{"./public/app/features/admin/AdminListOrgsPage.tsx":(e,a,s)=>{s.r(a),s.d(a,{default:()=>v});var r,n,t,i,c,d=s("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=s("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),o=s("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useAsyncFn.js"),u=s("./packages/grafana-runtime/src/index.ts"),p=s("./packages/grafana-ui/src/index.ts"),h=s("./public/app/core/components/Page/Page.tsx"),x=s("./public/app/core/selectors/navModel.ts"),m=s("./public/app/core/services/context_srv.ts"),g=s("./public/app/types/index.ts"),b=s("./public/app/core/core.ts"),j=s("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function f(e){let{orgs:a,onDelete:s}=e;const c=b.Vt.hasPermission(g.bW.OrgsDelete),[l,o]=(0,d.useState)();return(0,j.jsxs)("table",{className:"filter-table form-inline filter-table--hover",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[r||(r=(0,j.jsx)("th",{children:"ID"})),n||(n=(0,j.jsx)("th",{children:"Name"})),(0,j.jsx)("th",{style:{width:"1%"}})]})}),(0,j.jsx)("tbody",{children:a.map((e=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:"link-td",children:(0,j.jsx)("a",{href:`admin/orgs/edit/${e.id}`,children:e.id})}),(0,j.jsx)("td",{className:"link-td",children:(0,j.jsx)("a",{href:`admin/orgs/edit/${e.id}`,children:e.name})}),(0,j.jsx)("td",{className:"text-right",children:(0,j.jsx)(p.Button,{variant:"destructive",size:"sm",icon:"times",onClick:()=>o(e),"aria-label":"Delete org",disabled:!c})})]},`${e.id}-${e.name}`)))}),l&&(0,j.jsx)(p.ConfirmModal,{isOpen:!0,icon:"trash-alt",title:"Delete",body:(0,j.jsxs)("div",{children:["Are you sure you want to delete '",l.name,"'?",t||(t=(0,j.jsx)("br",{}))," ",i||(i=(0,j.jsx)("small",{children:"All dashboards for this organization will be removed!"}))]}),confirmText:"Delete",onDismiss:()=>o(void 0),onConfirm:()=>{s(l.id),o(void 0)}})]})}function v(){const e=(0,l.useSelector)((e=>e.navIndex)),a=(0,x.h)(e,"global-orgs"),[s,r]=(0,o.default)((async()=>await(async()=>await(0,u.getBackendSrv)().get("/api/orgs"))()),[]),n=m.Vt.hasPermission(g.bW.OrgsCreate);return(0,d.useEffect)((()=>{r()}),[r]),(0,j.jsx)(h.Z,{navModel:a,children:(0,j.jsx)(h.Z.Contents,{children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"page-action-bar",children:[c||(c=(0,j.jsx)("div",{className:"page-action-bar__spacer"})),(0,j.jsx)(p.LinkButton,{icon:"plus",href:"org/new",disabled:!n,children:"New org"})]}),s.error&&(t=s.error,(null==t||null===(i=t.data)||void 0===i?void 0:i.message)||"An unexpected error happened."),s.loading&&"Fetching organizations",s.value&&(0,j.jsx)(f,{orgs:s.value,onDelete:e=>{(async e=>await(0,u.getBackendSrv)().delete("/api/orgs/"+e))(e).then((()=>r()))}})]})})});var t,i}}}]);
//# sourceMappingURL=AdminListOrgsPage.b208037f6b1954dc031d.js.map